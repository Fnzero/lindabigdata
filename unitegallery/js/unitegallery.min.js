// Essential Grid, Version: 1.6.5, released 03 Sep 2015 

function UG_API(e){function t(e){var t={index:e.index,title:e.title,description:e.description,urlImage:e.urlImage,urlThumb:e.urlThumb},i=e.objThumbImage.data();for(var n in i){switch(n){case"image":case"description":continue}t[n]=i[n]}return t}var i,n=this,r=(jQuery(n),new UniteGalleryMain);r=e,i=jQuery(e),this.on=function(e,n){switch(e){case"item_change":i.on(r.events.ITEM_CHANGE,function(){var e=r.getSelectedItem(),i=t(e);n(i.index,i)});break;case"resize":i.on(r.events.SIZE_CHANGE,n);break;case"enter_fullscreen":i.on(r.events.ENTER_FULLSCREEN,n);break;case"exit_fullscreen":i.on(r.events.EXIT_FULLSCREEN,n);break;case"play":i.on(r.events.START_PLAY,n);break;case"stop":i.on(r.events.STOP_PLAY,n);break;case"pause":i.on(r.events.PAUSE_PLAYING,n);break;case"continue":i.on(r.events.CONTINUE_PLAYING,n);break;default:console&&console.log("wrong api event: "+e)}},this.play=function(){r.startPlayMode()},this.stop=function(){r.stopPlayMode()},this.togglePlay=function(){r.togglePlayMode()},this.enterFullscreen=function(){r.toFullScreen()},this.exitFullscreen=function(){r.exitFullScreen()},this.toggleFullscreen=function(){r.toggleFullscreen()},this.resetZoom=function(){var e=r.getObjSlider();return e?void e.zoomBack():!1},this.zoomIn=function(){var e=r.getObjSlider();return e?void e.zoomIn():!1},this.zoomOut=function(){var e=r.getObjSlider();return e?void e.zoomOut():!1},this.nextItem=function(){r.nextItem()},this.prevItem=function(){r.prevItem()},this.selectItem=function(e){r.selectItem(e)},this.resize=function(e,t){t?r.resize(e,t):r.resize(e)},this.getItem=function(e){var i=r.getItem(e),n=t(i);return n},this.getNumItems=function(){var e=r.getNumItems();return e},this.reloadGallery=function(e){if(!e)var e={};r.run(null,e)},this.destroy=function(){r.destroy()}}function UGAviaControl(){function e(e){return 0==p?e.pageX:e.pageY}function t(){jQuery("body").on("touchstart",function(){return 0==f.isControlEnabled?!0:void(f.touchEnabled=!0)}),jQuery("body").mousemove(function(t){if(0==f.isControlEnabled)return!0;if(1==f.touchEnabled)return jQuery("body").off("mousemove"),!0;f.isMouseInsideStrip=g.ismouseover();var i=u.isTouchMotionActive();if(1==f.isMouseInsideStrip&&0==i){var n=e(t);l(n)}else a()})}function i(e){var t=g.height(),i=c.height();if(t>i)return!1;var n=g.offset(),r=n.top,o=e-r,a=h.thumb_height,s=t-h.thumb_height,l=s-a;a>o&&(o=a),o>s&&(o=s);var u=(o-a)/l,d=(i-t)*u;return d=Math.round(d),d=-1*d}function n(e){var t=g.width(),i=c.width();if(t>i)return!1;var n=g.offset(),r=n.left,o=e-r,a=h.thumb_width,s=t-h.thumb_width,l=s-a;a>o&&(o=a),o>s&&(o=s);var u=(o-a)/l,d=(i-t)*u;return d=Math.round(d),d=-1*d}function r(){if(0==f.is_strip_moving)return!1;var e=u.getInnerStripPos();Math.floor(e)==Math.floor(f.strip_finalPos)&&a();var t,i=Math.abs(Math.abs(f.strip_finalPos)-Math.abs(e));1>i?t=i:(t=i/4,t>0&&1>t&&(t=1)),f.strip_finalPos<e&&(t=-1*t);var n=e+t;u.positionInnerStrip(n)}function o(){return 1==f.isStripMoving?!1:(f.isStripMoving=!0,void(f.handle_timeout=setInterval(r,10)))}function a(){return 0==f.isStripMoving?!1:(f.isStripMoving=!1,void(f.handle_timeout=clearInterval(f.handle_timeout)))}function s(e){return 0==p?n(e):i(e)}function l(e){var t=s(e);f.is_strip_moving=!0,f.strip_finalPos=t,o()}var u,d,_,g,c,h,p,f={touchEnabled:!1,isMouseInsideStrip:!1,strip_finalPos:0,handle_timeout:"",isStripMoving:!1,isControlEnabled:!0};this.enable=function(){f.isControlEnabled=!0},this.disable=function(){f.isControlEnabled=!1},this.init=function(e){u=e,_=e.getObjects(),d=_.g_gallery,g=_.g_objStrip,c=_.g_objStripInner,h=_.g_options,p=_.isVertical,t()},this.destroy=function(){jQuery("body").off("touchstart"),jQuery("body").off("mousemove")}}function UGCarousel(){function e(e,t){g_objects=e.getObjects(),F=e,k=jQuery(e),L=g_objects.g_objWrapper,R=g_objects.g_arrItems,U=jQuery.extend(U,t),B.setFixedMode(),B.setApproveClickFunction(N),B.init(e,U),Y=B.getObjThumbs(),U=B.getOptions(),X.initTileWidth=U.tile_width,X.initTileHeight=U.tile_height,X.tileWidth=U.tile_width}function t(e){if(!e)var e=L;var t="<div class='ug-carousel-wrapper'><div class='ug-carousel-inner'></div></div>";L.append(t),Q=L.children(".ug-carousel-wrapper"),H=Q.children(".ug-carousel-inner"),B.setHtml(H),Y.getThumbs().fadeTo(0,1)}function i(e,t){if(!t)var t=X.initTileHeight/X.initTileWidth*e;X.tileWidth=e;var i={tile_width:e,tile_height:t};B.setOptions(i),U.tile_width=e,U.tile_height=t,B.resizeAllTiles(e),m(!0)}function n(){if(null===X.carouselMaxWidth)throw new Error("The carousel width not set");if(X.tileWidth<X.initTileWidth){var e=X.carouselMaxWidth-2*U.carousel_padding;e>X.initTileWidth&&(e=X.initTileWidth),i(e);var t=W.getNumItemsInSpace(X.carouselMaxWidth,e,U.carousel_space_between_tiles)}else{var t=W.getNumItemsInSpace(X.carouselMaxWidth,X.tileWidth,U.carousel_space_between_tiles);if(0>=t){t=1;var e=X.carouselMaxWidth-2*U.carousel_padding;i(e)}}var n=W.getSpaceByNumItems(t,X.tileWidth,U.carousel_space_between_tiles);n+=2*U.carousel_padding,Q.width(n),1==X.isFirstTimeRun?(z(),B.run(),jQuery.each(R,function(e,t){t.objThumbWrapper.data("index",e),L.trigger(X.eventSizeChange,[t.objThumbWrapper,!0]),t.objTileOriginal=t.objThumbWrapper.clone(!0,!0)}),m(!0),1==U.carousel_autoplay&&G.startAutoplay()):(1==U.carousel_autoplay&&G.pauseAutoplay(),I(0,!1),1==U.carousel_autoplay&&G.startAutoplay()),P(),X.isFirstTimeRun=!1}function r(){return W.getElementSize(H).left}function o(e){return W.getMousePosition(e).pageX}function a(){var e=H.children(".ug-thumb-wrapper");return e}function s(e){var t=W.getNumItemsInSpace(e,X.tileWidth,U.carousel_space_between_tiles);return t}function l(){return a().length}function u(e){v(e);var t=a(),i=jQuery(t[e]);return i}function d(){return H.children(".ug-thumb-wrapper").first()}function _(){return H.children(".ug-thumb-wrapper").last()}function g(e,t,i){var n=e.data("index");if(void 0==n)throw new Error("every tile should have index!");for(var r=[],o=0;t>o;o++){if("prev"==i)var a=F.getPrevItem(n,!0);else var a=F.getNextItem(n,!0);if(!a)throw new Error("the item to add is empty");var s=a.objTileOriginal.clone(!0,!0);n=a.index,s.addClass("cloned"),r.push(s)}return r}function c(){var e=W.getElementSize(Q),t=W.getElementSize(H),i=t.width-e.width+t.left,n=X.sideSpace-i;return n}function h(){var e=-r(),t=X.sideSpace-e;return t}function p(){var e=W.getElementSize(Q);return e.width}function f(){var e=p(),t=s(e);return t}function m(e){if(!e)var e=!1;var t,i=a(),n=0,r=0;return jQuery.each(i,function(e,o){o=jQuery(o),W.placeElement(o,n,0);var a=W.getElementSize(o);n+=a.width+U.carousel_space_between_tiles,r=Math.max(r,a.height),e==i.length-1&&(t=a.right)}),H.width(t),r+=2*U.carousel_padding,e===!0&&(H.height(r),Q.height(r)),I(X.numCurrent,!1),t}function v(e){if(e>a().length-1)throw new Error("Wrogn tile number: "+e)}function b(e,t){if("left"==t)var i=d();else var i=_();var n="left"==t?"prev":"next",r=g(i,e,n);jQuery.each(r,function(e,i){"left"==t?H.prepend(i):H.append(i),L.trigger(X.eventSizeChange,i),B.loadTileImage(i)})}function y(e,t){v(n);for(var i=a(),n=i.length,r=0;e>r;r++)"left"==t?jQuery(i[r]).remove():jQuery(i[n-1-r]).remove()}function w(e){var t={left:e+"px"};H.css(t)}function I(e,t,i){if(void 0===t){var t=!0;if(H.is(":animated"))return!0}var n=u(e),r=W.getElementSize(n),o=-r.left+U.carousel_padding,a={left:o+"px"};if(t===!0){var s=U.carousel_scroll_duration,l=U.carousel_scroll_easing;i===!0&&(s=X.scrollShortDuration,l=X.scrollShortEasing),H.stop(!0).animate(a,{duration:s,easing:l,queue:!1,complete:function(){X.numCurrent=e,S(!0)}})}else X.numCurrent=e,H.css(a)}function E(){var e=-r(),t=s(e),i=W.getElementSize(u(t)).left,n=W.getElementSize(u(t+1)).left;return Math.abs(i-e)<Math.abs(n-e)?t:t+1}function T(){var e=E();I(e,!0,!0)}function S(){var e=h(),t=c(),i=0,n=0,r=0,o=0,a=l();if(e>X.spaceActionSize)i=s(e),b(i,"left"),X.numCurrent+=i;else if(e<-X.spaceActionSize){var r=s(Math.abs(e));y(r,"left"),X.numCurrent-=r}if(t>X.spaceActionSize?(n=s(t),b(n,"right")):t<-X.spaceActionSize&&(o=s(Math.abs(t)),y(o,"right")),o>a)throw new Error("Can't remove more then num tiles");var u=!1;return(i||n||r||o)&&(m(),u=!0),u}function P(){W.placeElement(H,0,U.carousel_padding),S()}function x(){"left"==U.carousel_autoplay_direction?G.scrollRight(1):G.scrollLeft(1)}function j(e){return 1==X.touchActive?!0:(X.touchActive=!0,G.pauseAutoplay(),X.startTime=jQuery.now(),X.startMousePos=o(e),X.startInnerPos=r(),X.lastTime=X.startTime,X.lastMousePos=X.startMousePos,void W.storeEventData(e,X.storedEventID))}function C(e){if(0==X.touchActive)return!0;W.updateStoredEventData(e,X.storedEventID),e.preventDefault();var t=null;if(1==U.carousel_vertical_scroll_ondrag&&(t=W.handleScrollTop(X.storedEventID)),"vert"===t)return!0;X.lastMousePos=o(e);var i=X.lastMousePos-X.startMousePos,n=X.startInnerPos+i,r=i>0?"prev":"next",a=W.getElementSize(H).width;n>0&&"prev"==r&&(n/=3),-a>n&&"next"==r&&(n=X.startInnerPos+i/3),w(n)}function A(){return 0==X.touchActive?!0:(X.touchActive=!1,T(),void G.unpauseAutoplay())}function M(){return 0==U.carousel_autoplay_pause_onhover?!0:void(1==X.isPlayMode&&0==X.isPaused&&G.pauseAutoplay())}function O(){return 0==U.carousel_autoplay_pause_onhover?!0:void G.unpauseAutoplay()}function z(){B.initEvents(),Q.bind("mousedown touchstart",j),jQuery("body").bind("mousemove touchmove",C),jQuery(window).add("body").bind("mouseup touchend",A),Q.hover(M,O)}function N(){var e=X.lastTime-X.startTime,t=Math.abs(X.lastMousePos-X.startMousePos);return e>300?!1:t>30?!1:!0}var k,L,R,Q,H,G=this,D=jQuery(this),F=new UniteGalleryMain,W=new UGFunctions,B=new UGTileDesign,Y=new UGThumbsGeneral,U={carousel_padding:8,carousel_space_between_tiles:20,carousel_navigation_numtiles:3,carousel_scroll_duration:500,carousel_scroll_easing:"easeOutCubic",carousel_autoplay:!0,carousel_autoplay_timeout:3e3,carousel_autoplay_direction:"right",carousel_autoplay_pause_onhover:!0,carousel_vertical_scroll_ondrag:!1};this.events={START_PLAY:"carousel_start_play",PAUSE_PLAY:"carousel_pause_play",STOP_PLAY:"carousel_stop_play"};var X={eventSizeChange:"thumb_size_change",isFirstTimeRun:!0,carouselMaxWidth:null,tileWidth:0,initTileWidth:0,initTileHeight:0,sideSpace:1500,spaceActionSize:500,numCurrent:0,touchActive:!1,startInnerPos:0,lastTime:0,startTime:0,startMousePos:0,lastMousePos:0,scrollShortDuration:200,scrollShortEasing:"easeOutQuad",handle:null,isPlayMode:!1,isPaused:!1,storedEventID:"carousel"};this.startAutoplay=function(){X.isPlayMode=!0,X.isPaused=!1,D.trigger(G.events.START_PLAY),X.handle&&clearInterval(X.handle),X.handle=setInterval(x,U.carousel_autoplay_timeout)},this.unpauseAutoplay=function(){return 0==X.isPlayMode?!0:0==X.isPaused?!0:void G.startAutoplay()},this.pauseAutoplay=function(){return 0==X.isPlayMode?!0:(X.isPaused=!0,X.handle&&clearInterval(X.handle),void D.trigger(G.events.PAUSE_PLAY))},this.stopAutoplay=function(){return 0==X.isPlayMode?!0:(X.isPaused=!1,X.isPlayMode=!1,X.handle&&clearInterval(X.handle),void D.trigger(G.events.STOP_PLAY))},this.destroy=function(){X.handle&&clearInterval(X.handle),D.off(G.events.START_PLAY),D.off(G.events.STOP_PLAY),Q.unbind("mousedown"),Q.unbind("touchstart"),jQuery("body").unbind("mousemove"),jQuery("body").unbind("touchmove"),jQuery(window).add("body").unbind("mouseup").unbind("touchend"),Q.off("mouseenter").off("mouseleave"),B.destroy()},this.init=function(t,i,n){n&&this.setMaxWidth(n),e(t,i)},this.setMaxWidth=function(e){X.carouselMaxWidth=e},this.setHtml=function(e){t(e)},this.getElement=function(){return Q},this.getObjTileDesign=function(){return B},this.getEstimatedHeight=function(){var e=U.tile_height+2*U.carousel_padding;return e},this.run=function(){n()},this.scrollRight=function(e){if(!e||"object"==typeof e)var e=U.carousel_navigation_numtiles;var t=f();e>t&&(e=t);var i=X.numCurrent-e;0>=i&&(i=0),I(i)},this.scrollLeft=function(e){if(!e||"object"==typeof e)var e=U.carousel_navigation_numtiles;var t=f();e>t&&(e=t);var i=l(),n=X.numCurrent+e;n>=i&&(n=i-1),I(n)},this.setScrollLeftButton=function(e){W.setButtonMobileReady(e),W.setButtonOnClick(e,G.scrollLeft)},this.setScrollRightButton=function(e){W.setButtonMobileReady(e),W.setButtonOnClick(e,G.scrollRight)},this.setPlayPauseButton=function(e){W.setButtonMobileReady(e),1==X.isPlayMode&&0==X.isPaused&&e.addClass("ug-pause-icon"),D.on(G.events.START_PLAY,function(){e.addClass("ug-pause-icon")}),D.on(G.events.STOP_PLAY,function(){e.removeClass("ug-pause-icon")}),W.setButtonOnClick(e,function(){0==X.isPlayMode||1==X.isPaused?G.startAutoplay():G.stopAutoplay()})}}function debugLine(e,t,i){e===!0&&(e="true"),e===!1&&(e="false");var n=e;if("object"==typeof e){n="";for(name in e){var r=e[name];n+=" "+name+": "+r}}if(1!=t||i||(n+=" "+Math.random()),1==i){var o=jQuery("#debug_line");o.width(200),o.height()>=500&&o.html("");var a=o.html();n=a+"<br> -------------- <br>"+n}jQuery("#debug_line").show().html(n)}function debugSide(e){var t="";for(name in e){var i=e[name];t+=name+" : "+i+"<br>"}jQuery("#debug_side").show().html(t)}function trace(e){"undefined"!=typeof console&&console.log(e)}function UGFunctions(){function e(e,t,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t[e]=i}var t=null,i=this,n={starTime:0,arrThemes:[],isTouchDevice:-1,isRgbaSupported:-1,timeCache:{},dataCache:{},lastEventType:"",lastEventTime:0,handle:null};this.debugVar="",this.z__________FULL_SCREEN___________=function(){},this.normalizePercent=function(e){return 0>e&&(e=0),e>1&&(e=1),e},this.toFullscreen=function(e){if(e.requestFullscreen)e.requestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.webkitRequestFullscreen)return!1;e.webkitRequestFullscreen()}return!0},this.exitFullscreen=function(){if(0==i.isFullScreen())return!1;if(document.exitFullscreen)document.exitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.webkitExitFullscreen)return!1;document.webkitExitFullscreen()}return!0},this.addFullScreenChangeEvent=function(t){e("fullscreenchange",document,t),e("mozfullscreenchange",document,t),e("webkitfullscreenchange",document,t),e("msfullscreenchange",document,t)},this.destroyFullScreenChangeEvent=function(){jQuery(document).unbind("fullscreenchange"),jQuery(document).unbind("mozfullscreenchange"),jQuery(document).unbind("webkitfullscreenchange"),jQuery(document).unbind("msfullscreenchange")},this.getFullScreenElement=function(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;return e},this.isFullScreen=function(){var e=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement;return e||(e=!1),e},this.z__________END_FULL_SCREEN___________=function(){},this.z__________GET_PROPS___________=function(){},this.getBrowserPrefix=function(){if(null!==t)return t;var e=["webkit","Moz","ms","O"],i=document.createElement("div");for(var n in e){var r=e[n];if(r+"Transform"in i.style)return r=r.toLowerCase(),t=r,r}return t="",""},this.getImageInsideParentDataByImage=function(e,t,n){var r=e.parent(),o=i.getImageOriginalSize(e),a=i.getImageInsideParentData(r,o.width,o.height,t,n);return a},this.getImageInsideParentData=function(e,t,i,n,r,o,a){if(!r)var r={};var s={};if("undefined"==typeof o)var o=e.width();if("undefined"==typeof a)var a=e.height();r.padding_left&&(o-=r.padding_left),r.padding_right&&(o-=r.padding_right),r.padding_top&&(a-=r.padding_top),r.padding_bottom&&(a-=r.padding_bottom);var l=null,u="100%",d=null,_=null,g="display:block;margin:0px auto;";if(t>0&&i>0){if("down"==n&&o>t&&a>i)u=i,l=t,_=(o-l)/2,d=(a-u)/2;else if("fill"==n){var c=t/i;u=a,l=u*c,o>l?(l=o,u=l/c,_=0,d=Math.round((u-a)/2*-1)):(d=0,_=Math.round((l-o)/2*-1))}else{var c=t/i;u=a,l=u*c,d=0,_=(o-l)/2,"fitvert"!=n&&l>o&&(l=o,u=l/c,_=0,d=(a-u)/2)}l=Math.floor(l),u=Math.floor(u),d=Math.floor(d),_=Math.floor(_),g="position:absolute;"}return r.padding_top&&(d+=r.padding_top),r.padding_left&&(_+=r.padding_left),s.imageWidth=l,s.imageHeight=u,s.imageTop=d,s.imageLeft=_,s.imageRight=_+l,s.imageBottom=0==d||"100%"==u?null:d+u,s.style=g,s},this.getElementCenterPosition=function(e,t){var n=e.parent(),r=i.getElementSize(e),o=i.getElementSize(n),a=o.width,s=o.height;t&&void 0!==t.padding_top&&(s-=t.padding_top),t&&void 0!==t.padding_bottom&&(s-=t.padding_bottom),t&&void 0!==t.padding_left&&(a-=t.padding_left),t&&void 0!==t.padding_right&&(a-=t.padding_right);var l={};return l.left=Math.round((a-r.width)/2),l.top=Math.round((s-r.height)/2),t&&void 0!==t.padding_top&&(l.top+=t.padding_top),t&&void 0!==t.padding_left&&(l.left+=t.padding_left),l},this.getElementCenterPoint=function(e,t){if(!t)var t=!1;var n=i.getElementSize(e),r={};return r.x=n.width/2,r.y=n.height/2,1==t&&(r.x+=n.left,r.y+=n.top),r.x=Math.round(r.x),r.y=Math.round(r.y),r},this.getMousePosition=function(e,t){var i={pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY};if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(i.pageX=e.originalEvent.touches[0].pageX,i.pageY=e.originalEvent.touches[0].pageY,i.clientX=e.originalEvent.touches[0].clientX,i.clientY=e.originalEvent.touches[0].clientY),t){var n=t.offset();i.mouseX=i.pageX-n.left,i.mouseY=i.pageY-n.top}return i},this.getMouseElementPoint=function(e,t){var n={x:e.pageX,y:e.pageY},r=i.getElementLocalPoint(n,t);return r},this.getElementLocalPoint=function(e,t){var i={},n=t.offset();return i.x=Math.round(e.x-n.left),i.y=Math.round(e.y-n.top),i},this.getImageOriginalSize=function(e,t,i){if("undefined"!=typeof t&&"undefined"!=typeof i)return{width:t,height:i};var n=e[0],r={};if("undefined"==typeof n.naturalWidth){if("number"==typeof e.data("naturalWidth")){var r={};return r.width=e.data("naturalWidth"),r.height=e.data("naturalHeight"),r}var o=new Image;return o.src=n.src,o.complete?(r.width=o.width,r.height=o.height,e.data("naturalWidth",r.width),e.data("naturalHeight",r.height),r):{width:0,height:0}}return r.width=n.naturalWidth,r.height=n.naturalHeight,r},this.getimageRatio=function(e){var t=i.getImageOriginalSize(e),n=i.getElementSize(e),r=n.width/t.width;return r},this.isImageFitParent=function(e){var t=e.parent(),n=i.getElementSize(e),r=i.getElementSize(t);return n.width<=r.width&&n.height<=r.height?!0:!1},this.getElementSize=function(e){if(void 0===e)throw new Error("Can't get size, empty element");var t=e.position();return t.height=e.outerHeight(),t.width=e.outerWidth(),t.left=Math.round(t.left),t.top=Math.round(t.top),t.right=t.left+t.width,t.bottom=t.top+t.height,t},this.isElementBiggerThenParent=function(e){var t=e.parent(),n=i.getElementSize(e),r=i.getElementSize(t);return n.width>r.width||n.height>r.height?!0:!1},this.isPointInsideElement=function(e,t){var i=e.x>=0&&e.x<t.width;if(0==i)return!1;var n=e.y>=0&&e.y<t.height;return 0==n?!1:!0},this.getElementRelativePos=function(e,t,n,r){if(!r)var r=e.parent();var o=i.getElementSize(e),a=i.getElementSize(r);switch(t){case"top":case"left":t=0,n&&(t+=n);break;case"center":t=Math.round((a.width-o.width)/2),n&&(t+=n);break;case"right":t=a.width-o.width,n&&(t-=n);break;case"middle":t=Math.round((a.height-o.height)/2),n&&(t+=n);break;case"bottom":t=a.height-o.height,n&&(t-=n)}return t},this.z__________END_GET_PROPS___________=function(){},this.z_________SET_ELEMENT_PROPS_______=function(){},this.zoomImageInsideParent=function(e,t,n,r,o,a,s){if(!n)var n=1.2;if(!o)var o="fit";var l,u,d,_,g=n,c=e.parent(),h=i.getElementSize(e),p=i.getImageOriginalSize(e),f=!1,m=0,v=0,b=0,y=0;if(r){var w=i.getMouseElementPoint(r,e);f=i.isPointInsideElement(w,h),b=w.x,y=w.y}else f=!1;if(0==f){var I=i.getElementCenterPoint(e);b=I.x,y=I.y}if(1==t)l=h.height*g,u=h.width*g,0!=b&&(m=-(b*g-b)),0!=y&&(v=-(y*g-y));else{l=h.height/g,u=h.width/g;var E=i.getImageInsideParentData(c,p.width,p.height,o,s);if(u<E.imageWidth)return i.scaleImageFitParent(e,p.width,p.height,o,s),!0;1==f&&(0!=b&&(m=-(b/g-b)),0!=y&&(v=-(y/g-y)))}if(a){var T=1;if(0!=p.width&&(T=u/p.width),T>a)return!1}if(i.setElementSize(e,u,l),0==t&&0==f){var S=i.getElementCenterPosition(e);d=S.left,_=S.top}else d=h.left+m,_=h.top+v;return i.placeElement(e,d,_),!0},this.placeElement=function(e,t,n,r,o,a){if(0==jQuery.isNumeric(t)||0==jQuery.isNumeric(n)){if(!a)var a=e.parent();var s=i.getElementSize(e),l=i.getElementSize(a)}if(0==jQuery.isNumeric(t))switch(t){case"left":t=0,r&&(t+=r);break;case"center":t=Math.round((l.width-s.width)/2),r&&(t+=r);break;case"right":t=l.width-s.width,r&&(t-=r)}if(0==jQuery.isNumeric(n))switch(n){case"top":n=0,o&&(n+=o);break;case"middle":case"center":n=Math.round((l.height-s.height)/2),o&&(n+=o);break;case"bottom":n=l.height-s.height,o&&(n-=o)}var u={position:"absolute",margin:"0px"};null!==t&&(u.left=t),null!==n&&(u.top=n),e.css(u)},this.placeElementInParentCenter=function(e){i.placeElement(e,"center","middle")},this.setElementSizeAndPosition=function(e,t,i,n,r){var o={width:n+"px",height:r+"px",left:t+"px",top:i+"px",position:"absolute",margin:"0px"};e.css(o)},this.setElementSize=function(e,t,i){var n={width:t+"px",height:i+"px"};e.css(n)},this.cloneElementSizeAndPos=function(e,t,n,r,o){var a=e.position();if(void 0==a)throw new Error("Can't get size, empty element");n===!0?(a.height=e.outerHeight(),a.width=e.outerWidth()):(a.height=e.height(),a.width=e.width()),a.left=Math.round(a.left),a.top=Math.round(a.top),r&&(a.left+=r),o&&(a.top+=o),i.setElementSizeAndPosition(t,a.left,a.top,a.width,a.height)},this.placeImageInsideParent=function(e,t,n,r,o,a){var s=i.getImageInsideParentData(t,n,r,o,a),l="<img";null!==s.imageWidth&&(l+=" width = '"+s.imageWidth+"'",s.style+="width:"+s.imageWidth+";"),null!=s.imageHeight&&("100%"==s.imageHeight?(l+=" height = '"+s.imageHeight+"'",s.style+="height:"+s.imageHeight+";"):(l+=" height = '"+s.imageHeight+"'",s.style+="height:"+s.imageHeight+"px;")),null!==s.imageTop&&(s.style+="top:"+s.imageTop+"px;"),null!==s.imageLeft&&(s.style+="left:"+s.imageLeft+"px;"),l+=" style='"+s.style+"'",l+=" src='"+e+"'",l+=">",t.html(l);var u=t.children("img");return u},this.scaleImageCoverParent=function(e,t){var n=t.outerWidth(),r=t.outerHeight(),o=i.getImageOriginalSize(e),a=o.width,s=o.height,l=a/s,u=r,d=u*l,_=0,g=0;n>d?(d=n,u=d/l,g=0,_=Math.round((u-r)/2*-1)):(_=0,g=Math.round((d-n)/2*-1)),d=Math.round(d),u=Math.round(u),e.css({width:d+"px",height:u+"px",left:g+"px",top:_+"px"})},this.scaleImageFitParent=function(e,t,n,r,o){var a=e.parent(),s=i.getImageInsideParentData(a,t,n,r,o),l=!1,u={};null!==s.imageWidth&&(e.removeAttr("width"),u.width=s.imageWidth+"px"),null!=s.imageHeight&&(e.removeAttr("height"),u.height=s.imageHeight+"px"),null!==s.imageTop&&(l=!0,u.top=s.imageTop+"px"),null!==s.imageLeft&&(l=!0,u.left=s.imageLeft+"px"),1==l&&(u.position="absolute",u.margin="0px 0px",e.css(u))},this.scaleImageByHeight=function(e,t,n,r){var o=i.getImageOriginalSize(e,n,r),a=o.width/o.height,s=Math.round(t*a);t=Math.round(t),i.setElementSize(e,s,t)},this.scaleImageByWidth=function(e,t,n,r){var o=i.getImageOriginalSize(e,n,r),a=o.width/o.height,s=Math.round(t/a);t=Math.round(t),i.setElementSize(e,t,s)},this.scaleImageExactSizeInParent=function(e,t,n,r,o,a){var s=e.parent(),l=i.getElementSize(s);l.width<r&&(r=l.width),l.height<o&&(o=l.height);var u=i.getImageInsideParentData(null,t,n,a,null,r,o),d=r,_=o,g=u.imageLeft,c=u.imageLeft,h=u.imageTop,p=u.imageTop,f=Math.round((l.width-r)/2),m=Math.round((l.height-o)/2),v=u.imageWidth+g+c,b=r-v;0!=b&&(c+=b);var y=u.imageHeight+h+p,b=o-y;0!=b&&(p+=b),e.removeAttr("width"),e.removeAttr("height");var w={position:"absolute",margin:"0px 0px"};w.width=d+"px",w.height=_+"px",w.left=f+"px",w.top=m+"px",w["padding-left"]=g+"px",w["padding-top"]=h+"px",w["padding-right"]=c+"px",w["padding-bottom"]=p+"px",e.css(w)},this.showElement=function(e,t,i){e.show().fadeTo(0,1),t&&t.show().fadeTo(0,1),i&&i.show().fadeTo(0,1)},this.z_________END_SET_ELEMENT_PROPS_______=function(){},this.z_________GALLERY_RELATED_FUNCTIONS_______=function(){},this.disableButton=function(e,t){if(!t)var t="ug-button-disabled";0==i.isButtonDisabled(e,t)&&e.addClass(t)},this.convertCustomPrefixOptions=function(e,t,i){if(!t)return e;var n={};return jQuery.each(e,function(e,r){if(0===e.indexOf(t+"_"+i+"_")){var o=e.replace(t+"_"+i+"_",i+"_");n[o]=r}else n[e]=r}),n},this.enableButton=function(e,t){if(!t)var t="ug-button-disabled";1==i.isButtonDisabled(e,t)&&e.removeClass(t)},this.isButtonDisabled=function(e,t){if(!t)var t="ug-button-disabled";return e.hasClass(t)?!0:!1},this.z_________END_GALLERY_RELATED_FUNCTIONS_______=function(){},this.z_________MATH_FUNCTIONS_______=function(){},this.normalizeSetting=function(e,t,i,n,r,o){if(!o)var o=!1;var a=(r-i)/(n-i);return r=e+(t-e)*a,1==o&&(e>r&&(r=e),r>t&&(r=t)),r},this.getNormalizedValue=function(e,t,i,n,r){var o=(r-e)/(t-e);return r=e+(n-i)*o},this.getDistance=function(e,t,i,n){var r=Math.round(Math.sqrt(Math.abs((i-e)*(i-e)+(n-t)*(n-t))));return r},this.getMiddlePoint=function(e,t,i,n){var r={};return r.x=e+Math.round((i-e)/2),r.y=t+Math.round((n-t)/2),r},this.getNumItemsInSpace=function(e,t,i){var n=Math.floor((e+i)/(t+i));return n},this.getNumItemsInSpaceRound=function(e,t,i){var n=Math.round((e+i)/(t+i));return n},this.getSpaceByNumItems=function(e,t,i){var n=e*t+(e-1)*i;return n},this.getColX=function(e,t,i){var n=e*(t+i);return n},this.getColByIndex=function(e,t){var i=t%e;return i},this.getColRowByIndex=function(e,t){var i=Math.floor(e/t),n=Math.floor(e%t);return{col:n,row:i}},this.getIndexByRowCol=function(e,t,i){if(0>e)return-1;if(0>t)return-1;var n=e*i+t;return n},this.getPrevRowSameColIndex=function(e,t){var n=i.getColRowByIndex(e,t),r=i.getIndexByRowCol(n.row-1,n.col,t);return r},this.getNextRowSameColIndex=function(e,t){var n=i.getColRowByIndex(e,t),r=i.getIndexByRowCol(n.row+1,n.col,t);return r},this.z_________DATA_FUNCTIONS_______=function(){},this.setGlobalData=function(e,t){jQuery.data(document.body,e,t)},this.getGlobalData=function(e){var t=jQuery.data(document.body,e);return t},this.z_________EVENT_DATA_FUNCTIONS_______=function(){},this.handleScrollTop=function(e){if(0==i.isTouchDevice())return null;var t=i.getStoredEventData(e),r=15,o=15;if(null===t.scrollDir&&(Math.abs(t.diffMouseX)>r?t.scrollDir="hor":Math.abs(t.diffMouseY)>o&&Math.abs(t.diffMouseY)>Math.abs(t.diffMouseX)&&(t.scrollDir="vert",t.scrollStartY=t.lastMouseClientY,t.scrollOrigin=jQuery(document).scrollTop(),n.dataCache[e].scrollStartY=t.lastMouseClientY,n.dataCache[e].scrollOrigin=t.scrollOrigin),n.dataCache[e].scrollDir=t.scrollDir),"vert"!==t.scrollDir)return t.scrollDir;var a=(jQuery(document).scrollTop(),t.scrollOrigin-(t.lastMouseClientY-t.scrollStartY));return a>=0&&jQuery(document).scrollTop(a),t.scrollDir},this.wasVerticalScroll=function(e){var t=i.getStoredEventData(e);return"vert"===t.scrollDir?!0:!1},this.storeEventData=function(e,t,r){var o=i.getMousePosition(e),a=jQuery.now(),s={startTime:a,lastTime:a,startMouseX:o.pageX,startMouseY:o.pageY,lastMouseX:o.pageX,lastMouseY:o.pageY,startMouseClientY:o.clientY,lastMouseClientY:o.clientY,scrollTop:jQuery(document).scrollTop(),scrollDir:null};r&&(s=jQuery.extend(s,r)),n.dataCache[t]=s},this.updateStoredEventData=function(e,t,r){if(!n.dataCache[t])throw new Error("updateEventData error: must have stored cache object");var o=n.dataCache[t],a=i.getMousePosition(e);o.lastTime=jQuery.now(),void 0!==a.pageX&&(o.lastMouseX=a.pageX,o.lastMouseY=a.pageY,o.lastMouseClientY=a.clientY),r&&(o=jQuery.extend(o,r)),n.dataCache[t]=o},this.getStoredEventData=function(e,t){if(!n.dataCache[e])throw new Error("updateEventData error: must have stored cache object");var i=n.dataCache[e];return i.diffMouseX=i.lastMouseX-i.startMouseX,i.diffMouseY=i.lastMouseY-i.startMouseY,i.diffMouseClientY=i.lastMouseClientY-i.startMouseClientY,i.diffTime=i.lastTime-i.startTime,t===!0?(i.startMousePos=i.lastMouseY,i.lastMousePos=i.lastMouseY,i.diffMousePos=i.diffMouseY):(i.startMousePos=i.lastMouseX,i.lastMousePos=i.lastMouseX,i.diffMousePos=i.diffMouseX),i},this.isApproveStoredEventClick=function(e,t){if(!n.dataCache[e])return!0;var r=i.getStoredEventData(e,t),o=Math.abs(r.diffMousePos);return r.diffTime>400?!1:o>30?!1:!0},this.clearStoredEventData=function(e){n.dataCache[e]=null},this.z_________CHECK_SUPPORT_FUNCTIONS_______=function(){},this.isCanvasExists=function(){var e=jQuery('<canvas width="500" height="500" > </canvas>')[0];return"function"==typeof e.getContext?!0:!1},this.isScrollbarExists=function(){var e=window.innerWidth>document.documentElement.clientWidth;return e},this.isTouchDevice=function(){if(-1!==n.isTouchDevice)return n.isTouchDevice;try{document.createEvent("TouchEvent"),n.isTouchDevice=!0}catch(e){n.isTouchDevice=!1}return n.isTouchDevice},this.isDesktopDevice=function(){var e=void 0===typeof window.screenX||i.isTouchDevice()?!1:!0;return e},this.isRgbaSupported=function(){if(-1!==n.isRgbaSupported)return n.isRgbaSupported;var e=document.getElementsByTagName("script")[0],t=e.style.color;try{e.style.color="rgba(1,5,13,0.44)"}catch(i){}var r=e.style.color!=t;return e.style.color=t,n.isRgbaSupported=r,r},this.z_________GENERAL_FUNCTIONS_______=function(){},this.checkMinJqueryVersion=function(e){for(var t=jQuery.fn.jquery.split("."),i=e.split("."),n=0,r=t.length;r>n;n++)if(i[n]&&parseInt(t[n])<parseInt(i[n]))return!1;return!0},this.getCssSizeParam=function(e){return jQuery.isNumeric(e)?e+"px":e},this.convertHexToRGB=function(e,t){var i=e.replace("#","");return i===e?e:(r=parseInt(i.substring(0,2),16),g=parseInt(i.substring(2,4),16),b=parseInt(i.substring(4,6),16),result="rgba("+r+","+g+","+b+","+t+")")},this.timestampToString=function(e){var t=new Date(e),i=t.getDate()+"/"+t.getMonth();return i+=" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+":"+t.getMilliseconds()},this.getArrTouches=function(e){var t=[];return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(t=e.originalEvent.touches),t},this.getArrTouchPositions=function(e){for(var t=[],i=0;i<e.length;i++){var n={pageX:e[i].pageX,pageY:e[i].pageY};t.push(n)}return t},this.startTimeDebug=function(){n.starTime=jQuery.now()},this.showTimeDebug=function(){var e=jQuery.now(),t=e-n.starTime;debugLine({"Time Passed":t},!0)},this.initProgressIndicator=function(e,t,n){switch("bar"!=e&&0==i.isCanvasExists()&&(e="bar"),e){case"bar":var r=new UGProgressBar;r.putHidden(n,t);break;default:case"pie":var r=new UGProgressPie;r.putHidden(n,t);break;case"pie2":t.type_fill=!0;var r=new UGProgressPie;r.putHidden(n,t)}return r},this.setButtonMobileReady=function(e){e.on("touchstart",function(){jQuery(this).addClass("ug-nohover")}),e.on("mousedown touchend",function(e){return e.stopPropagation(),e.stopImmediatePropagation(),!1})},this.registerTheme=function(e){n.arrThemes.push(e)},this.getArrThemes=function(){return n.arrThemes},this.isThemeRegistered=function(e){return-1!==jQuery.inArray(e,n.arrThemes)?!0:!1},this.getFirstRegisteredTheme=function(){if(0==n.arrThemes.length)return"";var e=n.arrThemes[0];return e},this.isTimePassed=function(e,t){if(!t)var t=100;var i=jQuery.now();lastTime=0==n.timeCache.hasOwnProperty(e)?0:n.timeCache[e];var r=i-lastTime;return n.timeCache[e]=i,t>=r?!1:!0},this.whenContiniousEventOver=function(e,t,i){if(!i)var i=300;1==n.timeCache.hasOwnProperty(e)&&null!=n.timeCache[e]&&(clearTimeout(n.timeCache[e]),n.timeCache[e]=null),n.timeCache[e]=setTimeout(t,i)},this.validateClickTouchstartEvent=function(e){var t=!0,i=jQuery.now()-n.lastEventTime;return"click"==e&&"touchstart"==n.lastEventType&&1e3>i&&(t=!1),n.lastEventTime=jQuery.now(),n.lastEventType=e,t},this.addClassOnHover=function(e,t){if(!t)var t="ug-button-hover";e.hover(function(){jQuery(this).addClass(t)},function(){jQuery(this).removeClass(t)})},this.destroyButton=function(e){e.off("mouseenter"),e.off("mouseleave"),e.off("click"),e.off("touchstart"),e.off("touchend"),e.off("mousedown")},this.setButtonOnClick=function(e,t){i.setButtonMobileReady(e),e.on("click touchstart",function(e){return objThis=jQuery(this),e.stopPropagation(),e.stopImmediatePropagation(),0==i.validateClickTouchstartEvent(e.type)?!0:void t(objThis,e)
})},this.loadJs=function(e,t){t===!0&&(e=location.protocol+"//"+e);var i=document.createElement("script");i.src=e;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n)},this.loadCss=function(e,t){t===!0&&(e=location.protocol+"//"+e);var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(i)},this.addEvent=function(e,t,i){"undefined"!=typeof e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},this.checkImagesLoaded=function(e,t,i){function n(e,n){r++,"function"==typeof i&&setTimeout(function(){i(e,n)}),r==o&&"function"==typeof t&&setTimeout(function(){t()})}var r=0,o=e.length;return 0==o&&t?(t(),!1):void setTimeout(function(){for(var t=0;o>t;t++){var i=e[t];if(void 0!==i.naturalWidth&&0!==i.naturalWidth)n(e[t],!1);else{var r=jQuery("<img/>");r.data("index",t),r.on("load",function(){var t=jQuery(this).data("index");n(e[t],!1)}),r.on("error",function(){var t=jQuery(this).data("index");n(e[t],!0)}),r.attr("src",i.src)}}})},this.waitForWidth=function(e,t){var i=e.width();return 0!=i?(t(),!1):void(n.handle=setInterval(function(){i=e.width(),0!=i&&(clearInterval(n.handle),t())},300))},this.arrayShuffle=function(e){if("object"!=typeof e)return e;for(var t,i,n=e.length;n;t=parseInt(Math.random()*n),i=e[--n],e[n]=e[t],e[t]=i);return e},this.z_________END_GENERAL_FUNCTIONS_______=function(){}}function ugCheckForErrors(e,t){if("function"==typeof jQuery.fn.unitegallery)return!0;var i="Unite Gallery Error: You have some jquery.js library include that comes after the gallery files js include.";return i+="<br> This include eliminates the gallery libraries, and make it not work.","cms"==t?(i+="<br><br> To fix it you can:<br>&nbsp;&nbsp;&nbsp; 1. In the Gallery Settings -> Troubleshooting set option:  <strong><b>Put JS Includes To Body</b></strong> option to true.",i+="<br>&nbsp;&nbsp;&nbsp; 2. Find the double jquery.js include and remove it."):i+="<br><br> Please find and remove this jquery.js include and the gallery will work. <br> * There should be only one jquery.js include before all other js includes in the page.",i="<div style='font-size:16px;color:#BC0C06;max-width:900px;border:1px solid red;padding:10px;'>"+i+"</div>",jQuery(e).show().html(i),!1}function UniteGalleryMain(){function __________INIT_GALLERY_______(){}function getThemeFunction(e){var t=e;return-1==t.indexOf("UGTheme_")&&(t="UGTheme_"+t),t}function initTheme(objCustomOptions){if(objCustomOptions.hasOwnProperty("gallery_theme"))g_options.gallery_theme=objCustomOptions.gallery_theme;else{var defaultTheme=g_options.gallery_theme;0==g_ugFunctions.isThemeRegistered(defaultTheme)&&(g_options.gallery_theme=g_ugFunctions.getFirstRegisteredTheme())}var themeFunction=getThemeFunction(g_options.gallery_theme);try{g_options.gallery_theme=eval(themeFunction)}catch(e){}g_options.gallery_theme=eval(themeFunction),g_objTheme=new g_options.gallery_theme,g_objTheme.init(t,objCustomOptions)}function resetOptions(){g_options=jQuery.extend({},g_temp.originalOptions),g_selectedItemIndex=-1,g_selectedItem=null,g_objSlider=void 0,g_objThumbs=void 0,g_objSlider=void 0}function checkForStartupErrors(){var e=g_functions.checkMinJqueryVersion("1.8.0");0==e&&throwErrorShowMessage("The gallery can run from jquery 1.8 You have jQuery "+jQuery.fn.jquery+" Please update your jQuery library."),"object"==typeof g_objWrapper.outerWidth()&&throwErrorShowMessage("You have some buggy script. most chances jquery-ui.js that destroy jquery outerWidth, outerHeight functions. The gallery can't run. Please update jquery-ui.js to latest version.")}function runGallery(e,i,n,r){var o="object"==typeof i;if(o&&(g_temp.objCustomOptions=i),1==g_temp.isRunFirstTime){if(g_galleryID=e,g_objWrapper=jQuery(g_galleryID),0==g_objWrapper.length)return trace("div with id: "+g_galleryID+" not found"),!1;g_temp.originalOptions=jQuery.extend({},g_options),o&&(g_options=jQuery.extend(g_options,i)),1==g_options.gallery_enable_cache&&g_options.gallery_initial_catid&&cacheItems(g_options.gallery_initial_catid);var a=g_objWrapper.children();fillItemsArray(a),loadAPIs(),g_objWrapper.find("img").fadeTo(0,0).hide(),g_objWrapper.show(),clearInitData()}else if(t.destroy(),resetOptions(),g_options=jQuery.extend(g_options,g_temp.objCustomOptions),n){if(r&&1==g_options.gallery_enable_cache&&cacheItems(r,n),"noitems"==n)return showErrorMessage("No items in this category",""),!1;g_objWrapper.html(n);var a=g_objWrapper.children();fillItemsArray(a),loadAPIs(),g_objWrapper.children().fadeTo(0,0).hide(),g_objWrapper.show(),clearInitData()}checkForStartupErrors(),1==g_temp.isRunFirstTime&&1==g_options.gallery_enable_tabs&&(g_objTabs=new UGTabs,g_objTabs.init(t,g_options)),o&&modifyInitParams(g_temp.objCustomOptions),validateParams(),1==g_options.gallery_shuffle&&t.shuffleItems(),initTheme(g_temp.objCustomOptions),setGalleryHtml(),setHtmlObjectsProperties();{var s=g_objWrapper.width();g_objWrapper.parent()}0==s?g_functions.waitForWidth(g_objWrapper,runGalleryActually):runGalleryActually()}function runGalleryActually(){t.setSizeClass(),0==g_temp.isFreestyleMode&&1==g_options.gallery_preserve_ratio&&setHeightByOriginalRatio(),g_objTheme.run(),g_objTabs&&g_objTabs.run(),preloadBigImages(),initEvents(),g_numItems>0&&t.selectItem(0),1==g_options.gallery_autoplay&&t.startPlayMode(),g_temp.isRunFirstTime=!1}function showErrorMessage(e,t){if("undefined"==typeof t)var t="<b>Unite Gallery Error: </b>";e=t+e;var i="<div class='ug-error-message-wrapper'><div class='ug-error-message'>"+e+"</div></div>";g_objWrapper.children().remove(),g_objWrapper.html(i),g_objWrapper.show()}function throwErrorShowMessage(e){throw showErrorMessage(e),new Error(e)}function modifyInitParams(){g_options.gallery_images_preload_type||(g_options.gallery_images_preload_type="minimal"),(void 0==g_options.gallery_min_height||g_options.gallery_height<g_options.gallery_min_height)&&(g_options.gallery_min_height=0),(void 0==g_options.gallery_min_width||g_options.gallery_width<g_options.gallery_min_width)&&(g_options.gallery_min_width=0)}function validateParams(){if(!g_options.gallery_theme)throw new Error("The gallery can't run without theme");if(g_options.gallery_height<g_options.gallery_min_height)throw new Error("The <b>gallery_height</b> option must be bigger then <b>gallery_min_height option</b>");if(g_options.gallery_width<g_options.gallery_min_width)throw new Error("The <b>gallery_width</b> option must be bigger then <b>gallery_min_width option</b>")}function setGalleryHtml(){g_objWrapper.addClass("ug-gallery-wrapper"),g_objWrapper.append("<div class='ug-overlay-disabled' style='display:none'></div>"),t.setSizeClass()}function clearInitData(){g_objWrapper.children().remove()}function storeLastSize(){var e=t.getSize();g_temp.lastWidth=e.width,g_temp.lastHeight=e.height}function setHeightByOriginalRatio(){var e=t.getSize(),i=e.width/e.height;if(i!=e.orig_ratio){var n=e.width/e.orig_ratio;n=Math.round(n),n<g_options.gallery_min_height&&(n=g_options.gallery_min_height),g_objWrapper.height(n)}}function setHtmlObjectsProperties(){var e=g_functions.getCssSizeParam(g_options.gallery_width),t={"max-width":e,"min-width":g_functions.getCssSizeParam(g_options.gallery_min_width)};0==g_temp.isFreestyleMode?t.height=g_options.gallery_height+"px":t.overflow="visible",g_options.gallery_background_color&&(t["background-color"]=g_options.gallery_background_color),g_objWrapper.css(t)}function fillItemsArray(e){g_arrItems=[];for(var t=0,i=0;i<e.length;i++){var n=jQuery(e[i]),r=n.prop("tagName").toLowerCase(),o="";if("a"==r){o=n.attr("href"),n=n.children();var r=n.prop("tagName").toLowerCase()}var a=n.data("type");void 0==a&&(a="image");var s={};if(s.type=a,"img"==r)s.urlThumb=n.attr("src"),s.title=n.attr("alt"),s.objThumbImage=n;else{if("image"==a)throw new Error("The item should not be image type");s.urlThumb=n.data("thumb"),s.title=n.data("title"),s.objThumbImage=null}s.link=o,s.description=n.attr("title"),s.description||(s.description=n.data("description")),s.description||(s.description=""),s.isLoaded=!1,s.isThumbImageLoaded=!1,s.objPreloadImage=null,s.urlImage=n.data("image"),s.isBigImageLoadStarted=!1,s.isBigImageLoaded=!1,s.isBigImageLoadError=!1,s.imageWidth=0,s.imageHeight=0,s.thumbWidth=0,s.thumbHeight=0,s.thumbRatioByWidth=0,s.thumbRatioByHeight=0;var l=void 0==s.urlImage||""==s.urlImage,u=void 0==s.urlThumb||""==s.urlThumb;switch(s.type){case"youtube":if(s.videoid=n.data("videoid"),l||u){var d=g_ugYoutubeAPI.getVideoImages(s.videoid);l&&(s.urlImage=d.preview),u&&(s.urlThumb=d.thumb,"img"==r&&n.attr("src",s.urlThumb))}g_temp.isYoutubePresent=!0;break;case"vimeo":s.videoid=n.data("videoid"),g_temp.isVimeoPresent=!0;break;case"html5video":s.videoogv=n.data("videoogv"),s.videowebm=n.data("videowebm"),s.videomp4=n.data("videomp4"),g_temp.isHtml5VideoPresent=!0;break;case"soundcloud":s.trackid=n.data("trackid"),g_temp.isSoundCloudPresent=!0;break;case"wistia":s.videoid=n.data("videoid"),g_temp.isWistiaPresent=!0}s.objThumbImage&&(s.objThumbImage.removeAttr("data-description",""),s.objThumbImage.removeAttr("data-image",""),s.objThumbImage.removeAttr("title","")),s.index=t,g_arrItems.push(s),t++}g_numItems=g_arrItems.length}function loadAPIs(){g_temp.isYoutubePresent&&g_ugYoutubeAPI.loadAPI(),g_temp.isVimeoPresent&&g_ugVimeoAPI.loadAPI(),g_temp.isHtml5VideoPresent&&g_ugHtml5MediaAPI.loadAPI(),g_temp.isSoundCloudPresent&&g_ugSoundCloudAPI.loadAPI(),g_temp.isWistiaPresent&&g_ugWistiaAPI.loadAPI()}function preloadBigImages(){if("visible"!=g_options.gallery_images_preload_type||g_objThumbs||(g_options.gallery_images_preload_type="minimal"),1==g_temp.isAllItemsPreloaded)return!0;switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":jQuery(g_arrItems).each(function(){preloadItemImage(this)});break;case"visible":jQuery(g_arrItems).each(function(){var e=this,t=g_objThumbs.isItemThumbVisible(e);1==t&&preloadItemImage(e)})}}function checkPreloadItemImage(e){if(1==e.isBigImageLoadStarted||1==e.isBigImageLoaded||1==e.isBigImageLoadError)return!1;switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":preloadItemImage(e);break;case"visible":var t=g_objThumbs.isItemThumbVisible(e);1==t&&preloadItemImage(e)}}function preloadItemImage(e){if(1==e.isBigImageLoadStarted||1==e.isBigImageLoaded||1==e.isBigImageLoadError)return!0;var i=e.urlImage;return""==i||void 0==i?(e.isBigImageLoadError=!0,!1):(e.isBigImageLoadStarted=!0,e.objPreloadImage=jQuery("<img/>").attr("src",i),e.objPreloadImage.data("itemIndex",e.index),e.objPreloadImage.on("load",t.onItemBigImageLoaded),e.objPreloadImage.on("error",function(){var e=jQuery(this),i=e.data("itemIndex"),n=g_arrItems[i];n.isBigImageLoadError=!0,n.isBigImageLoaded=!1;var r=jQuery(this).attr("src");console.log("Can't load image: "+r),g_objGallery.trigger(t.events.ITEM_IMAGE_UPDATED,[i,n.urlImage]),n.objThumbImage.attr("src",n.urlThumb)}),void checkAllItemsStartedPreloading())}function preloadNearBigImages(e){if(1==g_temp.isAllItemsPreloaded)return!1;if(!e)var e=g_selectedItem;if(!e)return!0;var t=e.index,i=t-1,n=t+1;i>0&&preloadItemImage(g_arrItems[i]),g_numItems>n&&preloadItemImage(g_arrItems[n])}function checkAllItemsStartedPreloading(){if(1==g_temp.isAllItemsPreloaded)return!1;for(var e in g_arrItems)if(0==g_arrItems[e].isBigImageLoadStarted)return!1;g_temp.isAllItemsPreloaded=!0}function __________END_INIT_GALLERY_______(){}function __________EVENTS_____________(){}function onSliderMouseEnter(){1==g_options.gallery_pause_on_mouseover&&0==t.isFullScreen()&&1==g_temp.isPlayMode&&g_objSlider&&0==g_objSlider.isSlideActionActive()&&t.pausePlaying()}function onSliderMouseLeave(){if(1==g_options.gallery_pause_on_mouseover&&1==g_temp.isPlayMode&&g_objSlider&&0==g_objSlider.isSlideActionActive()){var e=g_objSlider.isCurrentSlideLoadingImage();0==e&&t.continuePlaying()}}function onKeyPress(e){var i=e.charCode?e.charCode:e.keyCode?e.keyCode:e.which?e.which:0;switch(i){case 39:t.nextItem(),e.preventDefault();break;case 37:t.prevItem(),e.preventDefault()}g_objGallery.trigger(t.events.GALLERY_KEYPRESS,i)}function onGalleryResized(){var e=t.getSize();if(0==e.width)return!0;t.setSizeClass();var e=t.getSize();(e.width!=g_temp.lastWidth||e.height!=g_temp.lastHeight)&&(1==g_options.gallery_preserve_ratio&&0==g_temp.isFreestyleMode&&setHeightByOriginalRatio(),storeLastSize(),g_objGallery.trigger(t.events.SIZE_CHANGE))}function onThumbsChange(){"visible"==g_options.gallery_images_preload_type&&0==g_temp.isAllItemsPreloaded&&preloadBigImages()}function onFullScreenChange(){var e=g_functions.isFullScreen(),i=e?t.events.ENTER_FULLSCREEN:t.events.EXIT_FULLSCREEN,n=g_functions.getGlobalData("fullscreenID");return g_galleryID!==n?!0:(e?g_objWrapper.addClass("ug-fullscreen"):g_objWrapper.removeClass("ug-fullscreen"),g_objGallery.trigger(i),void onGalleryResized())}function onItemImageUpdated(e,i){var n=t.getItem(i);checkPreloadItemImage(n)}function onCurrentSlideImageLoadEnd(){1==t.isPlayMode()&&t.continuePlaying()}function initEvents(){if(g_objWrapper.on("dragstart",function(e){e.preventDefault()}),g_objGallery.on(t.events.ITEM_IMAGE_UPDATED,onItemImageUpdated),g_objThumbs)switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).on(g_objThumbs.events.STRIP_MOVE,onThumbsChange);break;case"grid":jQuery(g_objThumbs).on(g_objThumbs.events.PANE_CHANGE,onThumbsChange)}if("advance"==g_options.gallery_mousewheel_role&&0==g_temp.isFreestyleMode&&g_objWrapper.on("mousewheel",t.onGalleryMouseWheel),storeLastSize(),jQuery(window).resize(function(){g_objWrapper.css("width","auto"),g_functions.whenContiniousEventOver("gallery_resize",onGalleryResized,g_temp.resizeDelay)}),g_functions.addFullScreenChangeEvent(onFullScreenChange),g_objSlider){if(jQuery(g_objSlider).on(g_objSlider.events.ITEM_CHANGED,function(){var e=g_objSlider.getCurrentItemIndex();-1!=e&&t.selectItem(e)}),1==g_options.gallery_pause_on_mouseover){var e=g_objSlider.getElement();e.hover(onSliderMouseEnter,onSliderMouseLeave),g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){onSliderMouseLeave()})}retriggerEvent(g_objSlider,g_objSlider.events.ACTION_START,t.events.SLIDER_ACTION_START),retriggerEvent(g_objSlider,g_objSlider.events.ACTION_END,t.events.SLIDER_ACTION_END),jQuery(g_objSlider).on(g_objSlider.events.CURRENTSLIDE_LOAD_END,onCurrentSlideImageLoadEnd)}1==g_options.gallery_control_keyboard&&jQuery(document).keydown(onKeyPress)}function __________GENERAL_______(){}function cacheItems(e,t){if(t){var i=t;"noitems"!=i&&(i=jQuery(t).clone())}else var i=g_objWrapper.children().clone();g_objCache[e]=i}function removeAllSizeClasses(e){e||(e=g_objWrapper),e.removeClass("ug-under-480"),e.removeClass("ug-under-780"),e.removeClass("ug-under-960")}function retriggerEvent(e,t,i){jQuery(e).on(t,function(){g_objGallery.trigger(i,[this])})}function advanceNextStep(){var e=jQuery.now(),i=e-g_temp.playTimeLastStep;if(g_temp.playTimePassed+=i,g_temp.playTimeLastStep=e,g_temp.objProgress){var n=g_temp.playTimePassed/g_options.gallery_play_interval;g_temp.objProgress.setProgress(n)}g_temp.playTimePassed>=g_options.gallery_play_interval&&(t.nextItem(),g_temp.playTimePassed=0)}function unselectSeletedItem(){return null==g_selectedItem?!0:(g_objThumbs&&g_objThumbs.setThumbUnselected(g_selectedItem.objThumbWrapper),g_selectedItem=null,void(g_selectedItemIndex=-1))}function toFakeFullScreen(){jQuery("body").addClass("ug-body-fullscreen"),g_objWrapper.addClass("ug-fake-fullscreen"),g_temp.isFakeFullscreen=!0,g_objGallery.trigger(t.events.ENTER_FULLSCREEN),g_objGallery.trigger(t.events.SIZE_CHANGE)}function exitFakeFullscreen(){jQuery("body").removeClass("ug-body-fullscreen"),g_objWrapper.removeClass("ug-fake-fullscreen"),g_temp.isFakeFullscreen=!1,g_objGallery.trigger(t.events.EXIT_FULLSCREEN),g_objGallery.trigger(t.events.SIZE_CHANGE)}var t=this,g_galleryID,g_objGallery=jQuery(t),g_objWrapper,g_objThumbs,g_objSlider,g_functions=new UGFunctions,g_objTabs,g_arrItems=[],g_numItems,g_selectedItem=null,g_selectedItemIndex=-1,g_objTheme,g_objCache={};this.events={ITEM_CHANGE:"item_change",SIZE_CHANGE:"size_change",ENTER_FULLSCREEN:"enter_fullscreen",EXIT_FULLSCREEN:"exit_fullscreen",START_PLAY:"start_play",STOP_PLAY:"stop_play",PAUSE_PLAYING:"pause_playing",CONTINUE_PLAYING:"continue_playing",SLIDER_ACTION_START:"slider_action_start",SLIDER_ACTION_END:"slider_action_end",ITEM_IMAGE_UPDATED:"item_image_updated",GALLERY_KEYPRESS:"gallery_keypress",GALLERY_BEFORE_REQUEST_ITEMS:"gallery_before_request_items"};var g_options={gallery_width:900,gallery_height:500,gallery_min_width:150,gallery_min_height:100,gallery_theme:"default",gallery_skin:"default",gallery_images_preload_type:"minimal",gallery_autoplay:!1,gallery_play_interval:3e3,gallery_pause_on_mouseover:!0,gallery_mousewheel_role:"zoom",gallery_control_keyboard:!0,gallery_carousel:!0,gallery_preserve_ratio:!0,gallery_background_color:"",gallery_debug_errors:!1,gallery_shuffle:!1,gallery_urlajax:null,gallery_enable_tabs:!1,gallery_enable_cache:!0,gallery_initial_catid:""},g_temp={objCustomOptions:{},isAllItemsPreloaded:!1,isFreestyleMode:!1,lastWidth:0,lastHeigh:0,handleResize:null,isInited:!1,isPlayMode:!1,isPlayModePaused:!1,playTimePassed:0,playTimeLastStep:0,playHandle:"",playStepInterval:33,objProgress:null,isFakeFullscreen:!1,thumbsType:null,isYoutubePresent:!1,isVimeoPresent:!1,isHtml5VideoPresent:!1,isSoundCloudPresent:!1,isWistiaPresent:!1,resizeDelay:100,isRunFirstTime:!0,originalOptions:{}};this.onItemBigImageLoaded=function(e,t){if(!t)var t=jQuery(this);var i=t.data("itemIndex"),n=g_arrItems[i];n.isBigImageLoaded=!0;var r=g_functions.getImageOriginalSize(t);n.imageWidth=r.width,n.imageHeight=r.height},this.checkFillImageSize=function(e,t){if(!t){var i=e.data("itemIndex");if(void 0===i)throw new Error("Wrong image given to gallery.checkFillImageSize");var t=g_arrItems[i]}var n=g_functions.getImageOriginalSize(e);t.imageWidth=n.width,t.imageHeight=n.height},this.setFreestyleMode=function(){g_temp.isFreestyleMode=!0},this.initThumbsPanel=function(e,i){if(!i)var i={};if(!e)var e="strip";switch(g_temp.thumbsType=e,e){case"strip":g_objThumbs=new UGThumbsStrip;break;case"grid":g_objThumbs=new UGThumbsGrid;break;default:throw new Error("Wrong thumbs type: "+e)}i=jQuery.extend(i,g_temp.objCustomOptions),g_objThumbs.init(t,i)},this.initSlider=function(e,i){if(!e)var e={};e=jQuery.extend(e,g_temp.objCustomOptions),g_objSlider=new UGSlider,g_objSlider.init(t,e,i)},this.onGalleryMouseWheel=function(e,i){e.preventDefault(),i>0?t.prevItem():t.nextItem()},this.destroy=function(){if(g_objWrapper.off("dragstart"),g_objGallery.off(t.events.ITEM_IMAGE_UPDATED),g_objThumbs)switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).off(g_objThumbs.events.STRIP_MOVE);break;case"grid":jQuery(g_objThumbs).off(g_objThumbs.events.PANE_CHANGE)}if(g_objWrapper.off("mousewheel"),jQuery(window).off("resize"),g_functions.destroyFullScreenChangeEvent(),g_objSlider){jQuery(g_objSlider).off(g_objSlider.events.ITEM_CHANGED);var e=g_objSlider.getElement();e.off("mouseenter"),e.off("mouseleave"),g_objGallery.off(t.events.ENTER_FULLSCREEN),jQuery(g_objSlider).off(g_objSlider.events.ACTION_START),jQuery(g_objSlider).off(g_objSlider.events.ACTION_END),jQuery(g_objSlider).off(g_objSlider.events.CURRENTSLIDE_LOAD_END)}1==g_options.gallery_control_keyboard&&jQuery(document).off("keydown"),g_objTheme&&"function"==typeof g_objTheme.destroy&&g_objTheme.destroy(),g_objWrapper.html("")},this.getArrItems=function(){return g_arrItems},this.getObjects=function(){var e={g_galleryID:g_galleryID,g_objWrapper:g_objWrapper,g_objThumbs:g_objThumbs,g_objSlider:g_objSlider,g_options:g_options,g_arrItems:g_arrItems,g_numItems:g_numItems};return e},this.getObjSlider=function(){return g_objSlider},this.getItem=function(e){if(0>e)throw new Error("item with index: "+e+" not found");if(e>=g_numItems)throw new Error("item with index: "+e+" not found");return g_arrItems[e]},this.getWidth=function(){var e=t.getSize();return e.width},this.getHeight=function(){var e=t.getSize();return e.height},this.getSize=function(){var e=g_functions.getElementSize(g_objWrapper);return e.orig_width=g_options.gallery_width,e.orig_height=g_options.gallery_height,e.orig_ratio=e.orig_width/e.orig_height,e},this.getGalleryID=function(){var e=g_galleryID.replace("#","");return e},this.getNextItem=function(e,t){"object"==typeof e&&(e=e.index);var i=e+1;if(t!==!0&&1==g_numItems)return null;if(i>=g_numItems){if(1!=g_options.gallery_carousel&&t!==!0)return null;i=0}var n=g_arrItems[i];return n},this.getPrevItem=function(e){"object"==typeof e&&(e=e.index);var t=e-1;if(0>t){if(1!=g_options.gallery_carousel&&forceCarousel!==!0)return null;t=g_numItems-1}var i=g_arrItems[t];return i},this.getSelectedItem=function(){return g_selectedItem},this.getNumItems=function(){return g_numItems},this.isLastItem=function(){return g_selectedItemIndex==g_numItems-1?!0:!1},this.isFirstItem=function(){return 0==g_selectedItemIndex?!0:!1},this.getOptions=function(){return g_options},this.getElement=function(){return g_objWrapper},this.___________SET_CONTROLS___________=function(){},this.setNextButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.nextItem)},this.setPrevButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.prevItem)},this.setFullScreenToggleButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.toggleFullscreen),g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){e.addClass("ug-fullscreenmode")}),g_objGallery.on(t.events.EXIT_FULLSCREEN,function(){e.removeClass("ug-fullscreenmode")})},this.destroyFullscreenButton=function(e){g_functions.destroyButton(e),g_objGallery.off(t.events.ENTER_FULLSCREEN),g_objGallery.off(t.events.EXIT_FULLSCREEN)},this.setPlayButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.togglePlayMode),g_objGallery.on(t.events.START_PLAY,function(){e.addClass("ug-stop-mode")}),g_objGallery.on(t.events.STOP_PLAY,function(){e.removeClass("ug-stop-mode")})},this.destroyPlayButton=function(e){g_functions.destroyButton(e),g_objGallery.off(t.events.START_PLAY),g_objGallery.off(t.events.STOP_PLAY)},this.setProgressIndicator=function(e){g_temp.objProgress=e},this.setTextContainers=function(e,i){g_objGallery.on(t.events.ITEM_CHANGE,function(){var n=t.getSelectedItem();e.html(n.title),i.html(n.description)})},this.showDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").show()},this.hideDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").hide()},this.___________END_SET_CONTROLS___________=function(){},this.___________PLAY_MODE___________=function(){},this.startPlayMode=function(){if(g_temp.isPlayMode=!0,g_temp.isPlayModePaused=!1,g_temp.playTimePassed=0,g_temp.playTimeLastStep=jQuery.now(),g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval),g_temp.objProgress){var e=g_temp.objProgress.getElement();g_temp.objProgress.setProgress(0),e.show()}g_objGallery.trigger(t.events.START_PLAY),g_objSlider&&1==g_objSlider.isCurrentSlideLoadingImage()&&t.pausePlaying()},this.resetPlaying=function(){return 0==g_temp.isPlayMode?!0:(g_temp.playTimePassed=0,void(g_temp.playTimeLastStep=jQuery.now()))},this.pausePlaying=function(){return 1==g_temp.isPlayModePaused?!0:(g_temp.isPlayModePaused=!0,clearInterval(g_temp.playHandle),void g_objGallery.trigger(t.events.PAUSE_PLAYING))},this.continuePlaying=function(){return 0==g_temp.isPlayModePaused?!0:(g_temp.isPlayModePaused=!1,g_temp.playTimeLastStep=jQuery.now(),void(g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval)))},this.stopPlayMode=function(){if(g_temp.isPlayMode=!1,clearInterval(g_temp.playHandle),g_temp.playTimePassed=0,g_temp.objProgress){var e=g_temp.objProgress.getElement();e.hide()}g_objGallery.trigger(t.events.STOP_PLAY)},this.isPlayMode=function(){return g_temp.isPlayMode},this.togglePlayMode=function(){0==t.isPlayMode()?t.startPlayMode():t.stopPlayMode()},this.___________GENERAL_EXTERNAL___________=function(){},this.shuffleItems=function(){g_arrItems=g_functions.arrayShuffle(g_arrItems);for(var e in g_arrItems)g_arrItems[e].index=parseInt(e)},this.setOptions=function(e){g_options=jQuery.extend(g_options,e)},this.selectItem=function(e){"number"==typeof e&&(e=t.getItem(e));var i=e.index;if(i==g_selectedItemIndex)return!0;if(unselectSeletedItem(),g_selectedItem=e,g_selectedItemIndex=i,g_objGallery.trigger(t.events.ITEM_CHANGE,e),1==g_temp.isPlayMode){t.resetPlaying();var n=g_objSlider.isCurrentSlideLoadingImage();1==n&&t.pausePlaying()}},this.nextItem=function(){var e=g_selectedItemIndex+1;return 0==g_numItems?!0:0==g_options.gallery_carousel&&e>=g_numItems?!0:(e>=g_numItems&&(e=0),void t.selectItem(e))},this.prevItem=function(){var e=g_selectedItemIndex-1;return-1==g_selectedItemIndex&&(e=0),0==g_numItems?!0:0==g_options.gallery_carousel&&0>e?!0:(0>e&&(e=g_numItems-1),void t.selectItem(e))},this.isFullScreen=function(){return 1==g_temp.isFakeFullscreen?!0:1==g_functions.isFullScreen()?!0:!1},this.isFakeFullscreen=function(){return g_temp.isFakeFullscreen},this.toFullScreen=function(){g_functions.setGlobalData("fullscreenID",g_galleryID);var e=g_objWrapper.get(0),t=g_functions.toFullscreen(e);0==t&&toFakeFullScreen()},this.exitFullScreen=function(){1==g_temp.isFakeFullscreen?exitFakeFullscreen():g_functions.exitFullscreen()},this.toggleFullscreen=function(){0==t.isFullScreen()?t.toFullScreen():t.exitFullScreen()},this.resize=function(e,t,i){g_objWrapper.css("width","auto"),g_objWrapper.css("max-width",e+"px"),t&&g_objWrapper.height(t),i||i===!0||onGalleryResized()},this.setSizeClass=function(e,i){if(!e)var e=g_objWrapper;if(!i)var n=t.getSize(),i=n.width;var r="";return 480>=i?r="ug-under-480":780>=i?r="ug-under-780":960>i&&(r="ug-under-960"),1==e.hasClass(r)?!0:(removeAllSizeClasses(e),void(""!=r&&e.addClass(r)))},this.isMobileMode=function(){return g_objWrapper.hasClass("ug-under-480")?!0:!1},this.changeItems=function(e,t){if(!e)var e="noitems";runGallery(g_galleryID,"nochange",e,t)},this.__________AJAX_REQUEST_______=function(){},this.ajaxRequest=function(e,t,i,n){var r="html";if(1==i&&(r="json"),!n||"function"!=typeof n)throw new Error("ajaxRequest error: success function should be passed");var o=g_options.gallery_urlajax;if(""==o)throw new Error("ajaxRequest error: Ajax url don't passed");if("undefined"==typeof t)var t={};var a={action:"unitegallery_ajax_action",client_action:e,galleryID:g_galleryID,data:t};jQuery.ajax({type:"post",url:g_options.gallery_urlajax,dataType:"json",data:a,success:function(e){return e?-1==e||0===e?(showErrorMessage("ajax error!!!"),!1):"undefined"==typeof e.success?(showErrorMessage("The 'success' param is a must!"),!1):0==e.success?(showErrorMessage(e.message),!1):void n(e):(showErrorMessage("Empty ajax response!","Ajax Error"),!1)},error:function(e,t){console.log("Ajax Error!!! "+t)}})},this.requestNewItems=function(e,i,n){var r=g_options.gallery_enable_cache;if(n||(n=e),1==i&&(r=!1),1==r&&g_objCache.hasOwnProperty(n)){var o=g_objCache[n];t.changeItems(o,n)}else g_objGallery.trigger(t.events.GALLERY_BEFORE_REQUEST_ITEMS),t.ajaxRequest("front_get_cat_items",{catid:e},!0,function(e){var i=e.html;t.changeItems(i,n)})},this.run=function(e,t){g_options.gallery_debug_errors;if(t&&t.hasOwnProperty("gallery_debug_errors")&&(g_options.gallery_debug_errors=t.gallery_debug_errors),1==g_options.gallery_debug_errors)try{runGallery(e,t)}catch(i){if("object"==typeof i){{var n=i,r=i.lineNumber,o=i.fileName;i.stack}n+=" <br><br> in file: "+o,n+=" <b> line "+r+"</b>",trace(i)}else var n=i;n=n.replace("Error:",""),showErrorMessage(n)}else runGallery(e,t)}}function UGGridPanel(){function e(e,i){x=e,t(),i&&i.vertical_scroll&&(M.gridpanel_vertical_scroll=i.vertical_scroll),M=jQuery.extend(M,i),1==N.isHorType?(M=jQuery.extend(M,z),M=jQuery.extend(M,i)):1==M.gridpanel_vertical_scroll&&(M=jQuery.extend(M,O),M=jQuery.extend(M,i),M.grid_panes_direction="bottom");var n=x.getOptions(),r=n.gallery_skin;""==M.gridpanel_arrows_skin&&(M.gridpanel_arrows_skin=r);var o=e.getObjects();w=o.g_objWrapper,A.init(x,N,S,M,P)}function t(){if(null==N.orientation)throw new Error("Wrong orientation, please set panel orientation before run")}function i(){t(),o(),C.run(),l(),u(),y(),d()}function n(){w.append("<div class='ug-grid-panel'></div>"),I=w.children(".ug-grid-panel"),N.isHorType?(I.append("<div class='grid-arrow grid-arrow-left-hortype ug-skin-"+M.gridpanel_arrows_skin+"'></div>"),I.append("<div class='grid-arrow grid-arrow-right-hortype ug-skin-"+M.gridpanel_arrows_skin+"'></div>"),T=I.children(".grid-arrow-left-hortype"),E=I.children(".grid-arrow-right-hortype")):0==M.gridpanel_vertical_scroll?(I.append("<div class='grid-arrow grid-arrow-left ug-skin-"+M.gridpanel_arrows_skin+"'></div>"),I.append("<div class='grid-arrow grid-arrow-right ug-skin-"+M.gridpanel_arrows_skin+"'></div>"),T=I.children(".grid-arrow-left"),E=I.children(".grid-arrow-right")):(I.append("<div class='grid-arrow grid-arrow-up ug-skin-"+M.gridpanel_arrows_skin+"'></div>"),I.append("<div class='grid-arrow grid-arrow-down ug-skin-"+M.gridpanel_arrows_skin+"'></div>"),T=I.children(".grid-arrow-up"),E=I.children(".grid-arrow-down")),A.setHtml(I),T.fadeTo(0,0),E.fadeTo(0,0),x.initThumbsPanel("grid",M);var e=x.getObjects();C=e.g_objThumbs,C.setHtml(I),r()}function r(){""!=M.gridpanel_background_color&&I.css("background-color",M.gridpanel_background_color)}function o(){"center"==M.gridpanel_grid_align&&(M.gridpanel_grid_align="middle")}function a(){var e=M.gridpanel_padding_border_top+M.gridpanel_padding_border_bottom,t=N.panelHeight-e;if(0==M.gridpanel_arrows_always_on){var i=C.getNumPanesEstimationByHeight(t);if(1==i)return t}var n=j.getElementSize(E),r=n.height,e=r+M.gridpanel_arrows_padding_vert;return 1==M.gridpanel_vertical_scroll&&(e*=2),e+=M.gridpanel_padding_border_top+M.gridpanel_padding_border_bottom,t=N.panelHeight-e}function s(){var e=M.gridpanel_padding_border_left+M.gridpanel_padding_border_right,t=N.panelWidth-e;if(0==M.gridpanel_arrows_always_on){var i=C.getNumPanesEstimationByWidth(t);if(1==i)return t}var n=j.getElementSize(E),r=n.width;return e+=2*(r+M.gridpanel_arrows_padding_hor),t=N.panelWidth-e}function l(){var e=!1;if(1==M.gridpanel_arrows_always_on)e=!0;else{var t=C.getNumPanes();t>1&&(e=!0)}1==e?(E.show().fadeTo(0,1),T.show().fadeTo(0,1),N.arrowsVisible=!0):(E.hide(),T.hide(),N.arrowsVisible=!1)}function u(){var e=C.getSize();1==N.isHorType?N.panelHeight=e.height+M.gridpanel_padding_border_top+M.gridpanel_padding_border_bottom:N.panelWidth=e.width+M.gridpanel_padding_border_left+M.gridpanel_padding_border_right,j.setElementSize(I,N.panelWidth,N.panelHeight)}function d(){return 1==N.isEventsInited?!1:(N.isEventsInited=!0,T&&(j.addClassOnHover(T),C.attachPrevPaneButton(T)),E&&(j.addClassOnHover(E),C.attachNextPaneButton(E)),void A.initEvents())}function _(){var e=M.gridpanel_padding_border_left;return e}function g(){var e=M.gridpanel_grid_align,t=0;switch(e){case"top":t=M.gridpanel_padding_border_top;break;case"bottom":t=M.gridpanel_padding_border_bottom}var i=_(),n=C.getElement();j.placeElement(n,i,e,0,t)}function c(){var e,t,i,n,r=j.getElementSize(T),o=C.getSize();switch(M.gridpanel_grid_align){default:case"top":e=M.gridpanel_padding_border_top+r.height+M.gridpanel_arrows_padding_vert;break;case"middle":e="middle";break;case"bottom":e=N.panelHeight-o.height-r.height-M.gridpanel_padding_border_bottom-M.gridpanel_arrows_padding_vert}var a=_(),s=C.getElement();j.placeElement(s,a,e);var o=C.getSize();switch(M.gridpanel_arrows_align_vert){default:case"center":case"middle":t=(o.top-r.height)/2,i=o.bottom+(N.panelHeight-o.bottom-r.height)/2,n=0;break;case"grid":t=o.top-r.height-M.gridpanel_arrows_padding_vert_vert,i=o.bottom+M.gridpanel_arrows_padding_vert,n=0;break;case"border":case"borders":t=M.gridpanel_padding_border_top,i="bottom",n=M.gridpanel_padding_border_bottom
}j.placeElement(T,"center",t),j.placeElement(E,"center",i,0,n)}function h(){1==N.arrowsVisible?c():g()}function p(){var e,t,i,n,r=j.getElementSize(T),o=C.getSize(),a=M.gridpanel_padding_border_top;switch(M.gridpanel_grid_align){case"middle":switch(M.gridpanel_arrows_align_vert){default:var s=o.height+M.gridpanel_arrows_padding_vert+r.height;a=(N.panelHeight-s)/2;break;case"border":case"borders":var l=N.panelHeight-r.height-M.gridpanel_padding_border_bottom;a=(l-o.height)/2}break;case"bottom":var s=o.height+r.height+M.gridpanel_arrows_padding_vert;a=N.panelHeight-s-M.gridpanel_padding_border_bottom}var u=C.getElement(),d=_();j.placeElement(u,d,a);var o=C.getSize();switch(M.gridpanel_arrows_align_vert){default:case"center":case"middle":e=o.bottom+(N.panelHeight-o.bottom-r.height)/2,i=0;break;case"grid":e=o.bottom+M.gridpanel_arrows_padding_vert,i=0;break;case"border":case"borders":e="bottom",i=M.gridpanel_padding_border_bottom}t=-r.width/2-M.gridpanel_space_between_arrows/2,j.placeElement(T,"center",e,t,i);var n=Math.abs(t);j.placeElement(E,"center",e,n,i)}function f(){1==N.arrowsVisible?p():g()}function m(){var e,t,i,n,r=j.getElementSize(T),o=C.getSize();switch(M.gridpanel_grid_align){default:case"left":e=M.gridpanel_padding_border_left+M.gridpanel_arrows_padding_hor+r.width;break;case"middle":case"center":e="center";break;case"right":e=N.panelWidth-o.width-r.width-M.gridpanel_padding_border_right-M.gridpanel_arrows_padding_hor}var a=C.getElement();switch(j.placeElement(a,e,M.gridpanel_padding_border_top),o=C.getSize(),M.gridpanel_arrows_align_vert){default:case"center":case"middle":n=(o.height-r.height)/2+o.top;break;case"top":n=M.gridpanel_padding_border_top+M.gridpanel_arrows_padding_vert;break;case"bottom":n=N.panelHeight-M.gridpanel_padding_border_bottom-M.gridpanel_arrows_padding_vert-r.height}switch(M.gridpanel_arrows_align_hor){default:case"borders":t=M.gridpanel_padding_border_left,i=N.panelWidth-M.gridpanel_padding_border_right-r.width;break;case"grid":t=o.left-M.gridpanel_arrows_padding_hor-r.width,i=o.right+M.gridpanel_arrows_padding_hor;break;case"center":t=(o.left-r.width)/2,i=o.right+(N.panelWidth-o.right-r.width)/2}j.placeElement(T,t,n),j.placeElement(E,i,n)}function v(){var e,t=C.getSize();switch(M.gridpanel_grid_align){default:case"left":e=M.gridpanel_padding_border_left;break;case"middle":case"center":e="center";break;case"right":e=N.panelWidth-t.width-M.gridpanel_padding_border_right}var i=C.getElement();j.placeElement(i,e,M.gridpanel_padding_border_top)}function b(){1==N.arrowsVisible?m():v()}function y(){0==N.isHorType?1==M.gridpanel_vertical_scroll?h():f():b(),A.placeElements()}var w,I,E,T,S=this,P=jQuery(this),x=new UniteGalleryMain,j=new UGFunctions,C=new UGThumbsGrid,A=new UGPanelsBase;this.events={FINISH_MOVE:"gridpanel_move_finish",OPEN_PANEL:"open_panel",CLOSE_PANEL:"close_panel"};var M={gridpanel_vertical_scroll:!0,gridpanel_grid_align:"middle",gridpanel_padding_border_top:10,gridpanel_padding_border_bottom:4,gridpanel_padding_border_left:10,gridpanel_padding_border_right:10,gridpanel_arrows_skin:"",gridpanel_arrows_align_vert:"middle",gridpanel_arrows_padding_vert:4,gridpanel_arrows_align_hor:"center",gridpanel_arrows_padding_hor:10,gridpanel_space_between_arrows:20,gridpanel_arrows_always_on:!1,gridpanel_enable_handle:!0,gridpanel_handle_align:"top",gridpanel_handle_offset:0,gridpanel_handle_skin:"",gridpanel_background_color:""},O={gridpanel_grid_align:"middle",gridpanel_padding_border_top:2,gridpanel_padding_border_bottom:2},z={gridpanel_grid_align:"center"},N={panelType:"grid",isHorType:!1,arrowsVisible:!1,panelHeight:0,panelWidth:0,originalPosX:null,isEventsInited:!1,isClosed:!1,orientation:null};this.destroy=function(){T&&j.destroyButton(T),E&&j.destroyButton(E),A.destroy(),C.destroy()},this.getOrientation=function(){return N.orientation},this.setOrientation=function(e){switch(N.orientation=e,e){case"right":case"left":N.isHorType=!1;break;case"top":case"bottom":N.isHorType=!0;break;default:throw new Error("Wrong grid panel orientation: "+e)}},this.setHeight=function(e){if(1==N.isHorType)throw new Error("setHeight is not appliable to this orientatio ("+N.orientation+"). Please use setWidth");N.panelHeight=e;var t=a();C.setMaxHeight(t)},this.setWidth=function(e){if(0==N.isHorType)throw new Error("setWidth is not appliable to this orientatio ("+N.orientation+"). Please use setHeight");N.panelWidth=e;var t=s();C.setMaxWidth(t)},this.init=function(t,i){e(t,i)},this.setHtml=function(){n()},this.run=function(){i()},this.getElement=function(){return I},this.getSize=function(){var e=j.getElementSize(I);return e},this.__________Functions_From_Base_____=function(){},this.isPanelClosed=function(){return A.isPanelClosed()},this.getClosedPanelDest=function(){return A.getClosedPanelDest()},this.openPanel=function(e){A.openPanel(e)},this.closePanel=function(e){A.closePanel(e)},this.setOpenedState=function(e){A.setOpenedState(e)},this.setClosedState=function(e){A.setClosedState(e)},this.setDisabledAtStart=function(e){A.setDisabledAtStart(e)}}function UGLightbox(){function e(e,i){$=e,B=jQuery(e),nt=jQuery.extend(nt,ot),nt=jQuery.extend(nt,i),rt.originalOptions=jQuery.extend({},nt),"compact"==nt.lightbox_type&&(rt.isCompact=!0,nt=jQuery.extend(nt,at),nt=jQuery.extend(nt,i)),t(),1==rt.putSlider?($.initSlider(nt,"lightbox"),g_objects=e.getObjects(),et=g_objects.g_objSlider):et=null,1==nt.lightbox_show_textpanel?it.init($,nt,"lightbox"):it=null}function t(){1==rt.isCompact&&1==nt.lightbox_show_textpanel&&(nt.lightbox_slider_image_padding_bottom=rt.initTextPanelHeight),1==rt.isCompact&&"inside"==nt.lightbox_arrows_position&&(rt.isArrowsInside=!0),1==rt.isArrowsInside&&0==nt.lightbox_arrows_inside_alwayson&&(rt.isArrowsOnHoverMode=!0)}function i(){var e="",t="";1==rt.isCompact&&(t=" ug-lightbox-compact"),e+="<div class='ug-gallery-wrapper ug-lightbox"+t+"'>",e+="<div class='ug-lightbox-overlay'></div>",0==rt.isCompact&&(e+="<div class='ug-lightbox-top-panel'>"),e+="<div class='ug-lightbox-top-panel-overlay'></div>",e+="<div class='ug-lightbox-button-close'></div>",nt.lightbox_show_numbers&&(e+="<div class='ug-lightbox-numbers'></div>"),0==rt.isCompact&&(e+="</div>"),e+="<div class='ug-lightbox-arrow-left'></div>",e+="<div class='ug-lightbox-arrow-right'></div>",e+="</div>",Y=jQuery(e),jQuery("body").append(Y),et&&et.setHtml(Y),U=Y.children(".ug-lightbox-overlay"),0==rt.isCompact&&(K=Y.children(".ug-lightbox-top-panel")),Z=Y.find(".ug-lightbox-button-close"),nt.lightbox_show_numbers&&(q=Y.find(".ug-lightbox-numbers")),X=Y.children(".ug-lightbox-arrow-left"),V=Y.children(".ug-lightbox-arrow-right"),it&&it.appendHTML(K?K:Y)}function n(){if(null!==nt.lightbox_overlay_color&&U.css("background-color",nt.lightbox_overlay_color),null!==nt.lightbox_overlay_opacity&&U.fadeTo(0,nt.lightbox_overlay_opacity),K&&null!==nt.lightbox_top_panel_opacity&&K.children(".ug-lightbox-top-panel-overlay").fadeTo(0,nt.lightbox_top_panel_opacity),q){var e={};null!==nt.lightbox_numbers_size&&(e["font-size"]=nt.lightbox_numbers_size+"px"),nt.lightbox_numbers_color&&(e.color=nt.lightbox_numbers_color),null!==nt.lightbox_numbers_padding_right&&(e["padding-right"]=nt.lightbox_numbers_padding_right+"px"),null!==nt.lightbox_numbers_padding_top&&(e["padding-top"]=nt.lightbox_numbers_padding_top+"px"),q.css(e)}}function r(e){if(!et)return!0;var t={slider_image_padding_top:e,slider_video_padding_top:e};et.setOptions(t),et.refreshSlideItems()}function o(){if(!K)return!1;if(!it)return!1;var e=K.height();if(0==e)return!1;var t=e,i=it.getSize().height;e!=rt.topPanelHeight&&(t=rt.topPanelHeight),i>t&&(t=i),e!=t&&(K.height(t),et&&0==et.isAnimating()&&r(t))}function a(e){var t={},i=nt.lightbox_textpanel_width,n=47,r=40,a=e.width-n-r;i>a?(t.textpanel_padding_left=n,t.textpanel_padding_right=r,t.textpanel_title_text_align="center",t.textpanel_desc_text_align="center"):(t.textpanel_padding_left=Math.floor((e.width-i)/2),t.textpanel_padding_right=t.textpanel_padding_left,t.textpanel_title_text_align="left",t.textpanel_desc_text_align="left",nt.lightbox_textpanel_title_text_align&&(t.textpanel_title_text_align=nt.lightbox_textpanel_desc_text_align),nt.lightbox_textpanel_desc_text_align&&(t.textpanel_desc_text_align=nt.lightbox_textpanel_desc_text_align)),it.setOptions(t),it.refresh(!0,!0),o(),it.positionPanel()}function s(e){if(0==rt.isOpened)return!1;if(!it)return!1;if(!et)return!1;var t=tt.getElementSize(Y),i=it.getSize();if(0==i.width||i.height>120)return!1;if(!e)var n=et.getSlideImage(),e=tt.getElementSize(n);if(0==e.height||0==e.width)return!1;var r=e.bottom+i.height;if(r<t.height)return!1;var o=et.getOptions(),a=i.height;if(a!=o.slider_image_padding_bottom){var s={slider_image_padding_bottom:a};if(0==et.isAnimating())return et.setOptions(s),et.refreshSlideItems(),!0}return!1}function l(e,t){if(!e)var i=et.getSlideImage(),e=tt.getElementSize(i);rt.textPanelTop=e.bottom,t===!0&&it.positionPanel(rt.textPanelTop,rt.textPanelLeft)}function u(e){var t=(tt.getElementSize(Y),et.getSlideImage()),i=tt.getElementSize(t);if(0==i.width)return!1;rt.textPanelLeft=i.left,rt.textPanelTop=i.bottom;var n=i.width;if(q){var r=tt.getElementSize(q);n-=r.width;var o=i.right-r.width;tt.placeElement(q,o,rt.textPanelTop)}it&&(it.show(),it.refresh(!0,!0,n),l(i));var a=s(i);0==a&&(rt.positionFrom="handleCompactTextpanelSizes",it&&(it.positionPanel(rt.textPanelTop,rt.textPanelLeft),e===!0&&(e(),P())))}function d(){if(0==et.isCurrentSlideType("image"))return!0;var e=1==et.isCurrentImageInPlace();return e}function _(e,t){if(0==rt.isArrowsInside)return!1;if(!X)return!1;var i=d();if(X.show(),V.show(),rt.positionFrom="positionArrowsInside",1==rt.isArrowsOnHoverMode&&1==i&&0==v()&&b(!0),0==i)var n=tt.getElementRelativePos(X,"left",nt.lightbox_arrows_offset),r=tt.getElementRelativePos(X,"middle"),o=tt.getElementRelativePos(V,"right",nt.lightbox_arrows_offset),a=r;else var s=et.getSlideImage(),l=tt.getElementSize(s),n=(tt.getElementSize(et.getElement()),tt.getElementRelativePos(X,"left",0,s)+l.left+nt.lightbox_arrows_inside_offset),r=tt.getElementRelativePos(X,"middle",0,s)+l.top,o=tt.getElementRelativePos(X,"right",0,s)+l.left-nt.lightbox_arrows_inside_offset,a=r;if(t===!0){var u={left:n,top:r},_={left:o,top:a};X.stop().animate(u,{duration:rt.fadeDuration}),V.stop().animate(_,{duration:rt.fadeDuration})}else X.stop(),V.stop(),tt.placeElement(X,n,r),tt.placeElement(V,o,a);1==e&&w(t)}function g(e,t){rt.positionFrom=null;var i=d(),n=2,r=tt.getElementRelativePos(Z,"right",2,Y);if(0==i)var o=n,a=r;else{var s=et.getSlideImage(),l=tt.getElementSize(s),u=tt.getElementSize(et.getElement()),_=tt.getElementSize(Z);u.top==u.height&&(u.top=0);var a=u.left+l.right-_.width/2+nt.lightbox_compact_closebutton_offsetx,o=u.top+l.top-_.height/2-nt.lightbox_compact_closebutton_offsety;n>o&&(o=n),a>r&&(a=r)}if(t===!0){var g={left:a,top:o};Z.stop().animate(g,{duration:rt.fadeDuration})}else Z.stop(),tt.placeElement(Z,a,o);e===!0&&I(t)}function c(){Z&&Z.stop().fadeTo(rt.fadeDuration,0),f(),m(),rt.positionFrom="hideCompactElements",1==rt.isArrowsInside&&b()}function h(){Z&&Z.hide(),X&&1==rt.isArrowsInside&&(X.hide(),V.hide()),q&&q.hide(),it&&it.hide()}function p(){var e=tt.getElementSize(Y);K&&tt.setElementSizeAndPosition(K,0,0,e.width,rt.topPanelHeight),X&&0==rt.isArrowsInside&&(1==nt.lightbox_hide_arrows_onvideoplay&&(X.show(),V.show()),tt.placeElement(X,"left","middle",nt.lightbox_arrows_offset),tt.placeElement(V,"right","middle",nt.lightbox_arrows_offset)),0==rt.isCompact&&tt.placeElement(Z,"right","top",2,2),it&&(rt.positionFrom="positionElements",0==rt.isCompact?a(e):(S(),P()));var t=e.width,i=e.height,n=0,r=0;if(et){if(K){var o=K.height(),s={slider_image_padding_top:o,slider_video_padding_top:o};et.setOptions(s)}et.setSize(t,i),et.setPosition(r,n)}}function f(){it&&it.getElement().stop().fadeTo(rt.fadeDuration,0)}function m(){q&&q.stop().fadeTo(rt.fadeDuration,0)}function v(){if(!rt.lastMouseX)return!0;var e={pageX:rt.lastMouseX,pageY:rt.lastMouseY},t=et.isMouseInsideSlideImage(e);return t}function b(e,t){return X?1==rt.isArrowsOnHoverMode&&t===!1?(1==v(),!0):void(e===!0?(X.stop().fadeTo(0,0),V.stop().fadeTo(0,0)):(X.stop().fadeTo(rt.fadeDuration,0),V.stop().fadeTo(rt.fadeDuration,0))):!1}function y(){if(!X)return!0;if(0==X.is(":visible"))return!0;var e=X.css("opacity");return 1!=e?!0:!1}function w(e,t){return X?1==rt.isArrowsOnHoverMode&&t!==!0&&1==d()?!0:1==et.isSwiping()?!0:(e!==!0&&(X.stop(),V.stop()),X.fadeTo(rt.fadeDuration,1),void V.fadeTo(rt.fadeDuration,1)):!1}function I(e){e!==!0&&Z.stop(),Z.fadeTo(rt.fadeDuration,1)}function E(e){if(!it)return!1;if(!e)var e=et.getCurrentItem();it.setTextPlain(e.title,e.description)}function T(e){if(!q)return!1;if(!e)var e=et.getCurrentItem();var t=$.getNumItems(),i=e.index+1;q.html(i+" / "+t)}function S(){return it?void it.getElement().show().stop().fadeTo(rt.fadeDuration,1):!1}function P(){q&&q.stop().fadeTo(rt.fadeDuration,1)}function x(){return 0==rt.isCompact?!0:void c()}function j(){if(0==rt.isCompact)return!0;if(rt.positionFrom="onZoomChange",g(!1,!0),_(!1,!0),1==rt.isCompact){var e=et.isCurrentSlideType("image")&&1==et.isCurrentImageInPlace();0==e?(f(),m()):(rt.positionFrom="onZoomChange",S(),P())}}function C(){if(0==rt.isCompact)return!0;rt.positionFrom="onSliderAfterReturn",g(!0),_(!0);var e=s();0==e&&u(),S(),P()}function A(e,t){return t=jQuery(t),0==rt.isCompact?!0:0==et.isSlideCurrent(t)?!0:(rt.positionFrom="onSliderAfterPutImage",g(!0),_(!0),void u())}function M(){var e=et.getOptions(),t=e.slider_image_padding_top;if(K){var i=K.height();i!=t&&r(i)}if(1==rt.isCompact&&(E(),T(),rt.positionFrom="onSliderTransitionEnd",g(!0),_(!0),0==et.isSlideActionActive())){var n=s();0==n&&u(),S(),P()}}function O(e,t){0==rt.isCompact?(q&&T(t),it&&(E(t),it.positionElements(!1),o(),it.positionPanel())):0==et.isAnimating()&&(it&&E(t),q&&T(t))}function z(e,t){var i=et.getSlideType();if("image"!=i&&0==rt.isCompact&&et.isSlideActionActive())return!0;var n=et.isPreloading();if(1==n)return J.close("slider"),!0;var r=et.isMouseInsideSlideImage(t);0==r&&J.close("slider_inside")}function N(){p()}function k(){X&&1==nt.lightbox_hide_arrows_onvideoplay&&(X.hide(),V.hide())}function L(){X&&1==nt.lightbox_hide_arrows_onvideoplay&&(X.show(),V.show())}function R(e,t){switch(t){case 27:1==rt.isOpened&&J.close("keypress")}}function Q(){1==rt.isArrowsOnHoverMode&&w(!1,!0)}function H(){rt.positionFrom="hideCompactElements",1==rt.isArrowsOnHoverMode&&1==d()&&b(!1,!0)}function G(e){rt.lastMouseX=e.pageX,rt.lastMouseY=e.pageY;var t=y();1==t&&v()&&0==et.isAnimating()&&(rt.positionFrom="onMouseMove",X&&0==X.is(":animated")&&w(!1,!0))}function D(e,t,i,n){if(0==rt.isOpened)return!0;switch(nt.gallery_mousewheel_role){default:case"zoom":var r=et.getSlideType();"image"!=r&&e.preventDefault();break;case"none":e.preventDefault();break;case"advance":$.onGalleryMouseWheel(e,t,i,n)}}function F(){if(U.on("touchstart",function(e){e.preventDefault()}),U.on("touchend",function(){J.close("overlay")}),tt.addClassOnHover(V,"ug-arrow-hover"),tt.addClassOnHover(X,"ug-arrow-hover"),tt.addClassOnHover(Z),$.setNextButton(V),$.setPrevButton(X),Z.click(function(){J.close("button")}),B.on($.events.ITEM_CHANGE,O),et){jQuery(et).on(et.events.TRANSITION_END,M),jQuery(et).on(et.events.CLICK,z);var e=et.getVideoObject();jQuery(e).on(e.events.PLAY_START,k),jQuery(e).on(e.events.PLAY_STOP,L),jQuery(et).on(et.events.START_DRAG,x),jQuery(et).on(et.events.TRANSITION_START,x),jQuery(et).on(et.events.AFTER_DRAG_CHANGE,C),jQuery(et).on(et.events.AFTER_RETURN,C),jQuery(et).on(et.events.AFTER_PUT_IMAGE,A),jQuery(et).on(et.events.ZOOM_CHANGE,j),jQuery(et).on(et.events.IMAGE_MOUSEENTER,Q),jQuery(et).on(et.events.IMAGE_MOUSELEAVE,H)}jQuery(window).resize(function(){return 0==rt.isOpened?!0:void tt.whenContiniousEventOver("lightbox_resize",N,100)}),B.on($.events.GALLERY_KEYPRESS,R),1==rt.isArrowsOnHoverMode&&jQuery(document).bind("mousemove",G),Y.on("mousewheel",D)}function W(){rt.isCompact=!1,t(),nt=jQuery.extend({},rt.originalOptions),trace(nt),et.setOptions(nt)}var B,Y,U,X,V,Z,q,K,J=this,$=(jQuery(this),new UniteGalleryMain),et=new UGSlider,tt=new UGFunctions,it=new UGTextPanel,nt={lightbox_type:"wide",lightbox_show_textpanel:!0,lightbox_textpanel_width:550,lightbox_hide_arrows_onvideoplay:!0,lightbox_arrows_position:"sides",lightbox_arrows_offset:10,lightbox_arrows_inside_offset:10,lightbox_arrows_inside_alwayson:!1,lightbox_overlay_color:null,lightbox_overlay_opacity:1,lightbox_top_panel_opacity:null,lightbox_show_numbers:!0,lightbox_numbers_size:null,lightbox_numbers_color:null,lightbox_numbers_padding_top:null,lightbox_numbers_padding_right:null,lightbox_compact_closebutton_offsetx:1,lightbox_compact_closebutton_offsety:1};this.events={};var rt={topPanelHeight:44,initTextPanelHeight:26,isOpened:!1,putSlider:!0,isCompact:!1,fadeDuration:300,positionFrom:null,textPanelTop:null,textPanelLeft:null,isArrowsInside:!1,isArrowsOnHoverMode:!1,lastMouseX:null,lastMouseY:null,originalOptions:null},ot={lightbox_slider_controls_always_on:!0,lightbox_slider_enable_bullets:!1,lightbox_slider_enable_arrows:!1,lightbox_slider_enable_progress_indicator:!1,lightbox_slider_enable_play_button:!1,lightbox_slider_enable_fullscreen_button:!1,lightbox_slider_enable_zoom_panel:!1,lightbox_slider_enable_text_panel:!1,lightbox_slider_scale_mode_media:"down",lightbox_slider_scale_mode:"down",lightbox_slider_loader_type:3,lightbox_slider_loader_color:"black",lightbox_slider_transition:"fade",lightbox_slider_image_padding_top:rt.topPanelHeight,lightbox_slider_image_padding_bottom:10,lightbox_slider_video_padding_top:rt.topPanelHeight,lightbox_slider_video_padding_bottom:0,lightbox_textpanel_align:"middle",lightbox_textpanel_padding_top:5,lightbox_textpanel_padding_bottom:5,slider_video_constantsize:!1,lightbox_slider_image_border:!1,lightbox_textpanel_enable_title:!0,lightbox_textpanel_enable_description:!1,lightbox_textpanel_enable_bg:!1,video_enable_closebutton:!1,lightbox_slider_video_enable_closebutton:!1,video_youtube_showinfo:!1,lightbox_slider_enable_links:!1},at={lightbox_overlay_opacity:.6,lightbox_slider_image_border:!0,lightbox_slider_image_shadow:!0,lightbox_slider_image_padding_top:30,lightbox_slider_image_padding_bottom:30,slider_video_constantsize:!0,lightbox_textpanel_align:"bottom",lightbox_textpanel_title_text_align:"left",lightbox_textpanel_desc_text_align:"left",lightbox_textpanel_padding_left:10,lightbox_textpanel_padding_right:10};this.destroy=function(){if(jQuery(document).unbind("mousemove"),U.off("touchstart"),U.off("touchend"),Z.off("click"),B.off($.events.ITEM_CHANGE),et){jQuery(et).off(et.events.TRANSITION_END),jQuery(et).off(et.events.CLICK),jQuery(et).off(et.events.START_DRAG),jQuery(et).off(et.events.TRANSITION_START),jQuery(et).off(et.events.AFTER_DRAG_CHANGE),jQuery(et).off(et.events.AFTER_RETURN);var e=et.getVideoObject();jQuery(e).off(e.events.PLAY_START),jQuery(e).off(e.events.PLAY_STOP),jQuery(et).on(et.events.IMAGE_MOUSEENTER,Q),jQuery(et).on(et.events.IMAGE_MOUSELEAVE,H),et.destroy()}jQuery(window).unbind("resize"),B.off($.events.GALLERY_KEYPRESS,R),Y.off("mousewheel"),Y.remove()},this.open=function(e){var t=$.getItem(e);if(rt.isOpened=!0,et&&et.setItem(t,"lightbox_open"),it&&it.setTextPlain(t.title,t.description),U.stop().fadeTo(0,0),Y.show(),Y.fadeTo(0,1),U.stop().fadeTo(rt.fadeDuration,nt.lightbox_overlay_opacity),p(),1==rt.isCompact){var i=et.isPreloading();1==i?h():1==rt.isArrowsInside&&(X.hide(),V.hide())}et&&et.startSlideAction()},this.close=function(){rt.isOpened=!1,1==rt.isCompact&&c(),et&&et.stopSlideAction();var e=et.getSlideType();"image"!=e?Y.hide():Y.fadeTo(rt.fadeDuration,0,function(){Y.hide()})},this.init=function(t,i){e(t,i)},this.putHtml=function(){var e=$.isMobileMode();e&&1==rt.isCompact&&W(),i()},this.run=function(){n(),et&&et.run(),F()}}function UGPanelsBase(){function e(e,t){switch(n.orientation){case"right":case"left":var i={left:e+"px"};break;case"top":case"bottom":var i={top:e+"px"}}o.stop(!0).animate(i,{duration:300,easing:"easeInOutQuad",queue:!1,complete:function(){t&&t()}})}function t(e){switch(n.orientation){case"right":case"left":g.placeElement(o,e,null);break;case"top":case"bottom":g.placeElement(o,null,e)}}function i(){s.trigger(r.events.FINISH_MOVE)}var n,r,o,a,s,l,u,d=new UniteGalleryMain,_=this,g=new UGFunctions;this.init=function(e,t,i,o,l){n=t,r=i,d=e,a=o,s=l,u=jQuery(d)},this.setHtml=function(e){if(o=e,"strip"==n.panelType)var t=a.strippanel_enable_handle;else var t=a.gridpanel_enable_handle;if(1==t&&(l=new UGPanelHandle,l.init(r,o,a,n.panelType,d),l.setHtml()),n.isDisabledAtStart===!0){var i="<div class='ug-overlay-disabled'></div>";o.append(i),setTimeout(function(){o.children(".ug-overlay-disabled").hide()},n.disabledAtStartTimeout)}},this.placeElements=function(){l&&l.placeHandle()},this.initEvents=function(){l&&(l.initEvents(),u.on(d.events.SLIDER_ACTION_START,function(){l.hideHandle()}),u.on(d.events.SLIDER_ACTION_END,function(){l.showHandle()}))},this.destroy=function(){l&&(l.destroy(),u.off(d.events.SLIDER_ACTION_START),u.off(d.events.SLIDER_ACTION_END))},this.openPanel=function(a){if(!a)var a=!1;return o.is(":animated")?!1:0==n.isClosed?!1:(n.isClosed=!1,s.trigger(r.events.OPEN_PANEL),void(a===!1?e(n.originalPos,i):(t(n.originalPos),i())))},this.closePanel=function(a){if(!a)var a=!1;if(o.is(":animated"))return!1;if(1==n.isClosed)return!1;var l=_.getClosedPanelDest();n.isClosed=!0,s.trigger(r.events.CLOSE_PANEL),a===!1?e(l,i):(t(l),i())},this.setClosedState=function(e){n.originalPos=e,s.trigger(r.events.CLOSE_PANEL),n.isClosed=!0},this.setOpenedState=function(){s.trigger(r.events.OPEN_PANEL),n.isClosed=!1},this.getClosedPanelDest=function(){var e,t=g.getElementSize(o);switch(n.orientation){case"left":n.originalPos=t.left,e=-n.panelWidth;break;case"right":n.originalPos=t.left;var i=d.getSize();e=i.width;break;case"top":n.originalPos=t.top,e=-n.panelHeight;break;case"bottom":n.originalPos=t.top;var i=d.getSize();e=i.height}return e},this.isPanelClosed=function(){return n.isClosed},this.setDisabledAtStart=function(e){return 0>=e?!1:(n.isDisabledAtStart=!0,void(n.disabledAtStartTimeout=e))}}function UGPanelHandle(){function e(){s.removeClass("ug-button-hover")}function t(){s.addClass("ug-button-closed")}function i(){s.removeClass("ug-button-closed")}function n(e){return e.stopPropagation(),e.stopImmediatePropagation(),0==l.validateClickTouchstartEvent(e.type)?!0:void(a.isPanelClosed()?a.openPanel():a.closePanel())}function r(){var e=a.getOrientation();switch(e){case"right":case"left":"top"!=u.panel_handle_align&&"bottom"!=u.panel_handle_align&&(u.panel_handle_align="top");break;case"bottom":"left"!=u.panel_handle_align&&"right"!=u.panel_handle_align&&(u.panel_handle_align="left");break;case"top":"left"!=u.panel_handle_align&&"right"!=u.panel_handle_align&&(u.panel_handle_align="right")}}var o,a,s,l=new UGFunctions,u={panel_handle_align:"top",panel_handle_offset:0,panel_handle_skin:0};this.init=function(e,t,i,n,r){switch(a=e,o=t,n){case"grid":u.panel_handle_align=i.gridpanel_handle_align,u.panel_handle_offset=i.gridpanel_handle_offset,u.panel_handle_skin=i.gridpanel_handle_skin;break;case"strip":u.panel_handle_align=i.strippanel_handle_align,u.panel_handle_offset=i.strippanel_handle_offset,u.panel_handle_skin=i.strippanel_handle_skin;break;default:throw new Error("Panel handle error: wrong panel type: "+n)}var s=r.getOptions(),l=s.gallery_skin;""==u.panel_handle_skin&&(u.panel_handle_skin=l)},this.setHtml=function(){var e=a.getOrientation(),t="ug-panel-handle-tip";switch(e){case"right":t+=" ug-handle-tip-left";break;case"left":t+=" ug-handle-tip-right";break;case"bottom":t+=" ug-handle-tip-top";break;case"top":t+=" ug-handle-tip-bottom"}o.append("<div class='"+t+" ug-skin-"+u.panel_handle_skin+"'></div>"),s=o.children(".ug-panel-handle-tip")},this.initEvents=function(){l.addClassOnHover(s),s.bind("click touchstart",n),jQuery(a).on(a.events.OPEN_PANEL,function(){e(),i()}),jQuery(a).on(a.events.CLOSE_PANEL,function(){e(),t()})},this.destroy=function(){l.destroyButton(s),jQuery(a).off(a.events.OPEN_PANEL),jQuery(a).off(a.events.CLOSE_PANEL)},this.placeHandle=function(){var e=l.getElementSize(s);r();var t=a.getOrientation();switch(t){case"left":l.placeElement(s,"right",u.panel_handle_align,-e.width);break;case"right":l.placeElement(s,-e.width,u.panel_handle_align,0,u.panel_handle_offset);break;case"top":l.placeElement(s,u.panel_handle_align,"bottom",u.panel_handle_offset,-e.height);break;case"bottom":l.placeElement(s,u.panel_handle_align,"top",u.panel_handle_offset,-e.height);break;default:throw new Error("Wrong panel orientation: "+t)}},this.hideHandle=function(){1==s.is(":visible")&&s.hide()},this.showHandle=function(){0==s.is(":visible")&&s.show()}}function UGSlider(){function e(e,t,n){ft=e,n&&(ct=n,t=wt.convertCustomPrefixOptions(t,ct,"slider")),et=jQuery(e);var r=ft.getObjects();if(tt=r.g_objWrapper,it=r.g_objThumbs,t.hasOwnProperty("slider_progress_indicator_type")&&(Tt.slider_progress_indicator_type=t.slider_progress_indicator_type),"bar"==Tt.slider_progress_indicator_type&&(Tt=jQuery.extend(Tt,St)),t&&ht.setOptions(t),i(),1==Tt.slider_enable_bullets){bt=new UGBullets;var o={bullets_skin:Tt.slider_bullets_skin,bullets_space_between:Tt.slider_bullets_space_between};bt.init(ft,o)}Tt.slider_enable_text_panel&&(Et=new UGTextPanel,Et.init(ft,Tt,"slider")),Tt.slider_enable_zoom_panel&&(gt=new UGZoomButtonsPanel,gt.init(ht,Tt));var a=ft.getGalleryID();yt.init(Tt,!1,a)}function t(){if(1==Pt.isRunOnce)return!1;if(Pt.isRunOnce=!0,Tt.slider_background_color){var e=Tt.slider_background_color;1!=Tt.slider_background_opacity&&(e=wt.convertHexToRGB(e,Tt.slider_background_opacity)),nt.css("background-color",e)}else 1!=Tt.slider_background_opacity&&(e=wt.convertHexToRGB("#000000",Tt.slider_background_opacity),nt.css("background-color",e));1==Tt.slider_control_swipe&&(dt=new UGTouchSliderControl,dt.init(ht,Tt)),1==Tt.slider_control_zoom&&(_t=new UGZoomSliderControl,_t.init(ht,Tt)),Et&&Et.run(),X()}function i(){var e=ft.getOptions(),t=e.gallery_skin;""==Tt.slider_bullets_skin&&(Tt.slider_bullets_skin=t),""==Tt.slider_arrows_skin&&(Tt.slider_arrows_skin=t),""==Tt.slider_zoompanel_skin&&(Tt.slider_zoompanel_skin=t),""==Tt.slider_play_button_skin&&(Tt.slider_play_button_skin=t),""==Tt.slider_fullscreen_button_skin&&(Tt.slider_fullscreen_button_skin=t),Tt.video_enable_closebutton=Tt.slider_video_enable_closebutton,"zoom"!=e.gallery_mousewheel_role&&(Tt.slider_zoom_mousewheel=!1)}function n(e,t){var i="ug-type-square";return"round"==Tt.slider_videoplay_button_type&&(i="ug-type-round"),html="",html+="<div class='ug-slide-wrapper ug-slide"+t+"'>",html+="<div class='ug-item-wrapper'></div>",html+="<div class='ug-slider-preloader "+e+"'></div>",html+="<div class='ug-button-videoplay "+i+"' style='display:none'></div>",html+="</div>"}function r(e){e&&(tt=e);var t=V(),i=(ft.getOptions(),"<div class='ug-slider-wrapper'>");if(i+="<div class='ug-slider-inner'>",i+=n(t,1),i+=n(t,2),i+=n(t,3),i+="</div>",1==Tt.slider_enable_arrows&&(i+="<div class='ug-slider-control ug-arrow-left ug-skin-"+Tt.slider_arrows_skin+"'></div>",i+="<div class='ug-slider-control ug-arrow-right ug-skin-"+Tt.slider_arrows_skin+"'></div>"),1==Tt.slider_enable_play_button&&(i+="<div class='ug-slider-control ug-button-play ug-skin-"+Tt.slider_play_button_skin+"'></div>"),1==Tt.slider_enable_fullscreen_button&&(i+="<div class='ug-slider-control ug-button-fullscreen ug-skin-"+Tt.slider_fullscreen_button_skin+"'></div>"),i+="</div>",tt.append(i),nt=tt.children(".ug-slider-wrapper"),rt=nt.children(".ug-slider-inner"),ot=rt.children(".ug-slide1"),at=rt.children(".ug-slide2"),st=rt.children(".ug-slide3"),ot.data("slidenum",1),at.data("slidenum",2),st.data("slidenum",3),bt&&bt.appendHTML(nt),1==Tt.slider_enable_arrows&&(lt=nt.children(".ug-arrow-left"),ut=nt.children(".ug-arrow-right")),1==Tt.slider_enable_play_button&&(mt=nt.children(".ug-button-play")),1==Tt.slider_enable_fullscreen_button&&(vt=nt.children(".ug-button-fullscreen")),1==Tt.slider_enable_progress_indicator){It=wt.initProgressIndicator(Tt.slider_progress_indicator_type,Tt,nt);var r=It.getType();"bar"==r&&"pie"==Tt.slider_progress_indicator_type&&(Tt.slider_progress_indicator_type="bar",Tt=jQuery.extend(Tt,St)),ft.setProgressIndicator(It)}if(1==Tt.slider_enable_text_panel&&(Et.appendHTML(nt),0==Tt.slider_textpanel_always_on)){var o=Et.getElement();o.hide().data("isHidden",!0),Pt.isTextPanelSaparateHover=!0}1==Tt.slider_enable_zoom_panel&&gt.appendHTML(nt),yt.setHtml(rt)}function o(e){var t=K(e);wt.placeElementInParentCenter(t);var i=J(e);wt.placeElementInParentCenter(i)}function a(){if(bt&&(objBullets=bt.getElement(),wt.placeElement(objBullets,Tt.slider_bullets_align_hor,Tt.slider_bullets_align_vert,Tt.slider_bullets_offset_hor,Tt.slider_bullets_offset_vert),wt.placeElement(objBullets,Tt.slider_bullets_align_hor,Tt.slider_bullets_align_vert,Tt.slider_bullets_offset_hor,Tt.slider_bullets_offset_vert)),1==Tt.slider_enable_arrows&&(wt.placeElement(lt,Tt.slider_arrow_left_align_hor,Tt.slider_arrow_left_align_vert,Tt.slider_arrow_left_offset_hor,Tt.slider_arrow_left_offset_vert),wt.placeElement(ut,Tt.slider_arrow_right_align_hor,Tt.slider_arrow_left_align_vert,Tt.slider_arrow_right_offset_hor,Tt.slider_arrow_right_offset_vert)),0==Tt.slider_controls_always_on&&A(!0),It){var e=It.getElement();if("bar"==Tt.slider_progress_indicator_type){var t=nt.width();It.setSize(t),wt.placeElement(e,"left",Tt.slider_progress_indicator_align_vert,0,Tt.slider_progress_indicator_offset_vert)}else wt.placeElement(e,Tt.slider_progress_indicator_align_hor,Tt.slider_progress_indicator_align_vert,Tt.slider_progress_indicator_offset_hor,Tt.slider_progress_indicator_offset_vert)}Et&&Et.positionPanel(),s(),o(ot),o(at),o(st),j()}function s(){if(mt&&wt.placeElement(mt,Tt.slider_play_button_align_hor,Tt.slider_play_button_align_vert,Tt.slider_play_button_offset_hor,Tt.slider_play_button_offset_vert),vt&&wt.placeElement(vt,Tt.slider_fullscreen_button_align_hor,Tt.slider_fullscreen_button_align_vert,Tt.slider_fullscreen_button_offset_hor,Tt.slider_fullscreen_button_offset_vert),gt){var e=gt.getElement();wt.placeElement(e,Tt.slider_zoompanel_align_hor,Tt.slider_zoompanel_align_vert,Tt.slider_zoompanel_offset_hor,Tt.slider_zoompanel_offset_vert)}}function l(){var e,t,i,n,r=ht.getSlidesReference(),o=0,a=0,s=0;i=ht.isSlideHasItem(r.objNextSlide),n=ht.isSlideHasItem(r.objPrevSlide),n?(s=r.objPrevSlide.outerWidth(),r.objPrevSlide.css("z-index",1)):r.objPrevSlide.hide(),t=s+r.objCurrentSlide.outerWidth(),e=t,i?(e=t+r.objNextSlide.outerWidth(),r.objPrevSlide.css("z-index",2)):r.objNextSlide.hide(),r.objCurrentSlide.css("z-index",3),wt.placeElement(r.objCurrentSlide,s,o),rt.css({left:-s+"px",width:e+"px"}),n&&(wt.placeElement(r.objPrevSlide,a,o),wt.showElement(r.objPrevSlide)),i&&(wt.showElement(r.objNextSlide),wt.placeElement(r.objNextSlide,t,o))}function u(e){var t=e.data("index");if(void 0===t||null==t)return!1;var i=ft.getItem(t);return i?void p(e,i):!1}function d(e){e.stop(!0).show(100)}function _(e){e.stop(!0).hide(100)}function g(e,t){var i={};1==Tt.slider_image_border&&(i["border-style"]="solid",i["border-width"]=Tt.slider_image_border_width+"px",i["border-color"]=Tt.slider_image_border_color,i["border-radius"]=Tt.slider_image_border_radius),"image"!=t&&1==Tt.slider_video_constantsize&&(i["background-color"]="#000000"),1==Tt.slider_image_shadow&&(i["box-shadow"]="3px 3px 10px 0px #353535"),e.css(i)}function c(e,t){var i=Tt.slider_video_constantsize_width,n=Tt.slider_video_constantsize_height,r=Tt.slider_video_constantsize_scalemode;wt.scaleImageExactSizeInParent(e,t.imageWidth,t.imageHeight,i,n,r)}function h(e,t,i){var n=e.children(".ug-item-wrapper"),r=K(e),o=t.urlImage,a=e.data("urlImage");e.data("urlImage",o);var s=ht.getScaleMode(e),l=ht.getSlideType(e);if(objPadding=ht.getObjImagePadding(),a==o&&i!==!0){var u=n.children("img");(0==t.imageWidth||0==t.imageHeight)&&ft.checkFillImageSize(u,t),"image"!=l&&1==Tt.slider_video_constantsize?c(u,t):wt.scaleImageFitParent(u,t.imageWidth,t.imageHeight,s,objPadding),pt.trigger(ht.events.AFTER_PUT_IMAGE,e)
}else u=wt.placeImageInsideParent(o,n,t.imageWidth,t.imageHeight,s,objPadding),1==t.isBigImageLoaded?(u.fadeTo(0,1),_(r),"image"!=l&&1==Tt.slider_video_constantsize&&c(u,t),pt.trigger(ht.events.AFTER_PUT_IMAGE,e)):(u.fadeTo(0,0),d(r),e.data("isLoading",!0),ht.isSlideCurrent(e)&&pt.trigger(ht.events.CURRENTSLIDE_LOAD_START),u.data("itemIndex",t.index),u.on("load",function(){var e=jQuery(this),t=e.data("itemIndex");e.fadeTo(0,1);var i=e.parent().parent(),n=ht.getSlideType(i),r=K(i),o=ht.getObjImagePadding(),a=ht.getScaleMode(i);_(r),i.data("isLoading",!1),ht.isSlideCurrent(i)&&pt.trigger(ht.events.CURRENTSLIDE_LOAD_END),ft.onItemBigImageLoaded(null,e);var s=ft.getItem(t);"image"!=n&&1==Tt.slider_video_constantsize?c(e,s):wt.scaleImageFitParent(e,s.imageWidth,s.imageHeight,a,o),e.fadeTo(0,1),pt.trigger(ht.events.AFTER_PUT_IMAGE,i)}));u&&g(u,l)}function p(e,t){try{var i=e.children(".ug-item-wrapper");if(null==t)return i.html(""),e.removeData("index"),e.removeData("type"),e.removeData("urlImage"),!1;{e.data("index")}e.data("index",t.index),e.data("type",t.type),1==Tt.slider_enable_links&&"image"==t.type&&(t.link?e.addClass("ug-slide-clickable"):e.removeClass("ug-slide-clickable")),h(e,t);var n=J(e);switch(t.type){case"image":n.hide();break;default:n.show()}}catch(r){throw i.html(""),new Error(r)}}function f(){if(!Et)return!1;if(1==v())return!1;var e=Et.getElement(),t=0;(1==Pt.isTextPanelSaparateHover||1==Tt.slider_textpanel_always_on)&&(t=Tt.slider_controls_appear_duration),e.stop().fadeTo(t,0),e.data("isHidden",!0)}function m(){if(!Et)return!1;if(0==v())return!1;var e=Et.getElement(),t=0;(1==Pt.isTextPanelSaparateHover||1==Tt.slider_textpanel_always_on)&&(e.show(),Et.positionElements(),t=Tt.slider_controls_appear_duration),e.stop().show().fadeTo(t,1),e.data("isHidden",!1)}function v(){var e=Et.getElement(),t=e.data("isHidden");return t===!1?!1:!0}function b(e,t){if(void 0==t)var t=ht.getCurrentSlide();var i=ht.getSlideType(t);if(i!=e)throw new Error("Wrong slide type: "+i+", should be: "+e);return!0}function y(){var e=ht.getCurrentSlide(),t=ht.getSlideImage(e),i=wt.getElementSize(e),n=i.left,r=i.top;if(1==Tt.slider_video_constantsize){var o=wt.getElementSize(t);n+=o.left,r+=o.top}else n+=Tt.slider_video_padding_left,r+=Tt.slider_video_padding_top;yt.setPosition(n,r)}function w(){var e=Tt.slider_video_constantsize_width,t=Tt.slider_video_constantsize_height;yt.setSize(e,t);var i=yt.getObject();g(i)}function I(e,t,i){pt.trigger(ht.events.TRANSITION_START);var n=Tt.slider_transition;switch(i&&(n=i),ht.stopSlideAction(null,!0),n){default:case"fade":S(t);break;case"slide":E(e,t);break;case"lightbox_open":S(t,!1,!0)}}function E(e,t){var i=ht.isAnimating();if(1==i)return Pt.itemWaiting=t,!0;null!=Pt.itemWaiting&&(Pt.itemWaiting=null);var n=ht.getSlidesReference();switch(e){case"right":p(n.objPrevSlide,t),l();var r=wt.getElementSize(n.objPrevSlide),o=-r.left;ht.switchSlideNums("right");break;case"left":p(n.objNextSlide,t),l();var a=wt.getElementSize(n.objNextSlide),o=-a.left;ht.switchSlideNums("left");break;default:throw new Error("wrong direction: "+e)}var s=Tt.slider_transition_speed,u=Tt.slider_transition_easing,d={duration:s,easing:u,queue:!1,always:function(){if(ht.stopSlideAction(),yt.hide(),null!=Pt.itemWaiting){var e=q(Pt.itemWaiting);E(e,Pt.itemWaiting)}else ht.placeNabourItems(),pt.trigger(ht.events.TRANSITION_END)}};rt.animate({left:o+"px"},d)}function T(e,t,i){i?e.fadeTo(Tt.slider_transition_speed,t,i):e.fadeTo(Tt.slider_transition_speed,t)}function S(e,t,i){if(!t)var t=!1;var n=ht.getSlidesReference();p(n.objNextSlide,e);var r=wt.getElementSize(n.objCurrentSlide);wt.placeElement(n.objNextSlide,r.left,r.top);var o=Pt.numCurrent;if(Pt.numCurrent=Pt.numNext,Pt.numNext=o,pt.trigger(ht.events.ITEM_CHANGED),n.objNextSlide.stop(!0),n.objCurrentSlide.stop(!0),1==t)n.objCurrentSlide.fadeTo(0,0),n.objNextSlide.fadeTo(0,1),ht.placeNabourItems(),pt.trigger(ht.events.TRANSITION_END),i!==!0&&yt.hide();else{if(n.objNextSlide.fadeTo(0,0),T(n.objCurrentSlide,0,function(){ht.placeNabourItems(),pt.trigger(ht.events.TRANSITION_END),i!==!0&&yt.hide()}),1==yt.isVisible()){var a=yt.getObject();T(a,0)}T(n.objNextSlide,1)}}function P(){1==Tt.slider_fullscreen_button_mobilehide&&vt&&vt.hide(),1==Tt.slider_play_button_mobilehide&&mt&&mt.hide(),1==Tt.slider_zoompanel_mobilehide&&gt&&gt.getElement().hide()}function x(){1==Tt.slider_fullscreen_button_mobilehide&&vt&&vt.show(),1==Tt.slider_play_button_mobilehide&&mt&&mt.show(),1==Tt.slider_zoompanel_mobilehide&&gt&&gt.getElement().show()}function j(){var e=ft.isMobileMode();e?P():x()}function C(){var e=nt.children(".ug-slider-control");return e}function A(e){if(0==wt.isTimePassed("sliderControlsToggle"))return!1;if(0==Pt.isControlsVisible)return!1;if(!e)var e=!1;var t=C();e===!0?t.stop().fadeTo(0,0).hide():t.stop().fadeTo(Tt.slider_controls_appear_duration,0,function(){t.hide()}),Pt.isControlsVisible=!1}function M(e){if(0==wt.isTimePassed("sliderControlsToggle"))return!1;if(1==Pt.isControlsVisible)return!0;if(!e)var e=!1;var t=C();e===!0?t.stop().show():(t.stop().show().fadeTo(0,0),t.fadeTo(Tt.slider_controls_appear_duration,1)),Pt.isControlsVisible=!0}function O(){0==Pt.isControlsVisible?M():A()}function z(e){if(e==Pt.currentControlsMode)return!1;switch(e){case"image":gt&&gt.getElement().show();break;case"video":gt&&gt.getElement().hide();break;default:throw new Error("wrong controld mode: "+e)}Pt.currentControlsMode=e}function N(){var e=ft.getSelectedItem();ht.setItem(e);var t=e.index;bt&&bt.setActive(t),Et&&0==Pt.isTextPanelSaparateHover&&m(),z("image"==e.type?"image":"video")}function k(e,t){ft.selectItem(t)}function L(e){return dt&&0==dt.isTapEventOccured(e)?!0:void pt.trigger(ht.events.CLICK,e)}function R(){var e=ht.getCurrentSlide(),t=e.hasClass("ug-slide-clickable"),i=ht.getCurrentItem();return t?(0==Tt.slider_links_newpage?location.href=i.link:window.open(i.link,"_blank"),!0):void(0==Tt.slider_controls_always_on&&1==Tt.slider_controls_appear_ontap&&1==ht.isCurrentSlideType("image")&&(O(),Et&&1==Tt.slider_textpanel_always_on&&ht.isCurrentSlideType("image")&&ht.isCurrentSlideImageFit()&&m()))}function Q(){Et&&ht.isCurrentSlideType("image")&&0==ht.isCurrentSlideImageFit()&&f()}function H(){M()}function G(){A()}function D(e){var t=e.parent();ht.startSlideAction(t)}function F(){ft.isPlayMode()&&ft.pausePlaying(),pt.trigger(ht.events.ACTION_START)}function W(){ft.isPlayMode()&&ft.continuePlaying(),pt.trigger(ht.events.ACTION_END)}function B(e,t){ot.data("index")==t&&(objItem=ft.getItem(t),h(ot,objItem,!0)),at.data("index")==t&&(objItem=ft.getItem(t),h(at,objItem,!0)),st.data("index")==t&&(objItem=ft.getItem(t),h(st,objItem,!0))}function Y(e,t){t=jQuery(t);var i=ht.getSlideImage(t),n=J(t),r=wt.getElementSize(i);wt.placeElement(n,"center","middle",r.left,r.top,i)}function U(e){var t=J(e);wt.addClassOnHover(t),wt.setButtonOnClick(t,D)}function X(){et.on(ft.events.ITEM_IMAGE_UPDATED,B),et.on(ft.events.ITEM_CHANGE,N),bt&&jQuery(bt).on(bt.events.BULLET_CLICK,k),1==Tt.slider_enable_arrows&&(wt.addClassOnHover(ut,"ug-arrow-hover"),wt.addClassOnHover(lt,"ug-arrow-hover"),ft.setNextButton(ut),ft.setPrevButton(lt)),0==Tt.slider_controls_always_on&&nt.hover(H,G),nt.on("touchend click",L),pt.on(ht.events.CLICK,R),Et&&1==Pt.isTextPanelSaparateHover&&nt.hover(m,f),mt&&(wt.addClassOnHover(mt,"ug-button-hover"),ft.setPlayButton(mt)),vt&&(wt.addClassOnHover(vt,"ug-button-hover"),ft.setFullScreenToggleButton(vt)),_t&&pt.on(ht.events.ZOOM_CHANGE,Q),gt&&gt.initEvents(),yt.initEvents(),jQuery(yt).on(yt.events.SHOW,F),jQuery(yt).on(yt.events.HIDE,W),U(ot),U(at),U(st),pt.on(ht.events.AFTER_PUT_IMAGE,Y),nt.delegate(".ug-item-wrapper img","mouseenter",function(){pt.trigger(ht.events.IMAGE_MOUSEENTER)}),nt.delegate(".ug-item-wrapper img","mouseleave",function(e){var t=ht.isMouseInsideSlideImage(e);0==t&&pt.trigger(ht.events.IMAGE_MOUSELEAVE)})}function V(){var e;switch(Tt.slider_loader_type){default:case 1:e="ug-loader1";break;case 2:e="ug-loader2";break;case 3:e="ug-loader3";break;case 4:e="ug-loader4";break;case 5:e="ug-loader5";break;case 6:e="ug-loader6";break;case 7:e="ug-loader7";break;case 8:e="ug-loader8";break;case 9:e="ug-loader9"}return"black"==Tt.slider_loader_color&&(e+=" ug-loader-black"),e}function Z(e){switch(e){case 1:return ot;case 2:return at;case 3:return st;default:throw new Error("wrong num: "+e)}}function q(e){var t=ht.getSlidesReference(),i=t.objCurrentSlide.data("index"),n=e.index,r="left";return i>n&&(r="right"),r}function K(e){if(!e)var e=ht.getCurrentSlide();var t=e.children(".ug-slider-preloader");return t}function J(e){var t=e.children(".ug-button-videoplay");return t}function $(e){if(!e)var e=ht.getCurrentSlide();var t=e.data("index");if(void 0==t)return null;var i=ft.getItem(t);return i}var et,tt,it,nt,rt,ot,at,st,lt,ut,dt,_t,gt,ct,ht=this,pt=jQuery(ht),ft=new UniteGalleryMain,mt=null,vt=null,bt=null,yt=new UGVideoPlayer,wt=new UGFunctions,It=null,Et=null;this.events={ITEM_CHANGED:"item_changed",BEFORE_SWITCH_SLIDES:"before_switch",BEFORE_RETURN:"before_return",AFTER_RETURN:"after_return",ZOOM_START:"slider_zoom_start",ZOOM_END:"slider_zoom_end",ZOOMING:"slider_zooming",ZOOM_CHANGE:"slider_zoom_change",START_DRAG:"start_drag",AFTER_DRAG_CHANGE:"after_drag_change",ACTION_START:"action_start",ACTION_END:"action_end",CLICK:"slider_click",TRANSITION_START:"slider_transition_start",TRANSITION_END:"slider_transition_end",AFTER_PUT_IMAGE:"after_put_image",IMAGE_MOUSEENTER:"slider_image_mouseenter",IMAGE_MOUSELEAVE:"slider_image_mouseleave",CURRENTSLIDE_LOAD_START:"slider_current_loadstart",CURRENTSLIDE_LOAD_END:"slider_current_loadend"};var Tt={slider_scale_mode:"fill",slider_scale_mode_media:"fill",slider_scale_mode_fullscreen:"down",slider_item_padding_top:0,slider_item_padding_bottom:0,slider_item_padding_left:0,slider_item_padding_right:0,slider_background_color:"",slider_background_opacity:1,slider_image_padding_top:0,slider_image_padding_bottom:0,slider_image_padding_left:0,slider_image_padding_right:0,slider_image_border:!1,slider_image_border_width:10,slider_image_border_color:"#ffffff",slider_image_border_radius:0,slider_image_shadow:!1,slider_video_constantsize:!1,slider_video_constantsize_scalemode:"fit",slider_video_constantsize_width:854,slider_video_constantsize_height:480,slider_video_padding_top:0,slider_video_padding_bottom:0,slider_video_padding_left:0,slider_video_padding_right:0,slider_video_enable_closebutton:!0,slider_transition:"slide",slider_transition_speed:300,slider_transition_easing:"easeInOutQuad",slider_control_swipe:!0,slider_control_zoom:!0,slider_zoom_mousewheel:!0,slider_vertical_scroll_ondrag:!1,slider_loader_type:1,slider_loader_color:"white",slider_enable_links:!0,slider_links_newpage:!1,slider_enable_bullets:!1,slider_bullets_skin:"",slider_bullets_space_between:-1,slider_bullets_align_hor:"center",slider_bullets_align_vert:"bottom",slider_bullets_offset_hor:0,slider_bullets_offset_vert:10,slider_enable_arrows:!0,slider_arrows_skin:"",slider_arrow_left_align_hor:"left",slider_arrow_left_align_vert:"middle",slider_arrow_left_offset_hor:20,slider_arrow_left_offset_vert:0,slider_arrow_right_align_hor:"right",slider_arrow_right_align_vert:"middle",slider_arrow_right_offset_hor:20,slider_arrow_right_offset_vert:0,slider_enable_progress_indicator:!0,slider_progress_indicator_type:"pie",slider_progress_indicator_align_hor:"right",slider_progress_indicator_align_vert:"top",slider_progress_indicator_offset_hor:10,slider_progress_indicator_offset_vert:10,slider_enable_play_button:!0,slider_play_button_skin:"",slider_play_button_align_hor:"left",slider_play_button_align_vert:"top",slider_play_button_offset_hor:40,slider_play_button_offset_vert:8,slider_play_button_mobilehide:!1,slider_enable_fullscreen_button:!0,slider_fullscreen_button_skin:"",slider_fullscreen_button_align_hor:"left",slider_fullscreen_button_align_vert:"top",slider_fullscreen_button_offset_hor:11,slider_fullscreen_button_offset_vert:9,slider_fullscreen_button_mobilehide:!1,slider_enable_zoom_panel:!0,slider_zoompanel_skin:"",slider_zoompanel_align_hor:"left",slider_zoompanel_align_vert:"top",slider_zoompanel_offset_hor:12,slider_zoompanel_offset_vert:92,slider_zoompanel_mobilehide:!1,slider_controls_always_on:!1,slider_controls_appear_ontap:!0,slider_controls_appear_duration:300,slider_enable_text_panel:!0,slider_textpanel_always_on:!0,slider_videoplay_button_type:"square"},St={slider_progress_indicator_align_hor:"left",slider_progress_indicator_align_vert:"bottom",slider_progress_indicator_offset_hor:0,slider_progress_indicator_offset_vert:0},Pt={isRunOnce:!1,isTextPanelSaparateHover:!1,numPrev:1,numCurrent:2,numNext:3,isControlsVisible:!0,currentControlsMode:"image"};this.switchSlideNums=function(e){switch(pt.trigger(ht.events.BEFORE_SWITCH_SLIDES),e){case"left":var t=Pt.numCurrent;Pt.numCurrent=Pt.numNext,Pt.numNext=Pt.numPrev,Pt.numPrev=t;break;case"right":var t=Pt.numCurrent;Pt.numCurrent=Pt.numPrev,Pt.numPrev=Pt.numNext,Pt.numNext=t;break;default:throw new Error("wrong direction: "+e)}pt.trigger(ht.events.ITEM_CHANGED)},this.destroy=function(){pt.off(ht.events.AFTER_PUT_IMAGE),et.off(ft.events.ITEM_IMAGE_UPDATED),et.off(ft.events.ITEM_CHANGE),bt&&jQuery(bt).on(bt.events.BULLET_CLICK),nt.off("mouseenter"),nt.off("mouseleave"),nt.off("touchend"),nt.off("click"),pt.off(ht.events.CLICK),_t&&pt.off(ht.events.ZOOM_CHANGE),pt.off(ht.events.BEFORE_SWITCH_SLIDES),jQuery(yt).off(yt.events.SHOW),jQuery(yt).off(yt.events.HIDE),yt.destroy(),nt.undelegate(".ug-item-wrapper img","mouseenter"),nt.undelegate(".ug-item-wrapper img","mouseleave")},this.________EXTERNAL_GENERAL___________=function(){},this.init=function(t,i,n){e(t,i,n)},this.getSlideImage=function(e){if(!e)var e=ht.getCurrentSlide();var t=e.find(".ug-item-wrapper img");return t},this.setHtml=function(e){r(e)},this.run=function(){t()},this.isInnerInPlace=function(){var e=ht.getSlidesReference(),t=wt.getElementSize(e.objCurrentSlide),i=-t.left,n=wt.getElementSize(rt);return i==n.left?!0:!1},this.isAnimating=function(){var e=rt.is(":animated");return e},this.isSlideCurrent=function(e){var t=e.data("slidenum");return Pt.numCurrent==t?!0:!1},this.isSlideHasItem=function(e){var t=e.data("index");return void 0===t||null===t?!1:!0},this.getObjImagePadding=function(){var e={padding_top:Tt.slider_image_padding_top,padding_bottom:Tt.slider_image_padding_bottom,padding_left:Tt.slider_image_padding_left,padding_right:Tt.slider_image_padding_right};return e},this.getSlidesReference=function(){var e={objPrevSlide:Z(Pt.numPrev),objNextSlide:Z(Pt.numNext),objCurrentSlide:Z(Pt.numCurrent)};return e},this.getCurrentSlide=function(){var e=ht.getSlidesReference();return e.objCurrentSlide},this.getCurrentItemIndex=function(){var e=ht.getSlidesReference(),t=e.objCurrentSlide.data("index");return(null===t||void 0===t)&&(t=-1),t},this.getCurrentItem=function(){var e=ht.getCurrentItemIndex();if(-1==e)return null;var t=ft.getItem(e);return t},this.getSlideType=function(e){void 0==e&&(e=ht.getCurrentSlide());var t=e.data("type");return t},this.isMouseInsideSlideImage=function(e){var t=ht.getSlideImage(),i=wt.getMousePosition(e);void 0===i.pageX&&(i=dt.getLastMousePos());var n=wt.getMouseElementPoint(i,t),r=wt.getElementSize(t);return isMouseInside=wt.isPointInsideElement(n,r)},this.isCurrentSlideType=function(e){var t=ht.getSlideType();return t==e?!0:!1},this.isCurrentSlideLoadingImage=function(){var e=ht.getCurrentSlide(),t=e.data("isLoading");return t===!0?!0:!1},this.setItem=function(e,t){var i=ht.getSlidesReference(),n=i.objCurrentSlide.data("index"),r=e.index;if(r==n)return!0;var o=void 0==n;if(o)p(i.objCurrentSlide,e),ht.placeNabourItems();else{var a="left",s=ft.getNumItems();n==s-1&&0==r?a="left":0==n&&r==s-1?a="right":n>r&&(a="right"),I(a,e,t)}},this.placeNabourItems=function(){var e=ht.getSlidesReference(),t=e.objCurrentSlide.data("index"),i=ft.getPrevItem(t),n=ft.getNextItem(t);p(e.objNextSlide,n),p(e.objPrevSlide,i),l()},this.________EXTERNAL_API___________=function(){},this.stopSlideAction=function(e,t){e||(e=ht.getCurrentSlide()),t===!0?yt.pause():yt.hide()},this.startSlideAction=function(e){e||(e=ht.getCurrentSlide());var t=$(e);if("image"==t.type)return!0;switch(1==Tt.slider_video_constantsize&&w(),y(),yt.show(),t.type){case"youtube":yt.playYoutube(t.videoid);break;case"vimeo":yt.playVimeo(t.videoid);break;case"html5video":yt.playHtml5Video(t.videoogv,t.videowebm,t.videomp4,t.urlImage);break;case"soundcloud":yt.playSoundCloud(t.trackid);break;case"wistia":yt.playWistia(t.videoid)}},this.getScaleMode=function(e){if(!e)var e=ht.getCurrentSlide();var t=ht.getSlideType(e);return"image"!=t?Tt.slider_scale_mode_media:Tt.slider_scale_mode==Tt.slider_scale_mode_fullscreen?Tt.slider_scale_mode:1==ft.isFullScreen()?Tt.slider_scale_mode_fullscreen:Tt.slider_scale_mode},this.getObjects=function(){var e={g_objSlider:nt,g_objInner:rt,g_options:Tt,g_objZoomSlider:_t};return e},this.getObjZoom=function(){return _t},this.getOptions=function(){return Tt},this.getElement=function(){return nt},this.getVideoObject=function(){return yt},this.isCurrentSlideImageFit=function(){{var e=ht.getCurrentSlide();ht.getSlideType(e)}b("image",e);var t=ht.getSlideImage(e);if(0==t.length)return!1;var i=wt.isImageFitParent(t);return i},this.isCurrentImageInPlace=function(){var e=ht.getSlideImage();if(0==e.length)return!1;var t=ht.getScaleMode(),i=ht.getObjImagePadding(),n=$(),r=e.parent(),o=wt.getImageInsideParentData(r,n.imageWidth,n.imageHeight,t,i),a=wt.getElementSize(e);return o.imageWidth==a.width?!0:!1},this.isSlideActionActive=function(){return yt.isVisible()},this.isSwiping=function(){if(!dt)return!1;var e=dt.isTouchActive();return e},this.isPreloading=function(){var e=K();return e.is(":visible")?!0:!1},this.setOptions=function(e){ct&&(e=wt.convertCustomPrefixOptions(e,ct,"slider")),Tt=jQuery.extend(Tt,e)},this.setSize=function(e,t){if(0>e||0>t)return!0;var i={};i.width=e+"px",i.height=t+"px",nt.css(i);var n={};n.height=t+"px",n.top="0px",n.left="0px",rt.css(n);var r={};r.height=t+"px",r.width=e+"px",ot.css(r),at.css(r),st.css(r);var o=e-Tt.slider_item_padding_left-Tt.slider_item_padding_right,s=t-Tt.slider_item_padding_top-Tt.slider_item_padding_bottom,d={};d.width=o+"px",d.height=s+"px",d.top=Tt.slider_item_padding_top+"px",d.left=Tt.slider_item_padding_left+"px",nt.find(".ug-item-wrapper").css(d),Et&&Et.setSizeByParent();var _=ht.getSlideType();if("image"!=_&&1==Tt.slider_video_constantsize)w();else{var g=e-Tt.slider_video_padding_left-Tt.slider_video_padding_right,c=t-Tt.slider_video_padding_top-Tt.slider_video_padding_bottom;yt.setSize(g,c)}a(),u(ot),u(at),u(st),l()},this.refreshSlideItems=function(){return 1==ht.isAnimating()?!0:(u(ot),u(at),u(st),void l())},this.isMouseOver=function(){return nt.ismouseover()},this.setPosition=function(e,t){wt.placeElement(nt,e,t)},this.zoomIn=function(){return _t?void _t.zoomIn():!0},this.zoomOut=function(){return _t?void _t.zoomOut():!0},this.zoomBack=function(){return _t?void _t.zoomBack():!0}}function UGTextPanel(){function e(e,t){if(!t)var t=v.textpanel_padding_top;var i=t;if(d){var n=i;f.placeElement(d,0,n);var o=f.getElementSize(d),i=o.bottom}var a="";if(_&&(a=jQuery.trim(_.text())),""!=a){var s=i;d&&(s+=v.textpanel_padding_title_description),f.placeElement(_,0,s);var l=f.getElementSize(_);i=l.bottom}if(!v.textpanel_height){var u=i+v.textpanel_padding_bottom;r(u,e)}}function t(){var e=0;if(d&&(e+=d.outerHeight()),_){var t="";_&&(t=jQuery.trim(_.text())),""!=t&&(d&&(e+=v.textpanel_padding_title_description),e+=_.outerHeight())}return e}function i(){var i=t(),n=(c.height()-i)/2;e(!1,n)}function n(){var i=t(),n=c.height()-i-v.textpanel_padding_bottom;e(!1,n)}function r(e,t){if(!t)var t=!1;if(1==t){if(g){var i=g.height();e>i&&g.height(e)}var n={height:e+"px"};l.add(c).animate(n,v.textpanel_fade_duration)}else g&&g.height(e),l.add(c).height(e)}function o(){if(1==v.textpanel_enable_bg){g=l.children(".ug-textpanel-bg"),g.fadeTo(0,v.textpanel_bg_opacity);var e={"background-color":v.textpanel_bg_color};e=jQuery.extend(e,v.textpanel_bg_css),g.css(e)}if(1==v.textpanel_enable_title){d=c.children(".ug-textpanel-title");var t={};null!==v.textpanel_title_color&&(t.color=v.textpanel_title_color),null!==v.textpanel_title_font_family&&(t["font-family"]=v.textpanel_title_font_family),null!==v.textpanel_title_text_align&&(t["text-align"]=v.textpanel_title_text_align),null!==v.textpanel_title_font_size&&(t["font-size"]=v.textpanel_title_font_size+"px"),null!==v.textpanel_title_bold&&(t["font-weight"]=v.textpanel_title_bold===!0?"bold":"normal"),v.textpanel_css_title&&(t=jQuery.extend(t,v.textpanel_css_title)),d.css(t)}if(1==v.textpanel_enable_description){_=c.children(".ug-textpanel-description");var i={};null!==v.textpanel_desc_color&&(i.color=v.textpanel_desc_color),null!==v.textpanel_desc_font_family&&(i["font-family"]=v.textpanel_desc_font_family),null!==v.textpanel_desc_text_align&&(i["text-align"]=v.textpanel_desc_text_align),null!==v.textpanel_desc_font_size&&(i["font-size"]=v.textpanel_desc_font_size+"px"),null!==v.textpanel_desc_bold&&(i["font-weight"]=v.textpanel_desc_bold===!0?"bold":"normal"),v.textpanel_css_title&&(i=jQuery.extend(i,v.textpanel_css_description)),_.css(i)}}function a(){var e=h.getSelectedItem();p.setText(e.title,e.description)}function s(){jQuery(h).on(h.events.ITEM_CHANGE,a)}var l,u,d,_,g,c,h,p=this,f=new UGFunctions,m="",v={textpanel_align:"bottom",textpanel_margin:0,textpanel_text_valign:"middle",textpanel_padding_top:10,textpanel_padding_bottom:10,textpanel_height:null,textpanel_padding_title_description:5,textpanel_padding_right:11,textpanel_padding_left:11,textpanel_fade_duration:200,textpanel_enable_title:!0,textpanel_enable_description:!0,textpanel_enable_bg:!0,textpanel_bg_color:"#000000",textpanel_bg_opacity:.4,textpanel_title_color:null,textpanel_title_font_family:null,textpanel_title_text_align:null,textpanel_title_font_size:null,textpanel_title_bold:null,textpanel_css_title:{},textpanel_desc_color:null,textpanel_desc_font_family:null,textpanel_desc_text_align:null,textpanel_desc_font_size:null,textpanel_desc_bold:null,textpanel_css_description:{},textpanel_bg_css:{}},b={isFirstTime:!0};this.positionElements=function(t){if(!v.textpanel_height||"top"==v.textpanel_text_valign)return e(t),!1;switch(v.textpanel_text_valign){default:case"top":e(!1);break;case"bottom":n();break;case"center":case"middle":i()}},this.init=function(e,t,i){if(h=e,i&&(m=i,t=f.convertCustomPrefixOptions(t,m,"textpanel")),t&&(v=jQuery.extend(v,t)),0==v.textpanel_enable_title&&0==v.textpanel_enable_description)throw new Error("Textpanel Error: The title or description must be enabled");v.textpanel_height&&v.textpanel_height<0&&(v.textpanel_height=null)},this.appendHTML=function(e){u=e;var t="<div class='ug-textpanel'>";1==v.textpanel_enable_bg&&(t+="<div class='ug-textpanel-bg'></div>"),t+="<div class='ug-textpanel-textwrapper'>",1==v.textpanel_enable_title&&(t+="<div class='ug-textpanel-title'></div>"),1==v.textpanel_enable_description&&(t+="<div class='ug-textpanel-description'></div>"),t+="</div></div>",e.append(t),l=e.children(".ug-textpanel"),c=l.children(".ug-textpanel-textwrapper"),o()},this.destroy=function(){jQuery(h).off(h.events.ITEM_CHANGE)},this.run=function(){p.setSizeByParent(),s()},this.setPanelSize=function(e){var t=80;v.textpanel_height&&(t=v.textpanel_height),l.width(e),l.height(t),g&&(g.width(e),g.height(t));var i=e-v.textpanel_padding_left-v.textpanel_padding_right,n=v.textpanel_padding_left;f.setElementSizeAndPosition(c,n,0,i,t),d&&d.width(i),_&&_.width(i),0==b.isFirstTime&&p.positionElements(!1)},this.setSizeByParent=function(){var e=f.getElementSize(u);p.setPanelSize(e.width)},this.setTextPlain=function(e,t){d&&d.html(e),_&&_.html(t)},this.setText=function(e,t){1==b.isFirstTime?(p.setTextPlain(e,t),b.isFirstTime=!1,p.positionElements(!1)):c.stop().fadeTo(v.textpanel_fade_duration,0,function(){p.setTextPlain(e,t),p.positionElements(!0),jQuery(this).fadeTo(v.textpanel_fade_duration,1)})},this.positionPanel=function(e,t){var i={};if(void 0!==e&&null!==e)i.top=e;else switch(v.textpanel_align){case"top":i.top=v.textpanel_margin+"px";break;case"bottom":i.top="auto",i.bottom=v.textpanel_margin+"px";break;case"middle":i.top=f.getElementRelativePos(l,"middle",v.textpanel_margin)}void 0!==t&&null!==t&&(i.left=t),l.css(i)},this.setOptions=function(e){m&&(e=f.convertCustomPrefixOptions(e,m,"textpanel")),v=jQuery.extend(v,e)},this.getElement=function(){return l},this.getSize=function(){var e=f.getElementSize(l);return e},this.refresh=function(e,t,i){o(),i?p.setPanelSize(i):p.setSizeByParent(),p.positionElements(!1),t!==!0&&p.positionPanel(),e===!0&&p.show()},this.hide=function(){l.hide()},this.show=function(){l.show()},this.getOptions=function(){return v},this.getOption=function(e){return 0==v.hasOwnProperty(e)?null:v[e]}}function UGZoomButtonsPanel(){function e(e){return e.hasClass("ug-zoompanel-button-disabled")?!0:!1}function t(e){e.addClass("ug-zoompanel-button-disabled")}function i(e){e.removeClass("ug-zoompanel-button-disabled")}function n(){if(0==d.isCurrentSlideType("image"))return!0;var n=d.isCurrentSlideImageFit();1==n?0==e(s)&&(t(s),t(l)):1==e(s)&&(i(s),i(l))}var r,o,a,s,l,u=this,d=new UGSlider,_=new UGFunctions,g={slider_zoompanel_skin:""};this.init=function(e,t){d=e,t&&(g=jQuery.extend(g,t))},this.appendHTML=function(e){o=e;var t="<div class='ug-slider-control ug-zoompanel ug-skin-"+g.slider_zoompanel_skin+"'>";t+="<div class='ug-zoompanel-button ug-zoompanel-plus'></div>",t+="<div class='ug-zoompanel-button ug-zoompanel-minus ug-zoompanel-button-disabled'></div>",t+="<div class='ug-zoompanel-button ug-zoompanel-return ug-zoompanel-button-disabled'></div>",t+="</div>",e.append(t),r=e.children(".ug-zoompanel"),a=r.children(".ug-zoompanel-plus"),s=r.children(".ug-zoompanel-minus"),l=r.children(".ug-zoompanel-return")},this.getElement=function(){return r},u.initEvents=function(){_.addClassOnHover(a,"ug-button-hover"),_.addClassOnHover(s,"ug-button-hover"),_.addClassOnHover(l,"ug-button-hover"),_.setButtonOnClick(a,function(){return 1==e(a)?!0:void d.zoomIn()}),_.setButtonOnClick(s,function(){return 1==e(s)?!0:void d.zoomOut()}),_.setButtonOnClick(l,function(){return 1==e(l)?!0:void d.zoomBack()}),jQuery(d).on(d.events.ZOOM_CHANGE,n),jQuery(d).on(d.events.ITEM_CHANGED,n)}}function UGBullets(){function e(){var e="",t="";-1!=c.bullets_space_between&&(t=" style='margin-left:"+c.bullets_space_between+"px'");for(var i=0;l>i;i++)e+=0==i?"<div class='ug-bullet'></div>":"<div class='ug-bullet'"+t+"></div>";o.html(e)}function t(e){if(1==s.isActive(e))return!0;var t=e.index();jQuery(s).trigger(s.events.BULLET_CLICK,t)}function i(){var e=o.children(".ug-bullet");_.setButtonOnClick(e,t),e.on("mousedown mouseup",function(){return!1})}function n(e){if(0>e||e>=l)throw new Error("wrong bullet index: "+e)}function r(){if(1==g.isInited)return!0;throw new Error("The bullets are not inited!")}var o,a,s=this,l=0,u=new UniteGalleryMain,d=-1,_=new UGFunctions,g={isInited:!1},c={bullets_skin:"",bullets_addclass:"",bullets_space_between:-1};this.events={BULLET_CLICK:"bullet_click"},this.init=function(e,t,i){u=e,l=i?i:u.getNumItems(),g.isInited=!0,c=jQuery.extend(c,t),""==c.bullets_skin&&(c.bullets_skin=c.gallery_skin)},this.appendHTML=function(t){a=t,r();var n="";""!=c.bullets_addclass&&(n=" "+c.bullets_addclass);var s="<div class='ug-slider-control ug-bullets ug-skin-"+c.bullets_skin+n+"'>";s+="</div>",o=jQuery(s),t.append(o),e(),i()},this.updateNumBullets=function(t){l=t,e(),i()},this.getElement=function(){return o},this.setActive=function(e){r(),n(e);var t=o.children(".ug-bullet");t.removeClass("ug-bullet-active");var i=jQuery(t[e]);i.addClass("ug-bullet-active"),d=e},this.isActive=function(e){if(n(e),"number"!=typeof e)var t=e;else var t=o.children(".ug-bullet")[e];return t.hasClass("ug-bullet-active")?!0:!1}}function UGProgressBar(){var e,t,i=this,n=0,r=new UGFunctions,o={slider_progressbar_color:"#ffffff",slider_progressbar_opacity:.6,slider_progressbar_line_width:5};this.put=function(i,n){n&&(o=jQuery.extend(o,n)),i.append("<div class='ug-progress-bar'><div class='ug-progress-bar-inner'></div></div>"),e=i.children(".ug-progress-bar"),t=e.children(".ug-progress-bar-inner"),t.css("background-color",o.slider_progressbar_color),e.height(o.slider_progressbar_line_width),t.height(o.slider_progressbar_line_width),t.width("0%");var r=o.slider_progressbar_opacity,a=t[0];a.style.opacity=r,a.style.filter="alpha(opacity="+100*r+")"},this.putHidden=function(t,n){i.put(t,n),e.hide()},this.getElement=function(){return e},this.setSize=function(n){e.width(n),t.width(n),i.draw()},this.setPosition=function(t,i,n,o){r.placeElement(e,t,i,n,o)},this.draw=function(){var e=100*n;t.width(e+"%")},this.setProgress=function(e){n=r.normalizePercent(e),i.draw()},this.getType=function(){return"bar"}}function UGProgressPie(){function e(e){if(!e)var e=0;var t=Math.min(a.slider_progresspie_width,a.slider_progresspie_height)/2,n=i[0].getContext("2d");0==r&&(r=!0,n.rotate(1.5*Math.PI),n.translate(-2*t,0)),n.clearRect(0,0,a.slider_progresspie_width,a.slider_progresspie_height);var o=a.slider_progresspie_width/2,s=a.slider_progresspie_height/2,l=0,u=e*Math.PI*2;if(1==a.slider_progresspie_type_fill)n.beginPath(),n.moveTo(o,s),n.arc(o,s,t,l,u),n.lineTo(o,s),n.fillStyle=a.slider_progresspie_color1,n.fill(),n.closePath();else{n.globalCompositeOperation="source-over",n.beginPath(),n.moveTo(o,s),n.arc(o,s,t,l,u),n.lineTo(o,s),n.fillStyle=a.slider_progresspie_color1,n.fill(),n.closePath(),n.globalCompositeOperation="destination-out";var d=t-a.slider_progresspie_stroke_width;n.beginPath(),n.moveTo(o,s),n.arc(o,s,d,l,u),n.lineTo(o,s),n.fillStyle=a.slider_progresspie_color1,n.fill(),n.closePath()}1==a.slider_progresspie_type_fill&&(l=u,u=2*Math.PI,n.beginPath(),n.arc(o,s,t,l,u),n.lineTo(o,s),n.fillStyle=a.slider_progresspie_color2,n.fill(),n.closePath())}var t,i,n=this,r=!1,o=new UGFunctions,a={slider_progresspie_type_fill:!1,slider_progresspie_color1:"#B5B5B5",slider_progresspie_color2:"#E5E5E5",slider_progresspie_stroke_width:6,slider_progresspie_width:30,slider_progresspie_height:30};this.put=function(e,t){t&&(a=jQuery.extend(a,t)),e.append("<canvas class='ug-canvas-pie' width='"+a.slider_progresspie_width+"' height='"+a.slider_progresspie_height+"'></canvas>"),i=e.children(".ug-canvas-pie")},this.putHidden=function(t,r){n.put(t,r),e(.1),i.hide()},this.getElement=function(){return i},this.setPosition=function(e,t){o.placeElement(i,e,t)},this.getSize=function(){var e={width:a.slider_progresspie_width,height:a.slider_progresspie_height};return e},this.setProgress=function(i){i=o.normalizePercent(i),t=i,e(i)},this.getType=function(){return"pie"}}function UGStripPanel(){function e(e,t){T=e,m=jQuery(T),j=jQuery.extend(j,t);var i=!1;1==j.strippanel_vertical_type&&(j=jQuery.extend(j,C),i=!0),0==j.strippanel_enable_buttons&&(j=jQuery.extend(j,A),i=!0),1==i&&(j=jQuery.extend(j,t));var n=T.getOptions(),r=n.gallery_skin;""==j.strippanel_buttons_skin&&(j.strippanel_buttons_skin=r),v=T.getElement(),x.init(T,M,I,j,E),T.initThumbsPanel("strip",j);var o=T.getObjects();P=o.g_objThumbs}function t(){if(0==j.strippanel_vertical_type){if(0==M.panelWidth)throw new Error("Strip panel error: The width not set, please set width")}else if(0==M.panelHeight)throw new Error("Strip panel error: The height not set, please set height");if(null==M.orientation)throw new Error("Wrong orientation, please set panel orientation before run");return!0}function i(){return 1==M.isFirstRun&&0==t()?!1:(P.run(),s(),d(),f(),M.isFirstRun=!1,void c())}function n(e){if(!e)var e=v;if(e.append("<div class='ug-strip-panel'></div>"),b=e.children(".ug-strip-panel"),1==j.strippanel_enable_buttons){var t="ug-strip-arrow-left",i="ug-strip-arrow-right";1==j.strippanel_vertical_type&&(t="ug-strip-arrow-up",i="ug-strip-arrow-down"),b.append("<div class='ug-strip-arrow "+t+" ug-skin-"+j.strippanel_buttons_skin+"'><div class='ug-strip-arrow-tip'></div></div>"),b.append("<div class='ug-strip-arrow "+i+" ug-skin-"+j.strippanel_buttons_skin+"'><div class='ug-strip-arrow-tip'></div></div>")
}x.setHtml(b),P.setHtml(b),1==j.strippanel_enable_buttons&&(w=b.children("."+t),y=b.children("."+i)),r()}function r(){""!=j.strippanel_background_color&&b.css("background-color",j.strippanel_background_color)}function o(){var e=P.getHeight(),t=M.panelWidth;if(y){w.height(e),y.height(e);var i=w.children(".ug-strip-arrow-tip");S.placeElement(i,"center","middle");var n=y.children(".ug-strip-arrow-tip");S.placeElement(n,"center","middle")}var r=e+j.strippanel_padding_top+j.strippanel_padding_bottom;b.width(t),b.height(r),M.panelHeight=r;var o=t-j.strippanel_padding_left-j.strippanel_padding_right;if(y){var a=y.outerWidth();o=o-2*a-2*j.strippanel_padding_buttons}P.resize(o)}function a(){var e=P.getWidth(),t=M.panelHeight;if(y){w.width(e),y.width(e);var i=w.children(".ug-strip-arrow-tip");S.placeElement(i,"center","middle");var n=y.children(".ug-strip-arrow-tip");S.placeElement(n,"center","middle")}var r=e+j.strippanel_padding_left+j.strippanel_padding_right;b.width(r),b.height(t),M.panelWidth=r;var o=t-j.strippanel_padding_top-j.strippanel_padding_bottom;if(y){var a=y.outerHeight();o=o-2*a-2*j.strippanel_padding_buttons}P.resize(o)}function s(){0==j.strippanel_vertical_type?o():a()}function l(){y&&(S.placeElement(w,"left","top",j.strippanel_padding_left,j.strippanel_padding_top),S.placeElement(y,"right","top",j.strippanel_padding_right,j.strippanel_padding_top));var e=j.strippanel_padding_left;y&&(e+=y.outerWidth()+j.strippanel_padding_buttons),P.setPosition(e,j.strippanel_padding_top)}function u(){y&&(S.placeElement(w,"left","top",j.strippanel_padding_left,j.strippanel_padding_top),S.placeElement(y,"left","bottom",j.strippanel_padding_left,j.strippanel_padding_bottom));var e=j.strippanel_padding_top;y&&(e+=y.outerHeight()+j.strippanel_padding_buttons),P.setPosition(j.strippanel_padding_left,e)}function d(){0==j.strippanel_vertical_type?l():u(),x.placeElements()}function _(e){return S.isButtonDisabled(e)?!0:void("advance_item"==j.strippanel_buttons_role?T.nextItem():P.scrollForeward())}function g(e){return S.isButtonDisabled(e)?!0:void("advance_item"==j.strippanel_buttons_role?T.prevItem():P.scrollBack())}function c(){if(!y)return!0;if(0==P.isMoveEnabled())return S.disableButton(w),S.disableButton(y),!0;var e=P.getInnerStripLimits(),t=P.getInnerStripPos();t>=e.maxPos?S.disableButton(w):S.enableButton(w),t<=e.minPos?S.disableButton(y):S.enableButton(y)}function h(){c()}function p(){T.isLastItem()?S.disableButton(y):S.enableButton(y),T.isFirstItem()?S.disableButton(w):S.enableButton(w)}function f(){if(1==M.isEventsInited)return!1;if(M.isEventsInited=!0,y)if(S.addClassOnHover(y,"ug-button-hover"),S.addClassOnHover(w,"ug-button-hover"),S.setButtonOnClick(w,g),S.setButtonOnClick(y,_),"advance_item"!=j.strippanel_buttons_role)jQuery(P).on(P.events.STRIP_MOVE,h),m.on(T.events.SIZE_CHANGE,c);else{var e=T.getOptions();0==e.gallery_carousel&&jQuery(T).on(T.events.ITEM_CHANGE,p)}x.initEvents()}var m,v,b,y,w,I=this,E=jQuery(this),T=new UniteGalleryMain,S=new UGFunctions,P=new UGThumbsStrip,x=new UGPanelsBase;this.events={FINISH_MOVE:"gridpanel_move_finish",OPEN_PANEL:"open_panel",CLOSE_PANEL:"close_panel"};var j={strippanel_vertical_type:!1,strippanel_padding_top:8,strippanel_padding_bottom:8,strippanel_padding_left:0,strippanel_padding_right:0,strippanel_enable_buttons:!0,strippanel_buttons_skin:"",strippanel_padding_buttons:2,strippanel_buttons_role:"scroll_strip",strippanel_enable_handle:!0,strippanel_handle_align:"top",strippanel_handle_offset:0,strippanel_handle_skin:"",strippanel_background_color:""},C={strip_vertical_type:!0,strippanel_padding_left:8,strippanel_padding_right:8,strippanel_padding_top:0,strippanel_padding_bottom:0},A={strippanel_padding_left:8,strippanel_padding_right:8,strippanel_padding_top:8,strippanel_padding_bottom:8},M={panelType:"strip",panelWidth:0,panelHeight:0,isEventsInited:!1,isClosed:!1,orientation:null,originalPos:null,isFirstRun:!0};this.destroy=function(){y&&(S.destroyButton(y),S.destroyButton(w),jQuery(P).off(P.events.STRIP_MOVE),jQuery(T).off(T.events.ITEM_CHANGE),jQuery(T).off(T.events.SIZE_CHANGE)),x.destroy(),P.destroy()},this.getOrientation=function(){return M.orientation},this.setOrientation=function(e){M.orientation=e},this.init=function(t,i){e(t,i)},this.run=function(){i()},this.setHtml=function(e){n(e)},this.getElement=function(){return b},this.getSize=function(){var e=S.getElementSize(b);return e},this.setWidth=function(e){M.panelWidth=e},this.setHeight=function(e){M.panelHeight=e},this.resize=function(e){I.setWidth(e),s(),d()},this.__________Functions_From_Base_____=function(){},this.isPanelClosed=function(){return x.isPanelClosed()},this.getClosedPanelDest=function(){return x.getClosedPanelDest()},this.openPanel=function(e){x.openPanel(e)},this.closePanel=function(e){x.closePanel(e)},this.setOpenedState=function(e){x.setOpenedState(e)},this.setClosedState=function(e){x.setClosedState(e)},this.setCustomThumbs=function(e){P.setCustomThumbs(e)},this.setDisabledAtStart=function(e){x.setDisabledAtStart(e)}}function UGTabs(){function e(e,t){s=e,o=jQuery(s),l=jQuery.extend(l,t),a=jQuery(l.tabs_container+" .ug-tab")}function t(){r()}function i(e){s.requestNewItems(e)}function n(){var e=l.tabs_class_selected,t=jQuery(this);if(t.hasClass(e))return!0;a.not(t).removeClass(e),t.addClass(e);var n=t.data("catid");return n?void i(n):!0}function r(){a.click(n)}var o,a,s=(jQuery(this),new UniteGalleryMain),l=(new UGFunctions,{tabs_container:"#ug_tabs",tabs_class_selected:"ug-tab-selected"});this.events={},this.init=function(t,i){e(t,i)},this.run=function(){t()}}function UGThumbsGeneral(){function e(e,t,i,n){var r={width:e+"px",height:t+"px"},o={width:e-j.thumbInnerReduce+"px",height:t-j.thumbInnerReduce+"px"},a=".ug-thumb-loader, .ug-thumb-error, .ug-thumb-border-overlay, .ug-thumb-overlay";i?(n!==!0&&i.css(r),i.children(a).css(o)):(I.children(".ug-thumb-wrapper").css(r),I.find(a).css(o))}function t(e,t,i,n){if(!n)var n=!1;S.isFakeFullscreen()&&(n=!0);var r=e.children(".ug-thumb-border-overlay"),o={};o["border-width"]=t+"px",0!=t&&(o["border-color"]=i),n&&n===!0?(r.css(o),0==t?r.hide():r.show()):(0==t?r.stop().fadeOut(x.thumb_transition_duration):r.show().stop().fadeIn(x.thumb_transition_duration),s(r,o))}function i(e,t,i){var n=e.children(".ug-thumb-overlay"),r=x.thumb_transition_duration;i&&i===!0&&(r=0),t?n.stop(!0).fadeTo(r,j.colorOverlayOpacity):n.stop(!0).fadeTo(r,0)}function n(e,t,i){var n=e.children("img.ug-thumb-image"),r=e.children("img.ug-thumb-image-overlay"),o=x.thumb_transition_duration;i&&i===!0&&(o=0),t?r.stop(!0).fadeTo(o,1):(n.fadeTo(0,1),r.stop(!0).fadeTo(o,0))}function r(e,r){if(j.isEffectBorder&&t(e,x.thumb_selected_border_width,x.thumb_selected_border_color,r),j.isEffectOverlay){var o=1==x.thumb_overlay_reverse?!0:!1;i(e,o,r)}j.isEffectImage&&n(e,!1,r)}function o(e){var t=E.getItemByThumb(e);return t.isLoaded=!0,t.isThumbImageLoaded=!1,1==j.customThumbs?(T.trigger(E.events.IMAGELOADERROR,e),!0):(e.children(".ug-thumb-loader").hide(),void e.children(".ug-thumb-error").show())}function a(){if(x.thumb_round_corners_radius<=0)return!1;var e={"border-radius":x.thumb_round_corners_radius+"px"};I.find(".ug-thumb-wrapper, .ug-thumb-wrapper .ug-thumb-border-overlay").css(e)}function s(e,t){e.stop(!0).animate(t,{duration:x.thumb_transition_duration,easing:x.thumb_transition_easing,queue:!1})}function l(e){1==g(e)?r(e,!0):E.setThumbNormalStyle(e,!0)}function u(t,i){if(1==x.thumb_fixed_size)P.scaleImageCoverParent(i,t);else{"height"==x.thumb_resize_by?P.scaleImageByHeight(i,x.thumb_height):P.scaleImageByWidth(i,x.thumb_width);var n=P.getElementSize(i);P.placeElement(i,0,0),e(n.width,n.height,t)}t.children(".ug-thumb-loader").hide(),i.show(),0==x.thumb_image_overlay_effect?i.fadeTo(0,1):(1==x.thumb_image_overlay_effect&&d(i),i.fadeTo(0,0),l(t)),T.trigger(E.events.AFTERPLACEIMAGE,t)}function d(e){var t=e.siblings(".ug-thumb-image-overlay");if(0==t.length)return!1;var i=P.getElementSize(e),n={width:i.width+"px",height:i.height+"px",left:i.left+"px",top:i.top+"px"};t.css(n),0==j.customThumbs&&t.fadeTo(0,1)}function _(){var e="",t=x.thumb_image_overlay_type.split(",");for(var i in t){var n=t[i];switch(n){case"bw":e+=" ug-bw-effect";break;case"blur":e+=" ug-blur-effect";break;case"sepia":e+=" ug-sepia-effect"}}return e}function g(e){return e.hasClass("ug-thumb-selected")?!0:!1}function c(t,i){i=jQuery(i);var n=(E.getItemByThumb(i),P.getElementSize(i));e(n.width,n.height,i,!0),E.setThumbNormalStyle(i,!0)}function h(e){return 1==j.touchEnabled?(objThumbs.off("mouseenter").off("mouseleave"),!0):void(0==g(e)&&E.setThumbOverStyle(e))}function p(e){return 1==j.touchEnabled?!0:void(0==g(e)&&E.setThumbNormalStyle(e))}function f(e,t){if(!t)var t=!1;var i=jQuery(e),n=i.parent();return 0==n.parent().length?!1:(objItem=E.getItemByThumb(n),1==objItem.isLoaded&&t===!1?!1:(E.triggerImageLoadedEvent(n,i),void(1==j.customThumbs?T.trigger(E.events.PLACEIMAGE,[n,i]):u(n,i,objItem))))}function m(e,t,i){objItem=E.getItemByThumb(t),objItem.isLoaded=!0,objItem.isThumbImageLoaded=!0;var n=P.getImageOriginalSize(i);objItem.thumbWidth=n.width,objItem.thumbHeight=n.height,objItem.thumbRatioByWidth=n.width/n.height,objItem.thumbRatioByHeight=n.height/n.width}var v,b,y,w,I,E=this,T=jQuery(E),S=new UniteGalleryMain,P=new UGFunctions;this.events={SETOVERSTYLE:"thumbmouseover",SETNORMALSTYLE:"thumbmouseout",PLACEIMAGE:"thumbplaceimage",AFTERPLACEIMAGE:"thumb_after_place_image",IMAGELOADERROR:"thumbimageloaderror",THUMB_IMAGE_LOADED:"thumb_image_loaded"};var x={thumb_width:88,thumb_height:50,thumb_fixed_size:!0,thumb_resize_by:"height",thumb_border_effect:!0,thumb_border_width:0,thumb_border_color:"#000000",thumb_over_border_width:0,thumb_over_border_color:"#d9d9d9",thumb_selected_border_width:1,thumb_selected_border_color:"#d9d9d9",thumb_round_corners_radius:0,thumb_color_overlay_effect:!0,thumb_overlay_color:"#000000",thumb_overlay_opacity:.4,thumb_overlay_reverse:!1,thumb_image_overlay_effect:!1,thumb_image_overlay_type:"bw",thumb_transition_duration:200,thumb_transition_easing:"easeOutQuad",thumb_show_loader:!0,thumb_loader_type:"dark",thumb_wrapper_as_link:!1,thumb_link_newpage:!1},j={touchEnabled:!1,num_thumbs_checking:0,customThumbs:!1,funcSetCustomThumbHtml:null,isEffectBorder:!1,isEffectOverlay:!1,isEffectImage:!1,colorOverlayOpacity:1,thumbInnerReduce:0},C={timeout_thumb_check:100,thumb_max_check_times:600,eventSizeChange:"thumb_size_change"};this.init=function(e,t){b=e.getObjects(),S=e,v=jQuery(e),y=b.g_objWrapper,w=b.g_arrItems,x=jQuery.extend(x,t),j.isEffectBorder=x.thumb_border_effect,j.isEffectOverlay=x.thumb_color_overlay_effect,j.isEffectImage=x.thumb_image_overlay_effect},this._____________EXTERNAL_SETTERS__________=function(){},this.setHtmlThumbs=function(e){I=e;var t=S.getNumItems();if(1==j.isEffectImage)var i=_();for(var n=0;t>n;n++){var r=w[n],o="";0==j.customThumbs&&(o=" ug-thumb-generated");var a="<div class='ug-thumb-wrapper"+o+"'></div>";if(1==x.thumb_wrapper_as_link){var s=r.link;""==r.link&&(s="javascript:void(0)");var l="";1==x.thumb_link_newpage&&r.link&&(l=" target='_blank'");var a="<a href='"+s+"'"+l+" class='ug-thumb-wrapper"+o+"'></a>"}var u=jQuery(a),d=r.objThumbImage;if(0==j.customThumbs){if(1==x.thumb_show_loader&&d){var g="ug-thumb-loader-dark";"bright"==x.thumb_loader_type&&(g="ug-thumb-loader-bright"),u.append("<div class='ug-thumb-loader "+g+"'></div>"),u.append("<div class='ug-thumb-error' style='display:none'></div>")}if(d){if(d.addClass("ug-thumb-image"),1==x.thumb_image_overlay_effect){var c=d.clone().appendTo(u);c.addClass("ug-thumb-image-overlay "+i).removeClass("ug-thumb-image"),c.fadeTo(0,0),r.objImageOverlay=c}u.append(d)}}j.isEffectBorder&&u.append("<div class='ug-thumb-border-overlay'></div>"),j.isEffectOverlay&&u.append("<div class='ug-thumb-overlay'></div>"),I.append(u),j.customThumbs&&j.funcSetCustomThumbHtml(u,r),w[n].objThumbWrapper=u}},this.setThumbNormalStyle=function(e,r){if(1==j.customThumbs&&e.removeClass("ug-thumb-over"),j.isEffectBorder&&t(e,x.thumb_border_width,x.thumb_border_color,r),j.isEffectOverlay){var o=1==x.thumb_overlay_reverse?!1:!0;i(e,o,r)}j.isEffectImage&&n(e,!0,r),T.trigger(E.events.SETNORMALSTYLE,e)},this.setThumbOverStyle=function(e){if(1==j.customThumbs&&e.addClass("ug-thumb-over"),j.isEffectBorder&&t(e,x.thumb_over_border_width,x.thumb_over_border_color),j.isEffectOverlay){var r=1==x.thumb_overlay_reverse?!0:!1;i(e,r)}1==j.isEffectImage&&n(e,!1),T.trigger(E.events.SETOVERSTYLE,e)},this.setHtmlProperties=function(){if(0==j.customThumbs){1==x.thumb_fixed_size&&e(x.thumb_width,x.thumb_height),a()}if(I.children(".ug-thumb-wrapper").each(function(){var e=jQuery(this);E.setThumbNormalStyle(e,!0)}),j.isEffectOverlay&&x.thumb_overlay_color){var t={};if(P.isRgbaSupported()){var i=P.convertHexToRGB(x.thumb_overlay_color,x.thumb_overlay_opacity);t["background-color"]=i}else t["background-color"]=x.thumb_overlay_color,j.colorOverlayOpacity=x.thumb_overlay_opacity;I.find(".ug-thumb-wrapper .ug-thumb-overlay").css(t)}},this.setThumbSelected=function(e){return 1==j.customThumbs&&e.removeClass("ug-thumb-over"),1==g(e)?!0:(e.addClass("ug-thumb-selected"),void r(e))},this.setThumbUnselected=function(e){e.removeClass("ug-thumb-selected"),E.setThumbNormalStyle(e)},this.setOptions=function(e){x=jQuery.extend(x,e)},this.setThumbInnerReduce=function(e){j.thumbInnerReduce=e},this.setCustomThumbs=function(e,t){if(j.customThumbs=!0,"function"!=typeof e)throw new Error("The argument should be function");j.funcSetCustomThumbHtml=e,-1==jQuery.inArray("overlay",t)&&(j.isEffectOverlay=!1),-1==jQuery.inArray("border",t)&&(j.isEffectBorder=!1),j.isEffectImage=!1},this._____________EXTERNAL_GETTERS__________=function(){},this.getOptions=function(){return x},this.getNumThumbs=function(){var e=w.length;return e},this.getThumbImage=function(e){var t=e.children(".ug-thumb-image");return t},this.getThumbByIndex=function(e){var t=E.getThumbs();if(e>=t.length||0>e)throw new Error("Wrong thumb index");var i=jQuery(t[e]);return i},this.getThumbs=function(){return I.children(".ug-thumb-wrapper")},this.getItemByThumb=function(e){var t=e.data("index");void 0===t&&(t=e.index());var i=w[t];return i},this.isThumbLoaded=function(e){var t=E.getItemByThumb(e);return t.isLoaded},this._____________EXTERNAL_OTHERS__________=function(){},this.initEvents=function(){var e=I.find(".ug-thumb-wrapper");e.on("touchstart",function(){j.touchEnabled=!0,e.off("mouseenter").off("mouseleave")}),y.on(C.eventSizeChange,c),e.hover(function(){var e=jQuery(this);h(e)},function(){var e=jQuery(this);p(e)}),T.on(E.events.THUMB_IMAGE_LOADED,m)},this.destroy=function(){var e=I.find(".ug-thumb-wrapper");e.off("touchstart"),y.off(C.eventSizeChange),e.off("mouseenter"),e.off("mouseleave"),T.off(E.events.THUMB_IMAGE_LOADED)},this.loadThumbsImages=function(){var e=I.find(".ug-thumb-image");P.checkImagesLoaded(e,null,function(e,t){if(0==t)f(e,!0);else{var i=jQuery(e).parent();o(i)}})},this.triggerImageLoadedEvent=function(e,t){T.trigger(E.events.THUMB_IMAGE_LOADED,[e,t])},this.hideThumbs=function(){I.find(".ug-thumb-wrapper").hide()}}function UGThumbsGrid(){function e(e,t,i){N=e.getObjects(),D=e,z=jQuery(e),k=N.g_objWrapper,L=N.g_arrItems,i===!0&&(U.isTilesMode=!0),U.numThumbs=L.length,u(t),U.isNavigationVertical="top"==Y.grid_panes_direction||"bottom"==Y.grid_panes_direction,1==U.isTilesMode?(B.setFixedMode(),B.setApproveClickFunction(S),B.init(e,Y),W=B.getObjThumbs()):(t.thumb_fixed_size=!0,W.init(e,t))}function t(e){var t=k;e&&(t=e),t.append("<div class='ug-thumbs-grid'><div class='ug-thumbs-grid-inner'></div></div>"),R=t.children(".ug-thumbs-grid"),Q=R.children(".ug-thumbs-grid-inner"),1==U.isTilesMode?B.setHtml(Q):W.setHtmlThumbs(Q)}function n(){if(0==U.isHorizontal){if(0==U.gridHeight)throw new Error("You must set height before run.")}else if(0==U.gridWidth)throw new Error("You must set width before run.")}function r(){var e=D.getSelectedItem();if(n(),1==U.isFirstTimeRun&&(1==U.isTilesMode?(s(),B.run()):(W.setHtmlProperties(),s(),W.loadThumbsImages()),O()),c(),1==U.isFirstTimeRun&&U.isTilesMode){var t=W.getThumbs();t.each(function(e,t){k.trigger(U.eventSizeChange,jQuery(t))}),t.fadeTo(0,1)}null!=e&&l(e.index),G.trigger(H.events.PANE_CHANGE,U.currentPane),U.isFirstTimeRun=!1}function o(){var e=Q.children(".ug-thumb-wrapper"),t=jQuery(e[0]),i=t.outerHeight(),n=U.gridWidth,r=Y.grid_num_rows*i+(Y.grid_num_rows-1)*Y.grid_space_between_rows+2*Y.grid_padding;U.gridHeight=r,F.setElementSize(R,n,r),F.setElementSize(Q,n,r),U.innerWidth=n,U.innerHeight=r}function a(){var e=Q.children(".ug-thumb-wrapper"),t=jQuery(e[0]),i=t.outerWidth(),n=Y.grid_num_cols*i+(Y.grid_num_cols-1)*Y.grid_space_between_cols+2*Y.grid_padding,r=U.gridHeight;U.gridWidth=n,F.setElementSize(R,n,r),F.setElementSize(Q,n,r),U.innerWidth=n,U.innerHeight=r}function s(){0==U.isHorizontal?a():o()}function l(e){var t=I(e);return-1==t?!1:void H.gotoPane(t,"scroll")}function u(e){Y=jQuery.extend(Y,e),W.setOptions(e)}function d(){var e=Q.children(".ug-thumb-wrapper"),t=0,n=0,r=0,o=0,a=0,s=0;U.innerWidth=0,U.numPanes=1,U.arrPanes=[],U.numThumbsInPane=0,U.arrPanes.push(o);var l=e.length;for(i=0;l>i;i++){var u=jQuery(e[i]);F.placeElement(u,t,n);var d=u.outerWidth(),_=u.outerHeight();t>a&&(a=t);var g=n+_;g>s&&(s=g);var c=a+d;c>U.innerWidth&&(U.innerWidth=c),t+=d+Y.grid_space_between_cols,r++,r>=Y.grid_num_cols&&(n+=_+Y.grid_space_between_rows,t=o,r=0),1==U.numPanes&&U.numThumbsInPane++,n+_>U.gridHeight&&(n=0,o=U.innerWidth+Y.grid_space_between_cols,t=o,r=0,1==U.isMaxHeight&&1==U.numPanes&&(U.gridHeight=s,R.height(U.gridHeight)),l-1>i&&(U.numPanes++,U.arrPanes.push(o)))}Q.width(U.innerWidth),1==U.isMaxHeight&&1==U.numPanes&&(U.gridHeight=s,R.height(s))}function _(){var e=Q.children(".ug-thumb-wrapper"),t=0,n=0,r=0,o=0,a=0,s=0;U.innerWidth=0,U.numPanes=1,U.arrPanes=[],U.numThumbsInPane=0,U.arrPanes.push(a);var l=e.length;for(i=0;l>i;i++){var u=jQuery(e[i]);F.placeElement(u,t,n);var d=u.outerWidth(),_=u.outerHeight();t+=d+Y.grid_space_between_cols;var g=n+_;g>r&&(r=g),o++,o>=Y.grid_num_cols&&(n+=_+Y.grid_space_between_rows,t=a,o=0),1==U.numPanes&&U.numThumbsInPane++,g=n+_;var c=s+U.gridHeight;g>c&&(1==U.isMaxHeight&&1==U.numPanes&&(U.gridHeight=r,R.height(U.gridHeight),c=U.gridHeight),n=c+Y.grid_space_between_rows,s=n,a=0,t=a,o=0,l-1>i&&(U.numPanes++,U.arrPanes.push(n)))}Q.height(r),U.innerHeight=r,1==U.isMaxHeight&&1==U.numPanes&&(U.gridHeight=r,R.height(r))}function g(){var e=Q.children(".ug-thumb-wrapper"),t=Y.grid_padding,n=Y.grid_padding,r=n,o=t,a=0,s=0,l=0,u=0;U.innerWidth=0,U.numPanes=1,U.arrPanes=[],U.numThumbsInPane=0,U.arrPanes.push(t-Y.grid_padding);var d=e.length;for(i=0;d>i;i++){var _=jQuery(e[i]),g=_.outerWidth(),c=_.outerHeight();o-t+g>U.gridWidth&&(u++,r=0,u>=Y.grid_num_rows?(u=0,t=o,l=0,r=n,1==U.numPanes&&(U.gridWidth=a+Y.grid_padding,R.width(U.gridWidth)),U.numPanes++,U.arrPanes.push(t-Y.grid_padding)):(o=t,r=l+Y.grid_space_between_rows)),F.placeElement(_,o,r);var h=o+g;h>a&&(a=h);var p=r+c;p>l&&(l=p),p>s&&(s=p);var h=a+g;h>U.innerWidth&&(U.innerWidth=h),o+=g+Y.grid_space_between_cols,1==U.numPanes&&U.numThumbsInPane++}U.innerWidth=a,U.innerHeight=l,Q.width(U.innerWidth),Q.height(U.innerHeight),1==U.numPanes&&(U.gridWidth=a+Y.grid_padding,U.gridHeight=s+Y.grid_padding,R.width(U.gridWidth),R.height(U.gridHeight))}function c(){0==U.isHorizontal?U.isNavigationVertical?_():d():g()}function h(e){if(0>e||e>=U.numThumbs)throw new Error("Thumb not exists: "+e);return!0}function p(e){if(e>=U.numPanes||0>e)throw new Error("Pane "+index+" doesn't exists.");return!0}function f(e){var t=y(e);return 0==t?!1:void Q.css(t)}function m(e){var t=y(e);return 0==t?!1:void Q.stop(!0).animate(t,{duration:Y.grid_transition_duration,easing:Y.grid_transition_easing,queue:!1})}function v(){var e=-U.arrPanes[U.currentPane];m(e)}function b(){return 1==U.isNavigationVertical?U.gridHeight:U.gridWidth}function y(e){var t={};return 1==U.isNavigationVertical?t.top=e+"px":t.left=e+"px",t}function w(){var e=F.getElementSize(Q);return 1==U.isNavigationVertical?e.top:e.left}function I(e){if(0==h(e))return-1;var t=Math.floor(e/U.numThumbsInPane);return t}function E(){if(1==U.numPanes)return!1;var e=F.getStoredEventData(U.storedEventID),t=e.diffTime,i=w(),n=Math.abs(i-e.startInnerPos);return n>30?!0:n>5&&t>300?!0:!1}function T(){var e=F.getStoredEventData(U.storedEventID),t=w();diffPos=Math.abs(e.startInnerPos-t);var i=b(),n=Math.round(3*i/8);return diffPos>=n?!0:e.diffTime<300&&diffPos>25?!0:!1}function S(){if(1==U.numPanes)return!0;var e=F.isApproveStoredEventClick(U.storedEventID,U.isNavigationVertical);return e}function P(){if(1==E())return!0;var e=jQuery(this),t=W.getItemByThumb(e);D.selectItem(t)}function x(e){if(1==U.numPanes)return!0;if(1==U.touchActive)return!0;0==U.isTilesMode&&e.preventDefault(),U.touchActive=!0;var t={startInnerPos:w()};F.storeEventData(e,U.storedEventID,t)}function j(){if(0==Y.grid_vertical_scroll_ondrag)return!1;if(1==U.isNavigationVertical)return!1;var e=F.handleScrollTop(U.storedEventID);return"vert"===e?!0:!1}function C(e){if(0==U.touchActive)return!0;e.preventDefault(),F.updateStoredEventData(e,U.storedEventID);var t=F.getStoredEventData(U.storedEventID,U.isNavigationVertical),i=j();if(i)return!0;var n=t.diffMousePos,r=t.startInnerPos+n,o=n>0?"prev":"next",a=U.arrPanes[U.numPanes-1];0==Y.grid_carousel&&r>0&&"prev"==o&&(r/=3),0==Y.grid_carousel&&-a>r&&"next"==o&&(r=t.startInnerPos+n/3),f(r)}function A(e){if(0==U.touchActive)return!0;F.updateStoredEventData(e,U.storedEventID);var t=F.getStoredEventData(U.storedEventID,U.isNavigationVertical);if(U.touchActive=!1,0==T())return v(),!0;var i=w(),n=i-t.startInnerPos,r=n>0?"prev":"next";"next"==r?0==Y.grid_carousel&&H.isLastPane()?v():H.nextPane():0==Y.grid_carousel&&H.isFirstPane()?v():H.prevPane()}function M(){var e=D.getSelectedItem();W.setThumbSelected(e.objThumbWrapper),l(e.index)}function O(){if(0==U.isTilesMode){W.initEvents();var e=R.find(".ug-thumb-wrapper");e.on("click touchend",P),z.on(D.events.ITEM_CHANGE,M)}else B.initEvents();R.bind("mousedown touchstart",x),jQuery("body").bind("mousemove touchmove",C),jQuery(window).add("body").bind("mouseup touchend",A)}var z,N,k,L,R,Q,H=this,G=jQuery(this),D=new UniteGalleryMain,F=new UGFunctions,W=new UGThumbsGeneral,B=new UGTileDesign,Y={grid_panes_direction:"left",grid_num_cols:2,grid_num_rows:2,grid_space_between_cols:10,grid_space_between_rows:10,grid_transition_duration:300,grid_transition_easing:"easeInOutQuad",grid_carousel:!1,grid_padding:0,grid_vertical_scroll_ondrag:!1};this.events={PANE_CHANGE:"pane_change"};var U={eventSizeChange:"thumb_size_change",isHorizontal:!1,isMaxHeight:!1,isMaxWidth:!1,gridHeight:0,gridWidth:0,innerWidth:0,innerHeight:0,numPanes:0,arrPanes:0,numThumbs:0,currentPane:0,numThumbsInPane:0,isNavigationVertical:!1,touchActive:!1,startScrollPos:0,isFirstTimeRun:!0,isTilesMode:!1,storedEventID:"thumbsgrid"};this.destroy=function(){if(0==U.isTilesMode){var e=R.find(".ug-thumb-wrapper");e.off("click"),e.off("touchend"),z.on(D.events.ITEM_CHANGE),W.destroy()}else B.destroy();R.unbind("mousedown"),R.unbind("touchstart"),jQuery("body").unbind("mousemove"),jQuery("body").unbind("touchmove"),jQuery(window).add("body").unbind("touchend"),jQuery(window).add("body").unbind("mouseup"),G.off(H.events.PANE_CHANGE)},this.__________EXTERNAL_GENERAL_________=function(){},this.setThumbUnselected=function(e){W.setThumbUnselected(e)},this.isItemThumbVisible=function(e){var t=e.index,i=I(t);return i==U.currentPane?!0:!1},this.__________EXTERNAL_API_________=function(){},this.getNumPanesEstimationByHeight=function(e){if(1==U.isTilesMode)var t=Y.tile_height;else var i=W.getOptions(),t=i.thumb_height;var n=W.getNumThumbs(),r=Math.ceil(n/Y.grid_num_cols),o=r*t+(r-1)*Y.grid_space_between_rows,a=Math.ceil(o/e);return a},this.getNumPanesEstimationByWidth=function(e){if(U.isTilesMode)var t=Y.tile_width;else var i=W.getOptions(),t=i.thumb_width;var n=W.getNumThumbs(),r=Math.ceil(n/Y.grid_num_rows),o=r*t+(r-1)*Y.grid_space_between_cols,a=Math.ceil(o/e);return a},this.getHeightEstimationByWidth=function(e){if(0==U.isTilesMode)throw new Error("This function works only with tiles mode");var t=W.getNumThumbs(),i=F.getNumItemsInSpace(e,Y.tile_width,Y.grid_space_between_cols),n=Math.ceil(t/i);n>Y.grid_num_rows&&(n=Y.grid_num_rows);var r=F.getSpaceByNumItems(n,Y.tile_height,Y.grid_space_between_rows);return r+=2*Y.grid_padding},this.getElement=function(){return R},this.getSize=function(){var e=F.getElementSize(R);return e},this.getNumPanes=function(){return U.numPanes},this.isFirstPane=function(){return 0==U.currentPane?!0:!1},this.isLastPane=function(){return U.currentPane==U.numPanes-1?!0:!1},this.getPaneInfo=function(){var e={pane:U.currentPane,total:U.numPanes};return e},this.getPane=function(){return U.currentPane},this.setWidth=function(e){U.gridWidth=e,U.isHorizontal=!0},this.setMaxWidth=function(e){U.gridWidth=e,U.isMaxWidth=!0,U.isHorizontal=!0},this.setHeight=function(e){U.gridHeight=e,U.isHorizontal=!1},this.setMaxHeight=function(e){U.gridHeight=e,U.isMaxHeight=!0,U.isHorizontal=!1},this.gotoPane=function(e){if(0==p(e))return!1;if(e==U.currentPane)return!1;var t=-U.arrPanes[e];U.currentPane=e,m(t),G.trigger(H.events.PANE_CHANGE,e)},this.nextPane=function(){var e=U.currentPane+1;if(e>=U.numPanes){if(0==Y.grid_carousel)return!0;e=0}H.gotoPane(e,"next")},this.prevPane=function(){var e=U.currentPane-1;return 0>e&&(e=U.numPanes-1,0==Y.grid_carousel)?!1:void H.gotoPane(e,"prev")},this.attachNextPaneButton=function(e){return F.setButtonOnClick(e,H.nextPane),1==Y.grid_carousel?!0:(H.isLastPane()&&e.addClass("ug-button-disabled"),void G.on(H.events.PANE_CHANGE,function(){H.isLastPane()?e.addClass("ug-button-disabled"):e.removeClass("ug-button-disabled")}))},this.attachPrevPaneButton=function(e){return F.setButtonOnClick(e,H.prevPane),1==Y.grid_carousel?!0:(H.isFirstPane()&&e.addClass("ug-button-disabled"),void G.on(H.events.PANE_CHANGE,function(){H.isFirstPane()?e.addClass("ug-button-disabled"):e.removeClass("ug-button-disabled")}))},this.attachBullets=function(e){e.setActive(U.currentPane),jQuery(e).on(e.events.BULLET_CLICK,function(t,i){H.gotoPane(i,"theme"),e.setActive(i)}),jQuery(H).on(H.events.PANE_CHANGE,function(t,i){e.setActive(i)})},this.getObjTileDesign=function(){return B},this.init=function(t,i,n){e(t,i,n)},this.run=function(){r()},this.setHtml=function(e){t(e)}}function UGThumbsStrip(){function e(e,i){E=e.getObjects(),M=e,I=jQuery(e),T=E.g_objWrapper,S=E.g_arrItems,k=jQuery.extend(k,i),z=k.strip_vertical_type,1==z&&(k=jQuery.extend(k,Q),k=jQuery.extend(k,i),i.thumb_resize_by="width"),N.init(e,i),t()}function t(){var e=N.getOptions();L.isNotFixedThumbs=e.thumb_fixed_size===!1,z=k.strip_vertical_type}function n(){N.setHtmlProperties(),r(),s(),a(),0==L.isRunOnce&&(1==k.strip_control_touch&&(C=new UGTouchThumbsControl,C.init(A)),1==k.strip_control_avia&&(j=new UGAviaControl,j.init(A)),h(),N.loadThumbsImages(),v()),L.isRunOnce=!0}function r(){var e=x.children(".ug-thumb-wrapper"),t=jQuery(e[0]),i=t.outerWidth(),n=t.outerHeight(),r=N.getOptions();0==z?(R.thumbSize=i,R.thumbSecondSize=1==r.thumb_fixed_size?n:r.thumb_height,R.stripSize=P.width(),R.stripInnerSize=x.width()):(R.thumbSize=n,R.thumbSecondSize=1==r.thumb_fixed_size?i:r.thumb_width,R.stripSize=P.height(),R.stripInnerSize=x.height())}function o(e){0==z?x.width(e):x.height(e),R.stripInnerSize=e,h()}function a(){var e=x.children(".ug-thumb-wrapper"),t=0,n=0;for(i=0;i<e.length;i++){var r=jQuery(e[i]);if(1==L.isNotFixedThumbs){if(objItem=N.getItemByThumb(r),0==objItem.isLoaded)continue;r.show()}O.placeElement(r,t,n),0==z?t+=r.outerWidth()+k.strip_space_between_thumbs:n+=r.outerHeight()+k.strip_space_between_thumbs}if(0==z)var a=t-k.strip_space_between_thumbs;else var a=n-k.strip_space_between_thumbs;o(a)}function s(){if(0==z){var e=R.thumbSecondSize,t={};t.height=e+"px";var i={};i.height=e+"px"}else{var n=R.thumbSecondSize,t={};t.width=n+"px";var i={};i.width=n+"px"}P.css(t),x.css(i)}function l(e){var t=A.getInnerStripPos(),i=t+e;i=A.fixInnerStripLimits(i),A.positionInnerStrip(i,!0)}function u(e){var t=w(e),i=-1*t.min;i=A.fixInnerStripLimits(i),A.positionInnerStrip(i,!0)}function d(e){var t=w(e),i=-1*t.max+R.stripSize;i=A.fixInnerStripLimits(i),A.positionInnerStrip(i,!0)}function _(e){if(0==b())return!1;var t=y(),i=w(e);if(i.min<t.minPosThumbs){var n=e.prev();u(n.length?n:e)}else if(i.max>t.maxPosThumbs){var r=e.next();d(r.length?r:e)}}function g(){var e=M.getSelectedItem();if(null==e)return!0;var t=e.objThumbWrapper;t&&_(t)}function c(){if(0==b())return!1;var e=A.getInnerStripPos(),t=A.fixInnerStripLimits(e);e!=t&&A.positionInnerStrip(t,!0)}function h(){var e=b();1==e?(j&&j.enable(),C&&C.enable()):(j&&j.disable(),C&&C.disable())}function p(){return b()?!1:void(0==z?O.placeElement(x,k.strip_thumbs_align,0):O.placeElement(x,0,k.strip_thumbs_align))}function f(e){if(A.isTouchMotionActive()){var t=C.isSignificantPassed();if(1==t)return!0}var i=N.getItemByThumb(e);M.selectItem(i)}function m(){clearTimeout(L.handle),L.handle=setTimeout(function(){a()},50)}function v(){N.initEvents();var e=P.find(".ug-thumb-wrapper");e.on("click touchend",function(){var e=jQuery(this);f(e)}),I.on(M.events.ITEM_CHANGE,function(){var e=M.getSelectedItem();N.setThumbSelected(e.objThumbWrapper),_(e.objThumbWrapper)}),L.isNotFixedThumbs&&jQuery(N).on(N.events.AFTERPLACEIMAGE,m)}function b(){return 0==z?x.width()>P.width()?!0:!1:x.height()>P.height()?!0:!1}function y(){var e={},t=A.getInnerStripPos();return e.minPosThumbs=-1*t+1,e.maxPosThumbs=-1*t+R.stripSize-1,e}function w(e){var t={},i=e.position();return 0==z?(t.min=i.left,t.max=i.left+R.thumbSize):(t.min=i.top,t.max=i.top+R.thumbSize),t}var I,E,T,S,P,x,j,C,A=this,M=new UniteGalleryMain,O=new UGFunctions,z=!1,N=new UGThumbsGeneral,O=new UGFunctions,k={strip_vertical_type:!1,strip_thumbs_align:"left",strip_space_between_thumbs:6,strip_thumb_touch_sensetivity:15,strip_scroll_to_thumb_duration:500,strip_scroll_to_thumb_easing:"easeOutCubic",strip_control_avia:!0,strip_control_touch:!0},L={isRunOnce:!1,is_placed:!1,isNotFixedThumbs:!1,handle:null},R={stripSize:0,stripInnerSize:0,thumbSize:0,thumbSecondSize:0};this.events={STRIP_MOVE:"stripmove"};var Q={strip_thumbs_align:"top",thumb_resize_by:"width"};this.setHtml=function(e){if(!e){var e=T;null!=k.parent_container&&(e=k.parent_container)}e.append("<div class='ug-thumbs-strip'><div class='ug-thumbs-strip-inner'></div></div>"),P=e.children(".ug-thumbs-strip"),x=P.children(".ug-thumbs-strip-inner"),N.setHtmlThumbs(x),1==L.isNotFixedThumbs&&N.hideThumbs()},this.destroy=function(){var e=P.find(".ug-thumb-wrapper");e.off("click"),e.off("touchend"),I.off(M.events.ITEM_CHANGE),jQuery(N).off(N.events.AFTERPLACEIMAGE),C&&C.destroy(),j&&j.destroy(),N.destroy()},this.________EXTERNAL_GENERAL___________=function(){},this.init=function(t,i){e(t,i)},this.run=function(){n()},this.fixInnerStripLimits=function(e){var t,i=0;return t=0==z?-(x.width()-P.width()):-(x.height()-P.height()),e>i&&(e=i),t>e&&(e=t),e},this.positionInnerStrip=function(e,t){if(void 0===t)var t=!1;if(0==z)var i={left:e+"px"};else var i={top:e+"px"};0==t?(x.css(i),A.triggerStripMoveEvent()):(A.triggerStripMoveEvent(),x.stop(!0).animate(i,{duration:k.strip_scroll_to_thumb_duration,easing:k.strip_scroll_to_thumb_easing,queue:!1,progress:function(){A.triggerStripMoveEvent()},always:function(){A.triggerStripMoveEvent()}}))},this.triggerStripMoveEvent=function(){jQuery(A).trigger(A.events.STRIP_MOVE)},this.isTouchMotionActive=function(){if(!C)return!1;var e=C.isTouchActive();return e},this.isItemThumbVisible=function(e){var t=e.objThumbWrapper,i=t.position(),n=-1*A.getInnerStripPos();if(0==z)var r=n+P.width(),o=i.left,a=i.left+t.width();else var r=n+P.height(),o=i.top,a=i.top+t.height();var s=!1;return a>=n&&r>=o&&(s=!0),s},this.getInnerStripPos=function(){return 0==z?x.position().left:x.position().top},this.getInnerStripLimits=function(){var e={};return e.maxPos=0,e.minPos=0==z?-(x.width()-P.width()):-(x.height()-P.height()),e
},this.scrollForeward=function(){l(-R.stripSize)},this.scrollBack=function(){l(R.stripSize)},this.________EXTERNAL_SETTERS___________=function(){},this.setOptions=function(e){k=jQuery.extend(k,e),N.setOptions(e),t()},this.setSizeVertical=function(e){if(0==z)throw new Error("setSizeVertical error, the strip size is not vertical");var t=R.thumbSecondSize,i={};i.width=t+"px",i.height=e+"px",P.css(i);var n={};n.width=t+"px",n.left="0px",n.top="0px",x.css(n),L.is_placed=!0,h()},this.setSizeHorizontal=function(e){if(0==z)throw new Error("setSizeHorizontal error, the strip size is not horizontal");var t=R.thumbSecondSize,i={};i.width=e+"px",i.height=t+"px",P.css(i);var n={};n.height=t+"px",n.left="0px",n.top="0px",x.css(n),L.is_placed=!0,h()},this.setPosition=function(e,t,i,n){O.placeElement(P,e,t,i,n)},this.resize=function(e){0==z?P.width(e):P.height(e),R.stripSize=e,h(),c(),p(),g()},this.setThumbUnselected=function(e){N.setThumbUnselected(e)},this.setCustomThumbs=function(e){N.setCustomThumbs(e)},this.________EXTERNAL_GETTERS___________=function(){},this.getObjects=function(){var e=N.getOptions(),t=jQuery.extend(k,e),i={g_gallery:M,g_objGallery:I,g_objWrapper:T,g_arrItems:S,g_objStrip:P,g_objStripInner:x,g_aviaControl:j,g_touchThumbsControl:C,isVertical:z,g_options:t};return i},this.getSizeAndPosition=function(){var e=O.getElementSize(P);return e},this.getHeight=function(){var e=P.outerHeight();return e},this.getWidth=function(){var e=P.outerWidth();return e},this.getSizes=function(){return R},this.isVertical=function(){return z},this.isPlaced=function(){return L.is_placed},this.isMoveEnabled=function(){var e=b();return e}}function UGTileDesign(){function e(e,n){A=e,T=jQuery(e);var r=A.getObjects();P=r.g_objWrapper,x=A.getArrItems(),z=jQuery.extend(z,N),z=jQuery.extend(z,n),t(),O.init(e,z);var o={};O.setCustomThumbs(i,["overlay"],o);var a=O.getOptions();z=jQuery.extend(z,a),k.isSaparateIcons=!M.isRgbaSupported()}function t(){1==z.tile_enable_overlay?(z.thumb_overlay_opacity=z.tile_overlay_opacity,z.thumb_overlay_color=z.tile_overlay_color):0==z.tile_enable_icons?z.thumb_color_overlay_effect=!1:z.thumb_overlay_opacity=0,z.tile_as_link&&(z.thumb_wrapper_as_link=!0,z.thumb_link_newpage=z.tile_link_newpage),1==z.tile_enable_outline&&0==z.tile_enable_border&&(z.tile_enable_outline=!1),k.tileInnerReduce=0,z.tile_enable_border&&(k.tileInnerReduce=2*z.tile_border_width,O.setThumbInnerReduce(k.tileInnerReduce))}function i(e,t){var i="<img src='"+t.urlThumb+"' alt='"+t.title+"' class='ug-thumb-image'>";e.append(i),e.addClass("ug-tile");e.children(".ug-thumb-image");1==k.isFixedMode&&(e.fadeTo(0,0),M.setElementSize(e,z.tile_width,z.tile_height),e.addClass("ug-tile-fixed"));var n={};if(1==z.tile_enable_border&&(n["border-width"]=z.tile_border_width+"px",n["border-style"]="solid",n["border-color"]=z.tile_border_color,z.tile_border_radius&&(n["border-radius"]=z.tile_border_radius+"px")),1==z.tile_enable_outline&&(n.outline="1px solid "+z.tile_outline_color),1==z.tile_enable_shadow){var r=z.tile_shadow_h+"px ";r+=z.tile_shadow_v+"px ",r+=z.tile_shadow_blur+"px ",r+=z.tile_shadow_spread+"px ",r+=z.tile_shadow_color,n["box-shadow"]=r}e.css(n);var o="";if(z.tile_enable_icons){if(0==z.tile_as_link&&1==z.tile_enable_action){var a="ug-button-play ug-icon-zoom";"image"!=t.type&&(a="ug-button-play ug-icon-play"),o+="<div class='ug-tile-icon "+a+"' style='display:none'></div>"}if(t.link&&1==z.tile_show_link_icon||1==z.tile_as_link)if(0==z.tile_as_link){var s="";1==z.tile_link_newpage&&(s=" target='_blank'"),o+="<a href='"+t.link+"'"+s+" class='ug-tile-icon ug-icon-link'></a>"}else o+="<div class='ug-tile-icon ug-icon-link' style='display:none'></div>";var l=k.isSaparateIcons;if(0==l&&"image"!=t.type&&1==z.tile_videoplay_icon_always_on&&(l=!0),l)var u=e;else var u=e.children(".ug-thumb-overlay");u.append(o);var d=u.children("."+a);0==d.length?d=null:d.hide();var _=u.children(".ug-icon-link");0==_.length?_=null:_.hide(),_||1!=z.tile_enable_action||e.addClass("ug-tile-clickable")}else 1==z.tile_enable_action&&e.addClass("ug-tile-clickable");if(1==z.tile_enable_image_effect){var g="<div class='ug-tile-image-overlay' style='display:none'>",c=" ug-"+z.tile_image_effect_type+"-effect";g+="<img src='"+t.urlThumb+"' alt='"+t.title+"' class='"+c+"'>",g+="</div>",e.append(g)}if(1==z.tile_enable_textpanel){var h=new UGTextPanel;h.init(A,z,"tile"),h.appendHTML(e);var p=t.title;switch(z.tile_textpanel_source){case"desc":case"description":p=t.description;break;case"desc_title":""!=t.description&&(p=t.description)}h.setTextPlain(p,""),0==z.tile_textpanel_always_on&&h.getElement().fadeTo(0,0),e.data("objTextPanel",h)}}function n(e){var t=e.children(".ug-tile-image-overlay");return t}function r(e){var t=e.find(".ug-tile-image-overlay img");return t}function o(e){var t=e.data("objTextPanel");return t}function a(e){var t=e.find(".ug-textpanel");return t}function s(e){var t=e.find(".ug-icon-link");return 0==t.length?null:t}function l(e){var t=e.find(".ug-button-play");return 0==t.length?null:t}function u(e){return e.hasClass("ug-thumb-over")?!0:!1}function d(e){return e.hasClass("ug-tile-clickable")}function _(e){var t=(j.getItemByTile(e),l(e)),i=s(e),u=M.getElementSize(e),d=n(e),_=j.getTileImage(e),g=r(e);1==z.tile_enable_image_effect&&M.setElementSize(d,u.width-k.tileInnerReduce,u.height-k.tileInnerReduce),k.isFixedMode&&(0==z.tile_enable_image_effect?M.scaleImageCoverParent(_,e):(M.scaleImageCoverParent(g,d),M.cloneElementSizeAndPos(g,_),setTimeout(function(){M.cloneElementSizeAndPos(g,_)},500)));var c=o(e);if(1==z.tile_enable_textpanel&&c&&(c.refresh(!1,!0),(1==z.tile_textpanel_always_on||"fade"==z.tile_textpanel_appear_type)&&c.positionPanel()),t||i){var h=0;if(1==z.tile_enable_textpanel){var p=a(e),f=M.getElementSize(p);f.height>0&&(h=Math.floor(f.height/2*-1))}}if(t&&i){var m=M.getElementSize(t),v=M.getElementSize(i),b=z.tile_space_between_icons,y=m.width+b+v.width,w=Math.floor((u.width-y)/2);b>w&&(b=Math.floor((u.width-m.width-v.width)/3),y=m.width+b+v.width,w=Math.floor((u.width-y)/2)),M.placeElement(t,w,"middle",0,h),M.placeElement(i,w+m.width+b,"middle",0,h)}else t&&M.placeElement(t,"center","middle",0,h),i&&M.placeElement(i,"center","middle",0,h);t&&t.show(),i&&i.show()}function g(e,t){var i=(j.getItemByTile(e),n(e)),r=z.thumb_transition_duration;if(0==z.tile_image_effect_reverse){var o=j.getTileImage(e);t?(o.fadeTo(1,1),i.stop(!0).fadeTo(r,0)):i.stop(!0).fadeTo(r,1)}else t?i.stop(!0).fadeTo(r,1):i.stop(!0).fadeTo(r,0)}function c(e,t){var i=z.thumb_transition_duration,n=a(e);if(!n)return!0;if("slide"==z.tile_textpanel_appear_type){var r=M.getElementSize(n);if(0==r.width)return!1;var o=-r.height,s=0;1==t?(n.fadeTo(0,1),0==n.is(":animated")&&n.css("bottom",o+"px"),n.stop(!0).animate({bottom:s+"px"},i)):n.stop(!0).animate({bottom:o+"px"},i)}else 1==t?n.stop(!0).fadeTo(i,1):n.stop(!0).fadeTo(i,0)}function h(e,t,i){var n=z.thumb_transition_duration;i&&i===!0&&(n=0);var r=l(e),o=s(e),a=t?1:0;r&&r.stop(!0).fadeTo(n,a),o&&o.stop(!0).fadeTo(n,a)}function p(e,t){if(t=jQuery(t),z.tile_enable_image_effect&&g(t,!0),1==z.tile_enable_textpanel&&0==z.tile_textpanel_always_on&&c(t,!0),k.isSaparateIcons&&1==z.tile_enable_icons){var i=1==z.thumb_overlay_reverse,n=j.getItemByTile(t);(1!=z.tile_videoplay_icon_always_on||"image"==n.type)&&h(t,i,!1)}}function f(e,t){if(t=jQuery(t),z.tile_enable_image_effect&&g(t,!1),1==z.tile_enable_textpanel&&0==z.tile_textpanel_always_on&&c(t,!1),k.isSaparateIcons&&1==z.tile_enable_icons){var i=1==z.thumb_overlay_reverse?!1:!0;h(t,i,!1)}}function m(e){var t=O.getThumbs().not(e);t.each(function(e,t){O.setThumbNormalStyle(jQuery(t))})}function v(e,t,i){return t=jQuery(t),1==k.isFixedMode&&t.data("image_placed")!==!0&&i!==!0?!0:void _(t)}function b(e,t,i){_(t),i.fadeTo(0,1),t.data("image_placed",!0)}function y(e){return 1==d(e)?(C.trigger(j.events.TILE_CLICK,e),!0):void(0==u(e)&&(m(e),O.setThumbOverStyle(e)))}function w(e){var t=jQuery(this),i=t.prop("tagName").toLowerCase(),n=!0;if(k.funcParentApproveClick&&0==k.funcParentApproveClick()&&(n=!1),"a"==i)0==n&&e.preventDefault();else if(0==u(t))1==n&&y(t);else{if(0==d(t))return!0;1==n&&C.trigger(j.events.TILE_CLICK,t)}}function I(e){e.stopPropagation();var t=jQuery(this).parents(".ug-tile"),i=!0;return k.funcParentApproveClick&&0==k.funcParentApproveClick()&&(i=!1),0==u(t)?(y(t),!0):1==i?(C.trigger(j.events.TILE_CLICK,t),!1):void 0}function E(e){var t=jQuery(this).parents(".ug-tile");k.funcParentApproveClick&&0==k.funcParentApproveClick()&&e.preventDefault(),0==u(t)&&0==z.tile_as_link&&(e.preventDefault(),y(t))}var T,S,P,x,j=this,C=jQuery(this),A=new UniteGalleryMain,M=new UGFunctions,O=new UGThumbsGeneral;this.events={TILE_CLICK:"tile_click"};var z={tile_width:250,tile_height:200,tile_enable_border:!1,tile_border_width:3,tile_border_color:"#F0F0F0",tile_border_radius:0,tile_enable_outline:!1,tile_outline_color:"#8B8B8B",tile_enable_shadow:!1,tile_shadow_h:1,tile_shadow_v:1,tile_shadow_blur:3,tile_shadow_spread:2,tile_shadow_color:"#8B8B8B",tile_enable_action:!0,tile_as_link:!1,tile_link_newpage:!0,tile_enable_overlay:!0,tile_overlay_opacity:.4,tile_overlay_color:"#000000",tile_enable_icons:!0,tile_show_link_icon:!1,tile_videoplay_icon_always_on:!1,tile_space_between_icons:26,tile_enable_image_effect:!1,tile_image_effect_type:"bw",tile_image_effect_reverse:!1,tile_enable_textpanel:!1,tile_textpanel_source:"title",tile_textpanel_always_on:!1,tile_textpanel_appear_type:"slide"},N={thumb_color_overlay_effect:!0,thumb_overlay_reverse:!0,thumb_image_overlay_effect:!1,tile_textpanel_enable_description:!1,tile_textpanel_bg_opacity:.6,tile_textpanel_padding_top:8,tile_textpanel_padding_bottom:8},k={isFixedMode:!1,eventSizeChange:"thumb_size_change",funcParentApproveClick:null,isSaparateIcons:!1,tileInnerReduce:0};this.loadTileImage=function(e){var t=j.getTileImage(e);M.checkImagesLoaded(t,null,function(t){b(null,e,jQuery(t))})},this.setHtml=function(e){S=e,O.setHtmlThumbs(e)},this.initEvents=function(){O.initEvents(),jQuery(O).on(O.events.SETOVERSTYLE,p),jQuery(O).on(O.events.SETNORMALSTYLE,f),jQuery(O).on(O.events.PLACEIMAGE,b),P.on(k.eventSizeChange,v),S.delegate(".ug-tile .ug-button-play","click",I),S.delegate(".ug-tile","click",w),S.delegate(".ug-tile .ug-icon-link","click",E)},this.destroy=function(){if(jQuery(O).off(O.events.SETOVERSTYLE),jQuery(O).off(O.events.SETNORMALSTYLE),jQuery(O).off(O.events.PLACEIMAGE),P.off(k.eventSizeChange),1==z.tile_enable_textpanel){var e=O.getThumbs();jQuery.each(e,function(e,t){var i=o(jQuery(t));i&&i.destroy()})}O.destroy()},this.init=function(t,i,n){e(t,i,n)},this.setFixedMode=function(){k.isFixedMode=!0},this.setApproveClickFunction=function(e){k.funcParentApproveClick=e},this.resizeTile=function(e,t,i){if(1==k.isFixedMode){if(t){if(!i)var i=z.tile_height/z.tile_width*t}else var t=z.tile_width,i=z.tile_height;M.setElementSize(e,t,i),j.triggerSizeChangeEvent(e,!0)}else{var n={},r={};null!==t&&(n.width=t+"px",r.width=t-k.tileInnerReduce+"px"),null!==i&&(n.height=i+"px",r.height=i-k.tileInnerReduce+"px"),e.css(n),1==z.tile_enable_textpanel&&1==z.tile_textpanel_always_on&&t&&j.resizeTileTextPanel(e,t-k.tileInnerReduce),1==z.tile_enable_image_effect&&e.find(".ug-tile-image-overlay").css(r)}},this.resizeAllTiles=function(e,t){if(!t)var t=z.tile_height/z.tile_width*e;var i=O.getThumbs();i.each(function(i,n){j.resizeTile(jQuery(n),e,t)})},this.resizeTileTextPanel=function(e,t){var i=o(e);if(!i)return!1;var n=M.getElementSize(e);return t<n.width?!1:void i.refresh(!1,!0,t)},this.setAllTilesWidth=function(e){var t=O.getThumbs();t.css("width",e+"px");var i=e-k.tileInnerReduce;if(1==z.tile_enable_textpanel&&1==z.tile_textpanel_always_on)for(var n=0;n<t.length;n++){var r=jQuery(t[n]);j.resizeTileTextPanel(r,i)}1==z.tile_enable_image_effect&&0==z.tile_image_effect_reverse&&t.find(".ug-tile-image-overlay").css("width",i+"px")},this.getTileHeightByWidth=function(e,t){var i=j.getItemByTile(e),n=t*i.thumbRatioByHeight;return n=Math.floor(n)},this.triggerSizeChangeEvent=function(e,t){if(!e)return!1;if(!t)var t=!1;P.trigger(k.eventSizeChange,[e,t])},this.triggerSizeChangeEventAllTiles=function(e){var t=O.getThumbs();t.each(function(){var t=jQuery(this);j.triggerSizeChangeEvent(t,e)})},this.disableEvents=function(){var e=O.getThumbs();e.css("pointer-events","none")},this.enableEvents=function(){var e=O.getThumbs();e.css("pointer-events","auto")},this.setOptions=function(e){z=jQuery.extend(z,e),O.setOptions(e)},this.run=function(){var e=O.getThumbs();1==z.tile_enable_image_effect&&0==z.tile_image_effect_reverse&&e.children(".ug-thumb-image").fadeTo(0,0),O.setHtmlProperties(),1==k.isFixedMode&&(e.children(".ug-thumb-image").fadeTo(0,0),O.loadThumbsImages())},this._____________EXTERNAL_GETTERS____________=function(){},this.getObjThumbs=function(){return O},this.getOptions=function(){return z},this.getTileImage=function(e){var t=e.children("img.ug-thumb-image");return t},this.getItemByTile=function(e){return O.getItemByThumb(e)}}function UGTiles(){function e(e,i){g_objects=e.getObjects(),j=e,I=jQuery(e),E=g_objects.g_objWrapper,S=g_objects.g_arrItems,z=jQuery.extend(z,i),A.init(e,z),M=A.getObjThumbs(),t()}function t(){z.tiles_min_columns<1&&(z.tiles_min_columns=1),0!=z.tiles_max_columns&&z.tiles_max_columns<z.tiles_min_columns&&(z.tiles_max_columns=z.tiles_min_columns)}function i(e){if(!e)var e=E;T=e;var t=z.tiles_type;e.addClass("ug-tiletype-"+t),A.setHtml(e),e.children(".ug-thumb-wrapper").hide()}function n(){if(1==z.tiles_enable_transition){T.addClass("ug-tiles-transit");var e=A.getOptions();1==e.tile_enable_image_effect&&0==e.tile_image_effect_reverse&&T.addClass("ug-tiles-transit-overlays"),N.isTransActive=!0}}function r(){return C.getElementSize(T).width}function o(){return 0==N.isTransActive?!1:void A.disableEvents()}function a(){1==N.isTransActive?(setTimeout(function(){A.enableEvents(),A.triggerSizeChangeEventAllTiles()},800),N.handle&&clearTimeout(N.handle),N.handle=setTimeout(function(){A.triggerSizeChangeEventAllTiles(),N.handle=null},2e3)):A.triggerSizeChangeEventAllTiles()}function s(){O.colWidth=(O.availWidth-O.colGap*(O.numCols-1))/O.numCols,O.colWidth=Math.floor(O.colWidth),O.totalWidth=C.getSpaceByNumItems(O.numCols,O.colWidth,O.colGap)}function l(){if(O.colWidth=z.tiles_col_width,O.minCols=z.tiles_min_columns,O.colGap=0==j.isMobileMode()?z.tiles_space_between_cols:z.tiles_space_between_cols_mobile,O.galleryWidth=r(),O.availWidth=O.galleryWidth,1==z.tiles_include_padding&&(O.availWidth=O.galleryWidth-2*O.colGap),1==z.tiles_exact_width)O.numCols=C.getNumItemsInSpace(O.availWidth,O.colWidth,O.colGap),O.maxCols>0&&O.numCols>O.maxCols&&(O.numCols=O.maxCols),O.numCols<O.minCols?(O.numCols=O.minCols,s()):O.totalWidth=O.numCols*(O.colWidth+O.colGap)-O.colGap;else{var e=C.getNumItemsInSpaceRound(O.availWidth,O.colWidth,O.colGap);e<O.minCols?e=O.minCols:0!=O.maxCols&&e>O.maxCols&&(e=O.maxCols),O.numCols=e,s()}switch(z.tiles_align){case"center":default:O.addX=Math.round((O.galleryWidth-O.totalWidth)/2);break;case"left":O.addX=0;break;case"right":O.addX=O.galleryWidth-O.totalWidth}for(O.maxColHeight=0,O.arrPosx=[],col=0;col<O.numCols;col++){var t=C.getColX(col,O.colWidth,O.colGap);O.arrPosx[col]=t+O.addX}O.colHeights=[0]}function u(){var e=0,t=999999999;for(col=0;col<O.numCols;col++){if(void 0==O.colHeights[col]||0==O.colHeights[col])return col;O.colHeights[col]<t&&(e=col,t=O.colHeights[col])}return e}function d(e,t,i,n){if(null===n||"undefined"==typeof n)var n=u();var r=0;void 0!==O.colHeights[n]&&(r=O.colHeights[n]);var o=A.getTileHeightByWidth(e,O.colWidth),a=O.arrPosx[n];C.placeElement(e,a,r);var s=r+o;O.colHeights[n]=s+O.colGap,O.maxColHeight<s&&(O.maxColHeight=s),1==t&&e.show(),1==i&&T.height(O.maxColHeight)}function _(e){e||(e=!1),l();var t=M.getThumbs();o(),A.setAllTilesWidth(O.colWidth);for(var i=0;i<t.length;i++){var n=jQuery(t[i]),r=void 0;1==z.tiles_keep_order&&(r=C.getColByIndex(O.numCols,i)),d(n,e,!1,r)}a();var s=T.height();1==N.isTransActive&&s>O.maxColHeight?setTimeout(function(){T.height(O.maxColHeight)},700):T.height(O.maxColHeight)}function g(e){var t=e.index(),i=C.getPrevRowSameColIndex(t,O.numCols);if(0>i)return!0;var n=j.getItem(i);return n.ordered_placed===!0?!0:!1}function c(e,t){if(t!==!0){var i=g(e);if(0==i)return!1}var n=e.index(),r=C.getColByIndex(O.numCols,n);d(e,!0,!0,r);var o=j.getItem(n);o.ordered_placed=!0,e.fadeTo(0,1),A.triggerSizeChangeEvent(e);var a=j.getNumItems(),s=C.getNextRowSameColIndex(n,O.numCols);if(s>=a)return!1;var l=M.getThumbByIndex(s),u=j.getItem(s);M.isThumbLoaded(l)&&!u.ordered_placed&&c(l,!0)}function h(e,t){if(1==t)return!1;e=jQuery(e);var i=jQuery(e).parent();M.triggerImageLoadedEvent(i,e),1==z.tiles_keep_order?c(i):(d(i,!0,!0),i.fadeTo(0,1),A.triggerSizeChangeEvent(i))}function p(){var e=M.getThumbs();l();var t=Math.abs(O.galleryWidth-O.totalWidth);if(1==z.tiles_set_initial_height&&0==C.isScrollbarExists()&&25>t){var i=(e.length,Math.ceil(e.length/O.numCols)),r=i*z.tiles_col_width*.75;T.height(r),l()}e.css("width",O.colWidth+"px"),e.fadeTo(0,0);var o=O.numCols,a=O.galleryWidth,s=jQuery(T).find("img.ug-thumb-image"),u=!1;C.checkImagesLoaded(s,function(){l(),(o!=O.numCols||a!=O.galleryWidth)&&_(!1),n()},function(e,t){0==u&&x.trigger(P.events.TILES_FIRST_PLACED),u=!0,h(e,t)})}function f(){var e=r(),t=M.getThumbs(),i=z.tiles_justified_row_height,n=[],o=0,a=z.tiles_justified_space_between,s=t.length;jQuery.each(t,function(e,t){t=jQuery(t);var r=(A.getTileImage(t),M.getItemByThumb(t)),a=r.thumbWidth,s=r.thumbHeight;s!==i&&(a=Math.floor(r.thumbRatioByWidth*i)),n[e]=a,o+=a});var l=Math.ceil(o/e);l>s&&(l=s);var u=o/l,d=[],_=0,g=[],c=[],h=0,p=0;jQuery.each(t,function(e,t){var i=n[e];h+i/2>(p+1)*u&&(g[d.length]=_,d.push(c),c=[],_=0,p++),h+=i,_+=i,c.push(t)}),g[d.length]=_,d.push(c);var f=[],m=[],v=0;jQuery.each(d,function(t,r){var o=(r.length,g[t]),s=(r.length-1)*a,l=(e-s)/o,u=Math.round(i*l);v+=u,t>0&&(v+=a),m.push(u);var d=u/i,_=[],c=s;jQuery.each(r,function(e,t){var i=jQuery(t),r=i.index(),o=n[r],a=Math.round(o*d);_[e]=a,c+=a});var h=c-e;jQuery.each(_,function(e,t){return 0==h?!1:(0>h?(_[e]=t+1,h++):(_[e]=t-1,h--),void(e==_.length-1&&0!=h&&(_[e]-=h)))}),f[t]=_});var b={arrRows:d,arrRowWidths:f,arrRowHeights:m,gap:a,totalHeight:v};return b}function m(e){if(!e)var e=!1;var t=r(),i=f();T.height(i.totalHeight);var n=r();n!=t&&(i=f()),o();var s=0,l=0;jQuery.each(i.arrRows,function(t,n){var r=i.arrRowWidths[t],o=i.arrRowHeights[t],a=0;jQuery.each(n,function(t,n){var u=jQuery(n),d=o,_=r[t];A.resizeTile(u,_,d),C.placeElement(u,a,s),a+=_,a>l&&(l=a),a+=i.gap,1==e&&jQuery(n).show()}),s+=o+i.gap}),a()}function v(){var e=jQuery(E).find("img.ug-thumb-image"),t=M.getThumbs();t.fadeTo(0,0),C.checkImagesLoaded(e,function(){setTimeout(function(){m(!0),t.fadeTo(0,1),x.trigger(P.events.TILES_FIRST_PLACED),n()})},function(e){e=jQuery(e);var t=jQuery(e).parent();M.triggerImageLoadedEvent(t,e)})}function b(){switch(E.children(".ug-tile").show(),A.run(),z.tiles_type){default:case"columns":p();break;case"justified":v()}1==N.isFirstTimeRun&&w(),N.isFirstTimeRun=!1}function y(){if(1==N.isFirstTimeRun)return!0;switch(z.tiles_type){case"columns":_(!1);break;case"justified":m(!1)}}function w(){I.on(j.events.SIZE_CHANGE,y),A.initEvents()}var I,E,T,S,P=this,x=jQuery(this),j=new UniteGalleryMain,C=new UGFunctions,A=new UGTileDesign,M=new UGThumbsGeneral,O={},z={tiles_type:"columns",tiles_col_width:250,tiles_align:"center",tiles_exact_width:!1,tiles_space_between_cols:3,tiles_space_between_cols_mobile:3,tiles_include_padding:!0,tiles_min_columns:2,tiles_max_columns:0,tiles_keep_order:!1,tiles_justified_row_height:150,tiles_justified_space_between:3,tiles_set_initial_height:!0,tiles_enable_transition:!0};this.events={THUMB_SIZE_CHANGE:"thumb_size_change",TILES_FIRST_PLACED:"tiles_first_placed"};var N={isFirstTimeRun:!0,handle:null,isTransActive:!1,arrWaitList:[]};this.destroy=function(){I.off(j.events.SIZE_CHANGE),A.destroy()},this.init=function(t,i){e(t,i)},this.setHtml=function(e){i(e)},this.getObjTileDesign=function(){return A},this.run=function(){b()}}function UGTouchSliderControl(){function e(e){if(!e)var e=m.getSlidesReference();var t=v.getElementSize(e.objCurrentSlide),i=-t.left,n=v.getElementSize(h),r=i-n.left;return r}function t(){var t=m.getSlidesReference(),i=e(t),n=Math.round(3*t.objCurrentSlide.width()/8);if(Math.abs(i)>=n)return!0;{var r=Math.abs(b.lastMouseX-b.startMouseX);Math.abs(b.lastMouseY-b.startMouseY)}if(20>r)return!1;var o=jQuery.now(),a=o-b.startTime;return 500>a?!0:!1}function i(e){if(1==m.isInnerInPlace())return!1;if(p.trigger(m.events.BEFORE_RETURN),!e)var e=m.getSlidesReference();var t=v.getElementSize(e.objCurrentSlide),i=-t.left;h.animate({left:i+"px"},{duration:f.slider_transition_return_speed,easing:f.slider_transition_continuedrag_easing,queue:!1,progress:function(){if(1==b.isDragVideo){var e=v.getElementSize(h),t=e.left,n=t-i,r=b.videoStartX+n;b.videoObject.css("left",r)}},complete:function(){p.trigger(m.events.AFTER_RETURN)}})}function n(e){m.getVideoObject().hide(),m.switchSlideNums(e),m.placeNabourItems()}function r(){var t=m.getSlidesReference(),r=e(t);if(0==r)return!1;var o=r>0?"left":"right",a=!1;switch(o){case"right":if(m.isSlideHasItem(t.objPrevSlide))var s=v.getElementSize(t.objPrevSlide),l=-s.left;else a=!0;break;case"left":if(m.isSlideHasItem(t.objNextSlide))var u=v.getElementSize(t.objNextSlide),l=-u.left;else a=!0}1==a?i(t):h.stop().animate({left:l+"px"},{duration:f.slider_transition_continuedrag_speed,easing:f.slider_transition_continuedrag_easing,queue:!1,progress:function(){if(1==b.isDragVideo){var e=v.getElementSize(h),t=e.left,i=t-b.startPosx,n=b.videoStartX+i;b.videoObject.css("left",n)}},always:function(){n(o),p.trigger(m.events.AFTER_DRAG_CHANGE)}})}function o(e){var t=b.lastMouseX-b.startMouseX;if(0==t)return!0;var i=0>t?"left":"right",n=m.getObjZoom();if(n){var r=n.isPanEnabled(e,i);if(1==r)return b.isInitDataValid=!1,!0;if(0==b.isInitDataValid)return a(e),!0}var o=b.startPosx+t;if(t>0&&o>0)o/=3;else if(0>t){var s=o+h.width(),l=c.width();l>s&&(o=b.startPosx+t/3)}if(0==b.isDragging&&(b.isDragging=!0,p.trigger(m.events.START_DRAG)),h.css("left",o+"px"),1==b.isDragVideo){var u=o-b.startPosx,d=b.videoStartX+u;b.videoObject.css("left",d)}}function a(e){var t=v.getMousePosition(e);b.startMouseX=t.pageX,b.startMouseY=t.pageY,b.lastMouseX=b.startMouseX,b.lastMouseY=b.startMouseY,b.startTime=jQuery.now();var i=v.getArrTouches(e);b.startArrTouches=v.getArrTouchPositions(i);var n=v.getElementSize(h);b.startPosx=n.left,b.isInitDataValid=!0,b.isDragVideo=!1,v.storeEventData(e,b.storedEventID)}function s(){b.touch_active=!1}function l(e,t){b.touch_active=!0,a(t)}function u(e){e.preventDefault(),b.isDragging=!1,1==m.isAnimating()&&h.stop(!0,!0);var t=v.getArrTouches(e);return t.length>1?(1==b.touch_active&&s("1"),!0):1==b.touch_active?!0:void l("1",e)}function d(e){if(0==b.touch_active)return!0;if(0==e.buttons)return s("2"),r(),!0;v.updateStoredEventData(e,b.storedEventID),e.preventDefault();var t=v.getMousePosition(e);b.lastMouseX=t.pageX,b.lastMouseY=t.pageY;var i=null;1==f.slider_vertical_scroll_ondrag&&(i=v.handleScrollTop(b.storedEventID)),"vert"!==i&&o(e)}function _(e){var n=v.getArrTouches(e),o=n.length,a=m.isInnerInPlace();if(1==a&&0==b.touch_active&&0==o)return!0;if(0==o&&1==b.touch_active){s("3");var u=!1,d=v.wasVerticalScroll(b.storedEventID);0==d&&(u=t()),1==u?r():i()}else 1==o&&0==b.touch_active&&l("2",e)}function g(){c.bind("mousedown touchstart",u),jQuery("body").bind("mousemove touchmove",d),jQuery(window).add("body").bind("mouseup touchend",_)}var c,h,p,f,m=new UGSlider,v=new UGFunctions,f={slider_transition_continuedrag_speed:250,slider_transition_continuedrag_easing:"linear",slider_transition_return_speed:300,slider_transition_return_easing:"easeInOutQuad"},b={touch_active:!1,startMouseX:0,startMouseY:0,lastMouseX:0,lastMouseY:0,startPosx:0,startTime:0,isInitDataValid:!1,slides:null,lastNumTouches:0,isDragging:!1,storedEventID:"touchSlider",videoStartX:0,isDragVideo:!1,videoObject:null};this.isTapEventOccured=function(t){var i=v.getArrTouches(t),n=i.length;if(0!=n||0!=b.lastNumTouches)return b.lastNumTouches=n,!1;b.lastNumTouches=n;var r=m.getSlidesReference(),o=(e(r),Math.abs(b.lastMouseX-b.startMouseX)),a=Math.abs(b.lastMouseY-b.startMouseY),s=jQuery.now(),l=s-b.startTime;return 20>o&&50>a&&500>l?!0:!1},this.init=function(e,t){m=e,p=jQuery(m),g_objects=e.getObjects(),c=g_objects.g_objSlider,h=g_objects.g_objInner,f=jQuery.extend(f,t),g()},this.getLastMousePos=function(){var e={pageX:b.lastMouseX,pageY:b.lastMouseY};return e},this.isTouchActive=function(){return b.touch_active}}function UGTouchThumbsControl(){function e(){var e=jQuery.now(),t={};return t.passedTime=T.lastTime-T.startTime,t.lastActiveTime=e-T.buttonReleaseTime,t.passedDistance=T.lastPos-T.startPos,t.passedDistanceAbs=Math.abs(t.passedDistance),t}function t(){E.thumb_touch_slowFactor=I.normalizeSetting(5e-5,.01,1,100,y.strip_thumb_touch_sensetivity,!0)}function i(e){return 0==w?I.getMousePosition(e).pageX:I.getMousePosition(e).pageY}function n(e){var t=T.mousePos-e,i=T.innerPos-t,n=h.getInnerStripLimits();if(i>n.maxPos){var r=i-n.maxPos;i=n.maxPos+r/3}if(i<n.minPos){var r=n.minPos-i;i=n.minPos-r/3}h.positionInnerStrip(i)}function r(e){var t=h.getInnerStripPos();T.mousePos=e,T.innerPos=t,T.lastPortionPos=t,T.lastDeltaTime=0,T.lastDeltaPos=0,T.startTime=jQuery.now(),T.startPos=T.innerPos,T.lastTime=T.startTime,T.lastPos=T.startPos,T.speed=0}function o(){var e=jQuery.now(),t=e-T.lastTime;t>=E.touch_portion_time&&(T.lastDeltaTime=e-T.lastTime,T.lastDeltaTime>E.touch_portion_time&&(T.lastDeltaTime=E.touch_portion_time),T.lastDeltaPos=T.lastPos-T.lastPortionPos,T.lastPortionPos=T.lastPos,T.lastTime=e)}function a(){var e=E.thumb_touch_slowFactor,t=E.minDeltaTime,i=E.minPath,n=h.getInnerStripPos(),r=jQuery.now(),o=r-T.lastTime,a=n-T.lastPortionPos;t>o&&T.lastDeltaTime>0&&(o=T.lastDeltaTime,a=T.lastDeltaPos+a),t>o&&(o=t);var l=a>0?1:-1,u=0;o>0&&(u=a/o);var d=u*u/(2*e)*l;Math.abs(d)<=i&&(d=0);var _=h.getInnerStripPos(),g=_+d,c=h.fixInnerStripLimits(g),p=h.getInnerStripLimits(),f=E.limitsBreakAddition,m=!1,v=c;if(g>p.maxPos&&(m=!0,c=f,f>g&&(c=g)),g<p.minPos){m=!0;var y=p.minPos-f;c=y,g>y&&(c=g)}var I=c-_,S=Math.abs(Math.round(u/e));if(0!=d&&(S=S*I/d),_!=c){var P={left:c+"px"};1==w&&(P={top:c+"px"}),b.animate(P,{duration:S,easing:E.animationEasing,queue:!0,progress:s})}if(1==m){var x=E.returnAnimateSpeed,j={left:v+"px"};1==w&&(j={top:v+"px"}),b.animate(j,{duration:x,easing:E.returnAnimationEasing,queue:!0,progress:s})}}function s(){T.lastPos=h.getInnerStripPos(),h.triggerStripMoveEvent()}function l(){return 1==T.loop_active?!0:(T.loop_active=!0,void(T.handle=setInterval(o,10)))}function u(e){if(0==T.loop_active)return!0;if(e){var t=i(e);a(t)}T.loop_active=!1,T.handle=clearInterval(T.handle)}function d(e){return 0==T.isControlEnabled?!0:(T.buttonReleaseTime=jQuery.now(),0==T.touch_active?(u(e),!0):(e.preventDefault(),T.touch_active=!1,u(e),void v.removeClass("ug-dragging")))}function _(e){if(0==T.isControlEnabled)return!0;e.preventDefault(),T.touch_active=!0;var t=i(e);b.stop(!0),r(t),l(),v.addClass("ug-dragging")}function g(e){if(0==T.isControlEnabled)return!0;if(0==T.touch_active)return!0;if(e.preventDefault(),0==e.buttons)return T.touch_active=!1,u(e),!0;var t=i(e);T.lastPos=h.getInnerStripPos(),n(t),o()}function c(){v.bind("mousedown touchstart",_),jQuery(window).add("body").bind("mouseup touchend",d),jQuery("body").bind("mousemove touchmove",g)}var h,p,f,m,v,b,y,w,I=new UGFunctions,E={touch_portion_time:200,thumb_touch_slowFactor:0,minDeltaTime:70,minPath:10,limitsBreakAddition:30,returnAnimateSpeed:500,animationEasing:"easeOutCubic",returnAnimationEasing:"easeOutCubic"},T={touch_active:!1,loop_active:!1,mousePos:0,innerPos:0,startPos:0,startTime:0,lastTime:0,buttonReleaseTime:0,lastPos:0,lastPortionPos:0,lastDeltaTime:0,lastDeltaPos:0,speed:0,handle:"",touchEnabled:!1,isControlEnabled:!0};this.enable=function(){T.isControlEnabled=!0},this.disable=function(){T.isControlEnabled=!1},this.init=function(e){h=e,m=e.getObjects(),p=m.g_gallery,f=m.g_objGallery,v=m.g_objStrip,b=m.g_objStripInner,y=m.g_options,w=m.isVertical,t(),c()},this.isSignificantPassed=function(){var t=e();return t.passedTime>300?!0:t.passedDistanceAbs>30?!0:!1},this.isTouchActive=function(){if(1==T.touch_active)return!0;if(1==b.is(":animated"))return!0;var t=e();return t.lastActiveTime<50?!0:!1},this.destroy=function(){v.unbind("mousedown"),v.unbind("touchstart"),jQuery(window).add("body").unbind("mouseup").unbind("touchend"),jQuery("body").unbind("mousemove").unbind("touchmove")}}function UGWistiaAPI(){function e(){return"undefined"!=typeof Wistia}function t(e,t,n,o,a){r=null,s=!1;var l=e+"_video",u="<div id='"+l+"' class='wistia_embed' style='width:"+n+";height:"+o+";' data-video-width='"+n+"' data-video-height='"+o+"'>&nbsp;</div>";jQuery("#"+e).html(u),r=Wistia.embed(t,{version:"v1",videoWidth:n,videoHeight:o,container:l,autoPlay:a}),s=!0,i()}function i(){r.bind("play",function(){a.trigger(o.events.START_PLAYING)}),r.bind("pause",function(){a.trigger(o.events.STOP_PLAYING)}),r.bind("end",function(){a.trigger(o.events.STOP_PLAYING)})}this.isAPILoaded=!1;var n,r,o=this,a=jQuery(this),s=!1;this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing"},this.loadAPI=function(){return 1==g_ugWistiaAPI.isAPILoaded?!0:e()?(g_ugWistiaAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("fast.wistia.com/assets/external/E-v1.js",!0),void(g_ugWistiaAPI.isAPILoaded=!0))},this.doCommand=function(e){if(null==r)return!1;if(0==s)return!1;switch(e){case"play":r.play();break;case"pause":r.pause()}},this.pause=function(){o.doCommand("pause")},this.play=function(){o.doCommand("play")},this.putVideo=function(i,r,o,a,s){return e()?(t(i,r,o,a,s),!0):(this.loadAPI(),void(n=setInterval(function(){e()&&(t(i,r,o,a,s),clearInterval(n))},500)))},this.isPlayerReady=function(){return s&&r?!0:!1}}function UGSoundCloudAPI(){function e(){return"undefined"!=typeof SC}function t(e,t,n,a,s){r=null,g_isPlayerReady=!1;var l=e+"_iframe",u=location.protocol+"//w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/"+t;u+="&amp;buying=false&amp;liking=false&amp;download=false&amp;sharing=false&amp;show_artwork=true&show_comments=false&amp;show_playcount=true&amp;show_user=false&amp;hide_related=true&amp;visual=true&amp;start_track=0&amp;callback=true",u+=s===!0?"&amp;auto_play=true":"&amp;auto_play=false";var d="<iframe id='"+l+"' src="+u+" width='"+n+"' height='"+a+"' frameborder='0' scrolling='no' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>";jQuery("#"+e).html(d),r=SC.Widget(l),r.bind(SC.Widget.Events.READY,function(){r&&(g_isPlayerReady=!0,i())}),o=e}function i(){r.bind(SC.Widget.Events.PLAY,function(){s.trigger(a.events.START_PLAYING)}),r.bind(SC.Widget.Events.PAUSE,function(){s.trigger(a.events.STOP_PLAYING)}),r.bind(SC.Widget.Events.FINISH,function(){s.trigger(a.events.STOP_PLAYING)})}this.isAPILoaded=!1;var n,r,o,a=this,s=jQuery(this);this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing"},this.loadAPI=function(){return 1==g_ugSoundCloudAPI.isAPILoaded?!0:e()?(g_ugSoundCloudAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("w.soundcloud.com/player/api.js",!0),void(g_ugSoundCloudAPI.isAPILoaded=!0))},this.putSound=function(i,r,o,a,s){return e()?(t(i,r,o,a,s),!0):(this.loadAPI(),void(n=setInterval(function(){e()&&(t(i,r,o,a,s),clearInterval(n))},500)))},this.doCommand=function(e){if(null==r)return!1;if(0==g_isPlayerReady)return!1;switch(e){case"play":r.play();break;case"pause":r.pause()}},this.pause=function(){a.doCommand("pause")},this.play=function(){a.doCommand("play")},this.destroy=function(){g_isPlayerReady=!1,r=null,o&&(jQuery("#"+o).html(""),o=null)}}function UGHtml5MediaAPI(){function e(){return"undefined"!=typeof mejs}function t(e,t,n,o,a){r=null,g_isPlayerReady=!1;var s=location.protocol+"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.13.2/js/flashmediaelement-cdn.swf",l=location.protocol+"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.13.2/js/silverlightmediaelement.xap",u=e+"_video",d="";
a&&a===!0&&(d="autoplay='autoplay'");var _="";t.posterImage&&(_="poster='"+t.posterImage+"'");var g="<video id='"+u+"' width='"+n+"' height='"+o+"'  controls='controls' preload='none' "+d+" "+_+">";""!=t.mp4&&(g+="<source type='video/mp4' src='"+t.mp4+"' />"),""!=t.webm&&(g+="<source type='video/webm' src='"+t.webm+"' />"),""!=t.ogv&&(g+="<source type='video/ogg' src='"+t.ogv+"' />"),g+="<object width='"+n+"' height='"+o+"' type='application/x-shockwave-flash' data='"+s+"'>",g+="<param name='movie' value='"+s+"' />",g+="<param name='flashvars' value='controls=true&file="+t.mp4+"' />",g+="</object>",g+="</video>",jQuery("#"+e).html(g),new MediaElement(u,{enablePluginDebug:!1,flashName:s,silverlightName:l,success:function(e){g_isPlayerReady=!0,r=e,0==a&&r.pause(),i()},error:function(e){trace(e)}})}function i(){g_ugFunctions.addEvent(r,"play",function(){a.trigger(o.events.START_PLAYING)}),g_ugFunctions.addEvent(r,"pause",function(){a.trigger(o.events.STOP_PLAYING)}),g_ugFunctions.addEvent(r,"ended",function(){a.trigger(o.events.STOP_PLAYING)})}this.isAPILoaded=!1;var n,r,o=this,a=jQuery(this);this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing"},this.loadAPI=function(){return 1==g_ugHtml5MediaAPI.isAPILoaded?!0:e()?(g_ugHtml5MediaAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("cdnjs.cloudflare.com/ajax/libs/mediaelement/2.13.2/js/mediaelement.js",!0),g_ugFunctions.loadCss("cdnjs.cloudflare.com/ajax/libs/mediaelement/2.13.2/css/mediaelementplayer.min.css",!0),void(g_ugHtml5MediaAPI.isAPILoaded=!0))},this.putVideo=function(i,r,o,a,s){return e()?(t(i,r,o,a,s),!0):(this.loadAPI(),void(n=setInterval(function(){e()&&(t(i,r,o,a,s),clearInterval(n))},500)))},this.doCommand=function(e){if(null==r)return!1;if(0==g_isPlayerReady)return!1;switch(e){case"play":r.play();break;case"pause":r.pause()}},this.pause=function(){o.doCommand("pause")},this.play=function(){o.doCommand("play")}}function UGVimeoAPI(){function e(){return"undefined"!=typeof Froogaloop}function t(e,t,n,o,a){s=null,l=!1;var u=location.protocol+"//player.vimeo.com/video/"+t+"?api=1";a===!0&&(u+="&amp;byline=0&amp;autoplay=1&amp;title=0&amp;portrait=0");var d="<iframe src="+u+" width='"+n+"' height='"+o+"' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>";jQuery("#"+e).html(d);var _=jQuery("#"+e+" iframe")[0];s=Froogaloop(_),s.addEvent("ready",function(){s&&(l=!0,i())}),r=e}function i(){return s?(s.addEvent("cuechange",function(){1==u&&o.play()}),s.addEvent("play",function(){a.trigger(o.events.START_PLAYING)}),s.addEvent("pause",function(){a.trigger(o.events.STOP_PLAYING)}),void s.addEvent("finish",function(){a.trigger(o.events.STOP_PLAYING)})):!1}this.isAPILoaded=!1;var n,r,o=this,a=jQuery(this),s=null,l=!1,u=!1;this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing"},this.loadAPI=function(){return 1==g_ugVimeoAPI.isAPILoaded?!0:e()?(g_ugVimeoAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("f.vimeocdn.com/js/froogaloop2.min.js",!0),void(g_ugVimeoAPI.isAPILoaded=!0))},this.doCommand=function(e){if(null==s)return!1;if(0==l)return!1;switch(e){default:s.api(e)}},this.pause=function(){o.doCommand("pause")},this.play=function(){o.doCommand("play")},this.destroy=function(){s&&(s.api("unload"),s=null,l=!1),r&&jQuery("#"+r).html("")},this.putVideo=function(i,r,o,a,s){return e()?(t(i,r,o,a,s),!0):(this.loadAPI(),void(n=setInterval(function(){e()&&(t(i,r,o,a,s),clearInterval(n))},500)))},this.isPlayerReady=function(){return l&&s?!0:!1},this.changeVideo=function(e,t){return 0==o.isPlayerReady()?!1:(u=t,void s.api("loadVideo",e))},this.getVideoImages=function(e,t,i){var n=location.protocol+"//vimeo.com/api/v2/video/"+e+".json";jQuery.get(n,{},function(e){var n={};n.preview=e[0].thumbnail_large,n.thumb=e[0].thumbnail_medium,i(t,n)})}}function UGYoutubeAPI(){function e(e,t,r,a,u){s&&l&&s.destroy();var d={controls:2,showinfo:_.video_youtube_showinfo,rel:0};u===!0&&(d.autoplay=1),l=!1,s=new YT.Player(e,{height:a,width:r,videoId:t,playerVars:d,events:{onReady:i,onStateChange:n}}),o=e}function t(){return"undefined"!=typeof YT&&"undefined"!=typeof YT.Player?!0:!1}function i(){l=!0}function n(){if("function"!=typeof s.getPlayerState)return trace("Youtube API error: can't get player state"),!1;var e=s.getPlayerState();switch(e){case YT.PlayerState.PLAYING:u.trigger(a.events.START_PLAYING);break;default:d==YT.PlayerState.PLAYING&&u.trigger(a.events.STOP_PLAYING)}d=e}this.isAPILoaded=!1;var r,o,a=this,s=null,l=!1,u=jQuery(this),d=-1,_={video_youtube_showinfo:!0};this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing"},this.setOptions=function(e){_=jQuery.extend(_,e)},this.putVideo=function(i,n,o,a,s){return t()?(e(i,n,o,a,s),!0):(this.loadAPI(),void(r=setInterval(function(){t()&&(e(i,n,o,a,s),clearInterval(r))},500)))},this.loadAPI=function(){return 1==g_ugYoutubeAPI.isAPILoaded?!0:"undefined"!=typeof YT?(g_ugYoutubeAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("www.youtube.com/player_api",!0),void(g_ugYoutubeAPI.isAPILoaded=!0))},this.doCommand=function(e,t){if(!s)return!0;if(0==l)return!1;switch(e){case"play":if("function"!=typeof s.playVideo)return!1;s.playVideo();break;case"pause":if("function"!=typeof s.pauseVideo)return!1;s.pauseVideo();break;case"seek":if("function"!=typeof s.seekTo)return!1;s.seekTo(t);break;case"stopToBeginning":var i=s.getPlayerState();switch(s.pauseVideo(),i){case YT.PlayerState.PLAYING:case YT.PlayerState.ENDED:case YT.PlayerState.PAUSED:s.seekTo(0)}}},this.play=function(){a.doCommand("play")},this.pause=function(){a.doCommand("pause")},this.destroy=function(){s&&(l=!1,s.destroy())},this.stopToBeginning=function(){a.doCommand("stopToBeginning")},this.changeVideo=function(e,t){return 0==a.isPlayerReady()?!1:void(t&&1==t?s.loadVideoById(e,0,"default"):s.cueVideoById(e,0,"default"))},this.isPlayerReady=function(){return l&&s?!0:!1},this.getVideoImages=function(e){var t={};return t.preview="https://i.ytimg.com/vi/"+e+"/sddefault.jpg",t.thumb="https://i.ytimg.com/vi/"+e+"/default.jpg",t}}function UGVideoPlayer(){function e(){c.hide()}function t(){h.trigger(c.events.PLAY_START),d&&d.hide()}function i(){h.trigger(c.events.PLAY_STOP),d&&d.show()}function n(){d&&(p.setButtonMobileReady(d),p.setButtonOnClick(d,e)),jQuery(f).on(f.events.START_PLAYING,t),jQuery(f).on(f.events.STOP_PLAYING,i),jQuery(m).on(m.events.START_PLAYING,t),jQuery(m).on(m.events.STOP_PLAYING,i),jQuery(v).on(v.events.START_PLAYING,t),jQuery(v).on(v.events.STOP_PLAYING,i),jQuery(b).on(b.events.START_PLAYING,t),jQuery(b).on(b.events.STOP_PLAYING,i),jQuery(y).on(y.events.START_PLAYING,t),jQuery(y).on(y.events.STOP_PLAYING,i)}function r(e){var t=["youtube","vimeo","html5","soundcloud","wistia"];for(var i in t){var n=t[i];if(n!=e)switch(n){case"youtube":f.pause(),f.destroy(),s.hide();break;case"vimeo":m.pause(),m.destroy(),l.hide();break;case"html5":v.pause(),u.hide();break;case"soundcloud":b.pause(),b.destroy(),_.hide();break;case"wistia":y.pause(),g.hide()}}}var o,a,s,l,u,d,_,g,c=this,h=jQuery(this),p=new UGFunctions,f=new UGYoutubeAPI,m=new UGVimeoAPI,v=new UGHtml5MediaAPI,b=new UGSoundCloudAPI,y=new UGWistiaAPI,w=null,I={video_enable_closebutton:!0};this.events={SHOW:"video_show",HIDE:"video_hide",PLAY_START:"video_play_start",PLAY_STOP:"video_play_stop"};var E={standAloneMode:!1,youtubeInnerID:"",vimeoPlayerID:"",html5PlayerID:"",wistiaPlayerID:"",soundCloudPlayerID:""};this.init=function(e,t,i){if(o=i,!o)throw new Error("missing gallery ID for video player, it's a must!");I=jQuery.extend(I,e),f.setOptions(I),t&&1==t&&(E.standAloneMode=!0)},this.setHtml=function(e){E.youtubeInnerID=o+"_youtube_inner",E.vimeoPlayerID=o+"_videoplayer_vimeo",E.html5PlayerID=o+"_videoplayer_html5",E.wistiaPlayerID=o+"_videoplayer_wistia",E.soundCloudPlayerID=o+"_videoplayer_soundcloud";var t="<div class='ug-videoplayer' style='display:none'>";t+="<div class='ug-videoplayer-wrapper ug-videoplayer-youtube' style='display:none'><div id='"+E.youtubeInnerID+"'></div></div>",t+="<div id='"+E.vimeoPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-vimeo' style='display:none'></div>",t+="<div id='"+E.html5PlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-html5'></div>",t+="<div id='"+E.soundCloudPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-soundcloud'></div>",t+="<div id='"+E.wistiaPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-wistia'></div>",0==E.standAloneMode&&1==I.video_enable_closebutton&&(t+="<div class='ug-videoplayer-button-close'></div>"),t+="</div>",e.append(t),a=e.children(".ug-videoplayer"),s=a.children(".ug-videoplayer-youtube"),l=a.children(".ug-videoplayer-vimeo"),u=a.children(".ug-videoplayer-html5"),_=a.children(".ug-videoplayer-soundcloud"),g=a.children(".ug-videoplayer-wistia"),0==E.standAloneMode&&1==I.video_enable_closebutton&&(d=a.children(".ug-videoplayer-button-close"))},this.destroy=function(){d&&(d.off("click"),d.off("touchend")),jQuery(f).off(f.events.START_PLAYING),jQuery(f).off(f.events.STOP_PLAYING),jQuery(m).off(m.events.START_PLAYING),jQuery(m).off(m.events.STOP_PLAYING),jQuery(v).off(v.events.START_PLAYING),jQuery(v).off(v.events.STOP_PLAYING),jQuery(b).off(b.events.START_PLAYING,t),jQuery(b).off(b.events.STOP_PLAYING,i),jQuery(y).off(y.events.START_PLAYING,t),jQuery(y).off(y.events.STOP_PLAYING,i),w=null},this.initEvents=function(){n()},this.setSize=function(e,t){p.setElementSize(a,e,t),d&&p.placeElement(d,"right","top")},this.setPosition=function(e,t){p.placeElement(a,e,t)},this.getObject=function(){return a},this.show=function(){return 1==c.isVisible()?!0:(a.show(),a.fadeTo(0,1),d&&d.show(),void h.trigger(c.events.SHOW))},this.hide=function(){return 0==c.isVisible()?!0:(r(),w=null,a.hide(),void h.trigger(c.events.HIDE))},this.getActiveAPI=function(){switch(w){case"youtube":return f;case"vimeo":return m;case"wistia":return y;case"soundcloud":return b;case"html5":return v;default:return null}},this.pause=function(){var e=c.getActiveAPI();return null==e?!1:void("function"==typeof e.pause&&e.pause())},this.isVisible=function(){return a.is(":visible")},this.playYoutube=function(e,t){if("undefined"==typeof t)var t=!0;r("youtube"),s.show();var i=s.children("#"+E.youtubeInnerID);0==i.length&&s.append("<div id='"+E.youtubeInnerID+"'></div>"),1==f.isPlayerReady()&&1==E.standAloneMode?f.changeVideo(e,t):f.putVideo(E.youtubeInnerID,e,"100%","100%",t),w="youtube"},this.playVimeo=function(e,t){if("undefined"==typeof t)var t=!0;r("vimeo"),l.show(),m.isPlayerReady()&&1==E.standAloneMode?m.changeVideo(e,t):m.putVideo(E.vimeoPlayerID,e,"100%","100%",t),w="vimeo"},this.playHtml5Video=function(e,t,i,n,o){if("undefined"==typeof o)var o=!0;r("html5"),u.show();var a={ogv:e,webm:t,mp4:i,posterImage:n};v.putVideo(E.html5PlayerID,a,"100%","100%",o),w="html5"},this.playSoundCloud=function(e,t){if("undefined"==typeof t)var t=!0;r("soundcloud"),_.show(),b.putSound(E.soundCloudPlayerID,e,"100%","100%",t),w="soundcloud"},this.playWistia=function(e,t){if("undefined"==typeof t)var t=!0;r("wistia"),g.show(),y.putVideo(E.wistiaPlayerID,e,"100%","100%",t),w="wistia"}}function UGZoomSliderControl(){function e(e,t){E=e,I=jQuery(E),g_objects=e.getObjects(),y=g_objects.g_objSlider,w=g_objects.g_objInner,S=jQuery.extend(S,t),b()}function t(){var e=E.getScaleMode();return"down"!=e&&(e="fit"),e}function i(){var e=jQuery.now(),i=e-P.storeImageLastTime;if(20>i)return!1;var n=E.getSlidesReference();if(P.objSlide=n.objCurrentSlide,P.objImage=n.objCurrentSlide.find("img"),0==P.objImage.length)return!1;P.objImageSize=T.getElementSize(P.objImage),P.objParent=P.objImage.parent(),P.objParentSize=T.getElementSize(P.objParent);var r=t();objPadding=E.getObjImagePadding(),P.objFitImageSize=T.getImageInsideParentDataByImage(P.objImage,r,objPadding);var e=jQuery.now();return P.storeImageLastTime=e,!0}function n(e,i){var n=E.getSlidesReference(),r=n.objCurrentSlide.find("img"),o=t();I.trigger(E.events.ZOOM_START);var a=!0,s=E.getObjImagePadding();if("back"==e){var l=T.getImageOriginalSize(r);T.scaleImageFitParent(r,l.width,l.height,o,s)}else{var u="in"==e?!0:!1;a=T.zoomImageInsideParent(r,u,S.slider_zoom_step,i,o,S.slider_zoom_max_ratio,s)}1==a&&(I.trigger(E.events.ZOOMING),I.trigger(E.events.ZOOM_CHANGE),I.trigger(E.events.ZOOM_END))}function r(e,t,i){var n=T.getArrTouches(t);if(i===!0){if(1!=n.length)return!1}else if(n.length>1)return!1;return T.isElementBiggerThenParent(e)?!0:!1}function o(e){var t=T.getMousePosition(e);P.startMouseX=t.pageX,P.startMouseY=t.pageY,P.lastMouseX=P.startMouseX,P.lastMouseY=P.startMouseY,P.startImageX=P.objImageSize.left,P.startImageY=P.objImageSize.top,P.panXActive=P.objImageSize.width>P.objParentSize.width,P.panYActive=P.objImageSize.height>P.objParentSize.height}function a(e){P.isPanActive=!0,o(e)}function s(e){if(void 0==P.objImage||0==P.objImage.length)return!0;var t=T.getMousePosition(e),i=(t.pageX-P.startMouseX,t.pageY-P.startMouseY,t.pageX-P.lastMouseX),n=t.pageY-P.lastMouseY,r=0>i?"left":"right",o=0>n?"up":"down";P.lastMouseX=t.pageX,P.lastMouseY=t.pageY;var a=T.getElementSize(P.objImage);0==P.panYActive?n=0:"down"==o&&a.top>0?n/=3:"up"==o&&a.bottom<P.objParentSize.height&&(n/=3),0==P.panXActive||0==E.isInnerInPlace()?i=0:"right"==r&&a.left>0?i/=3:"left"==r&&a.right<P.objParentSize.width&&(i/=3);var s=a.left+i,l=a.top+n;T.placeElement(P.objImage,s,l)}function l(){var e=!1,t=!1,i=0,n=0,r=T.getElementSize(P.objImage),o=E.getObjImagePadding(),a=T.getElementCenterPosition(P.objImage,o);P.panXActive=P.objImageSize.width>P.objParentSize.width,P.panYActive=P.objImageSize.height>P.objParentSize.height,1==P.panYActive?r.top>0?(n=0,t=!0):r.bottom<P.objParentSize.height&&(n=P.objParentSize.height-r.height,t=!0):r.top!=a.top&&(t=!0,n=a.top),1==P.panXActive?r.left>0?(i=0,e=!0):r.right<P.objParentSize.width&&(i=P.objParentSize.width-r.width,e=!0):r.left!=a.left&&(e=!0,i=a.left);var s={};1==t&&(s.top=n+"px"),1==e&&(s.left=i+"px"),(1==t||1==e)&&P.objImage.animate(s,{duration:S.slider_zoom_return_pan_duration,easing:S.slider_zoom_return_pan_easing,queue:!1})}function u(){return P.objImage&&P.objImage.is(":animated")?!0:!1}function d(e){P.isZoomActive=!0,P.startDistance=T.getDistance(e[0].pageX,e[0].pageY,e[1].pageX,e[1].pageY),0==P.startDistance&&(P.startDistance=1),P.startMiddlePoint=T.getMiddlePoint(e[0].pageX,e[0].pageY,e[1].pageX,e[1].pageY),P.objImageSize=T.getElementSize(P.objImage),P.startImageX=P.objImageSize.left,P.startImageY=P.objImageSize.top,P.imageOrientPoint=T.getElementLocalPoint(P.startMiddlePoint,P.objImage);var t=T.isPointInsideElement(P.imageOrientPoint,P.objImageSize);0==t&&(P.imageOrientPoint=T.getElementCenterPoint(P.objImage)),I.trigger(E.events.ZOOM_START)}function _(e){if(0==P.isZoomActive)return!1;var t=T.getArrTouches(e);2!=t.length&&(P.isZoomActive=!1,I.trigger(E.events.ZOOM_END))}function g(e){if(1==P.isZoomActive)return!0;var t=T.getArrTouches(e);return 2!=t.length?!0:void d(t)}function c(e){var t=T.getArrTouches(e),i=T.getDistance(t[0].pageX,t[0].pageY,t[1].pageX,t[1].pageY),n=i/P.startDistance,r=T.getMiddlePoint(t[0].pageX,t[0].pageY,t[1].pageX,t[1].pageY),o=P.objImageSize.width*n,a=P.objImageSize.height*n,s=T.getImageOriginalSize(P.objImage),l=1;if(s.width>0&&(l=o/s.width),l>S.slider_zoom_max_ratio)return!0;panX=-(P.imageOrientPoint.x*n-P.imageOrientPoint.x),panY=-(P.imageOrientPoint.y*n-P.imageOrientPoint.y);var u=r.x-P.startMiddlePoint.x,d=r.y-P.startMiddlePoint.y,_=P.startImageX+panX+u,g=P.startImageY+panY+d;T.setElementSizeAndPosition(P.objImage,_,g,o,a),I.trigger(E.events.ZOOMING),I.trigger(E.events.ZOOM_CHANGE)}function h(){if(void 0==P.objImage||0==P.objImage.length)return!0;var e=T.getElementSize(P.objImage);if(e.width<P.objFitImageSize.imageWidth){P.objImage.css({position:"absolute",margin:"none"});var t={top:P.objFitImageSize.imageTop+"px",left:P.objFitImageSize.imageLeft+"px",width:P.objFitImageSize.imageWidth+"px",height:P.objFitImageSize.imageHeight+"px"};P.objImage.animate(t,{duration:S.slider_zoom_return_pan_duration,easing:S.slider_zoom_return_pan_easing,queue:!1})}else l()}function p(e){if(0==E.isCurrentSlideType("image"))return!0;i();return void 0==P.objImage||0==P.objImage.length?!0:(e.preventDefault(),1==u()&&P.objImage.stop(!0),1==P.isZoomActive?_(e):g(e),void(1==P.isZoomActive?P.isPanActive=!1:1==r(P.objImage,e)&&1==P.isZoomedOnce&&a(e)))}function f(e){if(0==E.isCurrentSlideType("image"))return!0;var t=jQuery(e.target);if(1==t.data("ug-button"))return!1;i();if(void 0==P.objImage||0==P.objImage.length)return!0;var n=P.isPanActive,o=P.isZoomActive;if(0==E.isInnerInPlace())return P.isZoomActive=!1,P.isPanActive=!1,!0;if(1==P.isZoomActive?_(e):g(e),1==P.isZoomActive)0==P.isPanActive;else{var s=r(P.objImage,e,!0);1==P.isPanActive?P.isPanActive=!1:1==s&&a(e)}(n||o)&&0==P.isZoomActive&&0==P.isPanActive&&h()}function m(e){return 0==E.isCurrentSlideType("image")?!0:void(1==P.isZoomActive?c(e):1==P.isPanActive&&s(e))}function v(e,t){if(0==S.slider_zoom_mousewheel)return!0;if(0==E.isCurrentSlideType("image"))return!0;e.preventDefault();var i=t>0,r=T.getMousePosition(e),o=1==i?"in":"out";n(o,r)}function b(){y.on("mousewheel",v),y.bind("mousedown touchstart",p),jQuery("body").bind("mousemove touchmove",m),jQuery(window).add("body").bind("mouseup touchend",f),I.bind(E.events.BEFORE_RETURN,function(){h()}),I.bind(E.events.ITEM_CHANGED,function(){P.isZoomedOnce=!1}),I.bind(E.events.ZOOM_CHANGE,function(){P.isZoomedOnce=!0})}var y,w,I,E=new UGSlider,T=new UGFunctions,S={slider_zoom_step:1.2,slider_zoom_max_ratio:6,slider_zoom_return_pan_duration:400,slider_zoom_return_pan_easing:"easeOutCubic"},P={isPanActive:!1,startMouseX:0,startMouseY:0,lastMouseX:0,lastMouseY:0,startImageX:0,startImageY:0,panXActive:!1,panYActive:!1,objImage:null,objImageSize:null,objParent:null,objParentSize:null,objSlide:null,storeImageLastTime:0,isZoomActive:!1,startDistance:0,startMiddlePoint:null,imageOrientPoint:null,objFitImageSize:null,isZoomedOnce:!1};this.________EXTERNAL_____________=function(){},this.isPanEnabled=function(e,t){if(i(),void 0==P.objImage||0==P.objImage.length)return!1;if(0==P.isZoomedOnce)return!1;if(0==r(P.objImage,e))return!1;if(0==E.isInnerInPlace())return!1;if("left"==t){if(P.objImageSize.right<=P.objParentSize.width)return!1}else if(P.objImageSize.left>=0)return!1;return!0},this.init=function(t,i){e(t,i)},this.zoomIn=function(){n("in")},this.zoomOut=function(){n("out")},this.zoomBack=function(){n("back")}}!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,s=l.call(arguments,1),u=0,d=0,_=0,g=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(_=-1*a.detail),"wheelDelta"in a&&(_=a.wheelDelta),"wheelDeltaY"in a&&(_=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*_,_=0),u=0===_?d:_,"deltaY"in a&&(_=-1*a.deltaY,u=_),"deltaX"in a&&(d=a.deltaX,0===_&&(u=-1*d)),0!==_||0!==d){if(1===a.deltaMode){var c=e.data(this,"mousewheel-line-height");u*=c,_*=c,d*=c}else if(2===a.deltaMode){var h=e.data(this,"mousewheel-page-height");u*=h,_*=h,d*=h}return g=Math.max(Math.abs(_),Math.abs(d)),(!o||o>g)&&(o=g,n(a,g)&&(o/=40)),n(a,g)&&(u/=40,d/=40,_/=40),u=Math[u>=1?"floor":"ceil"](u/o),d=Math[d>=1?"floor":"ceil"](d/o),_=Math[_>=1?"floor":"ceil"](_/o),t.deltaX=d,t.deltaY=_,t.deltaFactor=o,t.deltaMode=0,s.unshift(t,u,d,_),r&&clearTimeout(r),r=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function i(){o=null}function n(e,t){return d.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var r,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var u=a.length;u;)e.event.fixHooks[a[--u]]=e.event.mouseHooks;var d=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var i=s.length;i;)this.addEventListener(s[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",d.getLineHeight(this)),e.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=s.length;e;)this.removeEventListener(s[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,i,n,r){return jQuery.easing[jQuery.easing.def](e,t,i,n,r)},easeInQuad:function(e,t,i,n,r){return n*(t/=r)*t+i},easeOutQuad:function(e,t,i,n,r){return-n*(t/=r)*(t-2)+i},easeInOutQuad:function(e,t,i,n,r){return(t/=r/2)<1?n/2*t*t+i:-n/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,n,r){return n*(t/=r)*t*t+i},easeOutCubic:function(e,t,i,n,r){return n*((t=t/r-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,n,r){return(t/=r/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,n,r){return n*(t/=r)*t*t*t+i},easeOutQuart:function(e,t,i,n,r){return-n*((t=t/r-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,n,r){return(t/=r/2)<1?n/2*t*t*t*t+i:-n/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,n,r){return n*(t/=r)*t*t*t*t+i},easeOutQuint:function(e,t,i,n,r){return n*((t=t/r-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+i:n/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,n,r){return-n*Math.cos(t/r*(Math.PI/2))+n+i},easeOutSine:function(e,t,i,n,r){return n*Math.sin(t/r*(Math.PI/2))+i},easeInOutSine:function(e,t,i,n,r){return-n/2*(Math.cos(Math.PI*t/r)-1)+i},easeInExpo:function(e,t,i,n,r){return 0==t?i:n*Math.pow(2,10*(t/r-1))+i},easeOutExpo:function(e,t,i,n,r){return t==r?i+n:n*(-Math.pow(2,-10*t/r)+1)+i},easeInOutExpo:function(e,t,i,n,r){return 0==t?i:t==r?i+n:(t/=r/2)<1?n/2*Math.pow(2,10*(t-1))+i:n/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(e,t,i,n,r){return-n*(Math.sqrt(1-(t/=r)*t)-1)+i},easeOutCirc:function(e,t,i,n,r){return n*Math.sqrt(1-(t=t/r-1)*t)+i},easeInOutCirc:function(e,t,i,n,r){return(t/=r/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+i:n/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,n,r){var o=1.70158,a=0,s=n;if(0==t)return i;if(1==(t/=r))return i+n;if(a||(a=.3*r),s<Math.abs(n)){s=n;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(n/s);return-(s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*r-o)*Math.PI/a))+i},easeOutElastic:function(e,t,i,n,r){var o=1.70158,a=0,s=n;if(0==t)return i;if(1==(t/=r))return i+n;if(a||(a=.3*r),s<Math.abs(n)){s=n;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(n/s);return s*Math.pow(2,-10*t)*Math.sin(2*(t*r-o)*Math.PI/a)+n+i},easeInOutElastic:function(e,t,i,n,r){var o=1.70158,a=0,s=n;if(0==t)return i;if(2==(t/=r/2))return i+n;if(a||(a=.3*r*1.5),s<Math.abs(n)){s=n;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(n/s);return 1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*r-o)*Math.PI/a)+i:s*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*r-o)*Math.PI/a)*.5+n+i},easeInBack:function(e,t,i,n,r,o){return void 0==o&&(o=1.70158),n*(t/=r)*t*((o+1)*t-o)+i},easeOutBack:function(e,t,i,n,r,o){return void 0==o&&(o=1.70158),n*((t=t/r-1)*t*((o+1)*t+o)+1)+i},easeInOutBack:function(e,t,i,n,r,o){return void 0==o&&(o=1.70158),(t/=r/2)<1?n/2*t*t*(((o*=1.525)+1)*t-o)+i:n/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+i},easeInBounce:function(e,t,i,n,r){return n-jQuery.easing.easeOutBounce(e,r-t,0,n,r)+i},easeOutBounce:function(e,t,i,n,r){return(t/=r)<1/2.75?7.5625*n*t*t+i:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+i:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+i:n*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(e,t,i,n,r){return r/2>t?.5*jQuery.easing.easeInBounce(e,2*t,0,n,r)+i:.5*jQuery.easing.easeOutBounce(e,2*t-r,0,n,r)+.5*n+i}}),!function(e,t){function i(e,t,i){var n=_[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=u(),n=i._rgba=[];return t=t.toLowerCase(),h(l,function(e,r){var o,a=r.re.exec(t),s=a&&r.parse(a),l=r.space||"rgba";return s?(o=i[l](s),i[d[l].cache]=o[d[l].cache],n=i._rgba=o._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,o.transparent),i):o[t]}function r(e,t,i){return i=(i+1)%1,1>6*i?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],u=e.Color=function(t,i,n,r){return new e.Color.fn.parse(t,i,n,r)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},_={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},g=u.support={},c=e("<p>")[0],h=e.each;c.style.cssText="background-color:rgba(1,1,1,.5)",g.rgba=c.style.backgroundColor.indexOf("rgba")>-1,h(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),u.fn=e.extend(u.prototype,{parse:function(r,a,s,l){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(a),a=t);var _=this,g=e.type(r),c=this._rgba=[];return a!==t&&(r=[r,a,s,l],g="array"),"string"===g?this.parse(n(r)||o._default):"array"===g?(h(d.rgba.props,function(e,t){c[t.idx]=i(r[t.idx],t)}),this):"object"===g?(r instanceof u?h(d,function(e,t){r[t.cache]&&(_[t.cache]=r[t.cache].slice())}):h(d,function(t,n){var o=n.cache;h(n.props,function(e,t){if(!_[o]&&n.to){if("alpha"===e||null==r[e])return;_[o]=n.to(_._rgba)}_[o][t.idx]=i(r[e],t,!0)}),_[o]&&e.inArray(null,_[o].slice(0,3))<0&&(_[o][3]=1,n.from&&(_._rgba=n.from(_[o])))}),this):void 0},is:function(e){var t=u(e),i=!0,n=this;return h(d,function(e,r){var o,a=t[r.cache];return a&&(o=n[r.cache]||r.to&&r.to(n._rgba)||[],h(r.props,function(e,t){return null!=a[t.idx]?i=a[t.idx]===o[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return h(d,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=u(e),r=n._space(),o=d[r],a=0===this.alpha()?u("transparent"):this,s=a[o.cache]||o.to(a._rgba),l=s.slice();return n=n[o.cache],h(o.props,function(e,r){var o=r.idx,a=s[o],u=n[o],d=_[r.type]||{};null!==u&&(null===a?l[o]=u:(d.mod&&(u-a>d.mod/2?a+=d.mod:a-u>d.mod/2&&(a-=d.mod)),l[o]=i((u-a)*t+a,r)))}),this[r](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),r=u(t)._rgba;return u(e.map(i,function(e,t){return(1-n)*r[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,r=e[1]/255,o=e[2]/255,a=e[3],s=Math.max(n,r,o),l=Math.min(n,r,o),u=s-l,d=s+l,_=.5*d;return t=l===s?0:n===s?60*(r-o)/u+360:r===s?60*(o-n)/u+120:60*(n-r)/u+240,i=0===u?0:.5>=_?u/d:u/(2-d),[Math.round(t)%360,i,_,null==a?1:a]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],a=.5>=n?n*(1+i):n+i-n*i,s=2*n-a;return[Math.round(255*r(s,a,t+1/3)),Math.round(255*r(s,a,t)),Math.round(255*r(s,a,t-1/3)),o]},h(d,function(n,r){var o=r.props,a=r.cache,l=r.to,d=r.from;u.fn[n]=function(n){if(l&&!this[a]&&(this[a]=l(this._rgba)),n===t)return this[a].slice();var r,s=e.type(n),_="array"===s||"object"===s?n:arguments,g=this[a].slice();return h(o,function(e,t){var n=_["object"===s?e:t.idx];null==n&&(n=g[t.idx]),g[t.idx]=i(n,t)}),d?(r=u(d(g)),r[a]=g,r):u(g)},h(o,function(t,i){u.fn[t]||(u.fn[t]=function(r){var o,a=e.type(r),l="alpha"===t?this._hsla?"hsla":"rgba":n,u=this[l](),d=u[i.idx];return"undefined"===a?d:("function"===a&&(r=r.call(this,d),a=e.type(r)),null==r&&i.empty?this:("string"===a&&(o=s.exec(r),o&&(r=d+parseFloat(o[2])*("+"===o[1]?1:-1))),u[i.idx]=r,this[l](u)))})})}),u.hook=function(t){var i=t.split(" ");h(i,function(t,i){e.cssHooks[i]={set:function(t,r){var o,a,s="";if("transparent"!==r&&("string"!==e.type(r)||(o=n(r)))){if(r=u(o||r),!g.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===i?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=e.css(a,"backgroundColor"),a=a.parentNode}catch(l){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{t.style[i]=r}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=u(t.elem,i),t.end=u(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},u.hook(a),e.cssHooks.borderColor={expand:function(e){var t={};return h(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),!function(e){function t(){var i=this===document?e(this):e(this).contents();i.mousemove(function(t){e.mlp={x:t.pageX,y:t.pageY}}),i.find("iframe").load(t)}e.mlp={x:0,y:0},e(t),e.fn.ismouseover=function(){var t=!1;return this.eq(0).each(function(){var i=e(this).is("iframe")?e(this).contents().find("body"):e(this),n=i.offset();t=n.left<=e.mlp.x&&n.left+i.outerWidth()>e.mlp.x&&n.top<=e.mlp.y&&n.top+i.outerHeight()>e.mlp.y}),t}}(jQuery);var g_ugFunctions=new UGFunctions;jQuery.fn.unitegallery=function(e){var t=jQuery(this),i="#"+t.attr("id");if(!e)var e={};var n=new UniteGalleryMain;n.run(i,e);var r=new UG_API(n);return r};var g_ugYoutubeAPI=new UGYoutubeAPI,g_ugVimeoAPI=new UGVimeoAPI,g_ugHtml5MediaAPI=new UGHtml5MediaAPI,g_ugSoundCloudAPI=new UGSoundCloudAPI,g_ugWistiaAPI=new UGWistiaAPI;